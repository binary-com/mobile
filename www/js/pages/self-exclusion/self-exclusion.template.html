<ion-view class="self-exclusion">
  <ion-content class="general-content has-header has-subheader">
    <div class="row">
      <div class="col">
        <h1 class="page-title">
          {{ 'self-exclusion.self-exclusion' | translate }}
        </h1>
      </div>
    </div>
    <div class="row" ng-if="!vm.isDataLoaded">
      <div class="col center">
        <ion-spinner></ion-spinner>
      </div>
    </div>
    <form name="self_exclusion_form" ng-submit="vm.submit()" ng-show="vm.isDataLoaded">
      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.maximum-account-cash-balance' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="max_account_balance"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_balance"
                     ng-max="vm.limits.max_balance"
                     ng-min="1"
                     ng-required="vm.limits.max_balance ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint"> {{ 'self-exclusion.max-balance-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.max_account_balance.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate :
                  {max: vm.validation.length.selfExclusionLimits.max,
                  fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_balance} }}
                </ng-message>
                </ng-message>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.daily-turnover-limit' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="max_daily_turnover"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_turnover"
                     ng-max="vm.limits.max_turnover"
                     ng-min="1"
                     ng-required="vm.limits.max_turnover ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint"> {{ 'self-exclusion.max-turnover-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.max_daily_turnover.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate : {max:
                  vm.validation.length.selfExclusionLimits.max, fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_turnover} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.daily-limit-on-losses' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="daily_limit_on_losses"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_losses"
                     ng-max="vm.limits.max_losses"
                     ng-min="1"
                     ng-required="vm.limits.max_losses ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint"> {{ 'self-exclusion.max-losses-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.daily_limit_on_losses.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate : {max:
                  vm.validation.length.selfExclusionLimits.max, fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_losses} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.7-day-turnover-limit' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="max_7_day_turnover_limit"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_7day_turnover"
                     ng-max="vm.limits.max_7day_turnover"
                     ng-min="1"
                     ng-required="vm.limits.max_7day_turnover ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint"> {{ 'self-exclusion.7-day-turnover-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.max_7_day_turnover_limit.$error"
                           role="alert"
                           class="error">
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate :
                  {max: vm.limits.max_7day_turnover} }}
                </ng-message>
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate : {max:
                  vm.validation.length.selfExclusionLimits.max, fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.7-day-limit-on-losses' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="max_7_day_limit_on_losses"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_7day_losses"
                     ng-max="vm.limits.max_7day_losses"
                     ng-min="1"
                     ng-required="vm.limits.max_7day_losses ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint"> {{ 'self-exclusion.7-day-losses-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.max_7_day_limit_on_losses.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate : {max:
                  vm.validation.length.selfExclusionLimits.max, fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate :
                  {max: vm.limits.max_7day_losses} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.30-day-turnover-limit' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="max_30_day_turnover_limit"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_30day_turnover"
                     ng-max="vm.limits.max_30day_turnover"
                     ng-min="1"
                     ng-required="vm.limits.max_30day_turnover ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint"> {{ 'self-exclusion.30-day-turnover-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.max_30_day_turnover_limit.$error" role="alert" class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate : {max:
                  vm.validation.length.selfExclusionLimits.max, fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_30day_turnover} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.30-day-limit-on-losses' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="max_30_day_limit_on_losses"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateFloatNumber"
                     ng-model="vm.data.max_30day_losses"
                     ng-max="vm.limits.max_30day_losses"
                     ng-min="1"
                     ng-required="vm.limits.max_30day_losses ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionLimits.max"/>
              <div class="hint">
                {{ 'self-exclusion.30-day-losses-hint' | translate }}
              </div>
              <ng-messages for="self_exclusion_form.max_30_day_limit_on_losses.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.enter-valid-value' | translate : {max:
                  vm.validation.length.selfExclusionLimits.max, fractionalDigits: vm.fractionalDigits} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate :
                  {max: vm.limits.max_30day_losses} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.maximum-number-of-open-positions' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="maximum_number_of_open_positions"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateIntegerNumber"
                     ng-model="vm.data.max_open_bets"
                     ng-max="vm.limits.max_open_bets"
                     ng-min="1"
                     ng-required="vm.limits.max_open_bets ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionOpenPositions.max"/>
              <ng-messages for="self_exclusion_form.maximum_number_of_open_positions.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max:
                  vm.validation.length.selfExclusionOpenPositions.max} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.max_open_bets} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.session-duration-limit-in-minutes' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="session_duration_limit"
                     type="tel"
                     bg-big-number
                     ng-pattern="vm.validation.validateIntegerNumber"
                     ng-model="vm.data.session_duration_limit"
                     ng-max="vm.limits.session_duration_limit || 60480"
                     ng-min="1" ,
                     ng-required="vm.limits.session_duration_limit ? true : false"
                     step="1"
                     ng-maxlength="vm.validation.length.selfExclusionSessionDuration.max"/>
              <div class="hint"> {{ 'self-exclusion.session-duration-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.session_duration_limit.$error"
                           role="alert"
                           class="error">
                <ng-message when="pattern, number, maxlength">
                  {{ 'self-exclusion.please-enter-an-integer-value' | translate : {max:
                  vm.validation.length.selfExclusionSessionDuration.max} }}
                </ng-message>
                <ng-message when="min, max, required">
                  {{ 'self-exclusion.valid-range-hint' | translate : {max: vm.limits.session_duration_limit || 60480} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.time-out-until' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <label class="item item-input">
                <input name="time_out_until"
                       type="datetime-local"
                       ng-model="vm.data.timeout_until"
                       min="{{ vm.minDate }}T00:00:00"
                       max="{{ vm.nextSixWeeks }}T00:00:00"
                       ng-min="vm.minDateTime"
                       ng-max="vm.nextSixWeeks + 'T00:00:00'"/>
              </label>
              <div class="hint"> {{ 'self-exclusion.time-out-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.time_out_until.$error" role="alert" class="error">
                <ng-message when="min">
                  {{ 'self-exclusion.date-is-not-valid' | translate }}
                </ng-message>
                <ng-message when="max">
                  {{ 'self-exclusion.date-can-not-be-greater-than' | translate:{max: vm.nextSixWeeks} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="row">
            <div class="col input-title">
              {{ 'self-exclusion.exclude-me-from-the-website-until' | translate }}
            </div>
          </div>
          <div class="row">
            <div class="col item-input">
              <input name="exclude_me_until"
                     type="date"
                     ng-model="vm.data.exclude_until"
                     maxlength="8"
                     min="{{ vm.nextSixMonths }}"/>
              <div class="hint"> {{ 'self-exclusion.exclude-me-hint' | translate }}</div>
              <ng-messages for="self_exclusion_form.exclude_me_until.$error" role="alert" class="error">
                <ng-message when="min, max">
                  {{ 'self-exclusion.date-can-not-less-than' | translate : {max: vm.nextSixMonths} }}
                </ng-message>
              </ng-messages>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col center">
          <button class="button"
                  type="submit"
                  ng-disabled="!self_exclusion_form.$valid || vm.disableUpdateButton">
            {{ 'self-exclusion.update-settings' | translate }}
          </button>
        </div>
      </div>
    </form>
  </ion-content>
</ion-view>

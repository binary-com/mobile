<ion-view class="change-password">
  <ion-content has-bouncing="false" class="general-content">
    <div class="row">
      <div class="col">
        <h1 class="page-title">
          <span>
            {{'change-password.change_password' | translate}}
          </span>
        </h1>
      </div>
    </div>
	  <form class="card" name="changePasswordForm" ng-if="!vm.hideInput" novalidate>
      <div class="row">
        <div class="col">
          <div class="list">
            <label class="item item-input item-floating-label">
              <span class="input-label">
                {{ 'change-password.current_password' | translate }}
              </span>
              <input placeholder="{{ 'change-password.current_password' | translate }}" type="password" name="current-password" ng-model="vm.currentPassword" ng-required="true" />
            </label>
            <ng-messages class="help-block error" for="changePasswordForm.current-password.$error" role="alert" ng-if="changePasswordForm.current-password.$dirty" ng-hide="vm.oldPasswordHasError">
						  <ng-message when="required">
							  {{'change-password.required' | translate}}
							</ng-message>
						</ng-messages>
						<div class="help-block error" ng-if='vm.oldPasswordHasError'>
						  {{'change-password.oldPasswordError' | translate}}
						</div>

            <label class="item item-input item-floating-label">
              <span class="input-label">
                {{ 'change-password.new_password' | translate }}
              </span>
              <input placeholder="{{ 'change-password.new_password' | translate }}" type="password" name="newpassword" ng-model="vm.newPassword" ng-change="vm.checkPassword()" ng-minlength="6" ng-maxlength="25" ng-pattern="/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]+/" ng-required="true" />
            </label>
            <div class="help-block">
							{{'change-password.password_hint' | translate}}
						</div>
            <ng-messages class="help-block error" for="changePasswordForm.newpassword.$error" role="alert" ng-if="changePasswordForm.newpassword.$dirty" ng-hide="vm.newPasswordHasError">
							<ng-message when="required">
							  {{'change-password.required' | translate}}
							</ng-message>
							<ng-message when="minlength, maxlength">
								{{'change-password.length-error-6-25' | translate}}
							</ng-message>
							<ng-message when="pattern">
								{{'change-password.password_pattern_error' | translate}}
							</ng-message>
						</ng-messages>
						<div class="help-block error" ng-if='vm.newPasswordHasError'>
							{{ vm.newPasswordError }}
						</div>

            <label class="item item-input item-floating-label">
              <span class="input-label">
                {{ 'change-password.verify_new_password' | translate }}
              </span>
              <input placeholder="{{ 'change-password.verify_new_password' | translate }}" type="password" name="repeat-new-password" ng-model="vm.repeatNewPassword" ng-change="vm.checkPassword()" ng-required="true" />
            </label>
            <ng-messages class="help-block error" for="changePasswordForm.repeat-new-password.$error" role="alert" ng-if="changePasswordForm.repeat-new-password.$dirty">
							<ng-message when="required">
								{{'change-password.required' | translate}}
							</ng-message>
						</ng-messages>
						<div class="help-block error" ng-if="!vm.passwordEqual && vm.repeatNewPassword != null">
							{{'change-password.password_not_match' | translate}}
						</div>
          </div>
        </div>
      </div>
 		</form>
    <div class="row">
      <div class="col">
        <button class="button button-block" type="button" name="button" ng-click="vm.changePass()" ng-disabled="!vm.passwordEqual || changePasswordForm.$invalid || vm.passwordUpdating">
          {{'change-password.change_password' | translate}}
        </button>
      </div>
    </div>
    <div class="row" ng-if="vm.hideInput">
      <div class="col">
        <p>
          {{'change-password.password_changed_text' | translate}}
        </p>
      </div>
    </div>
  </ion-content>
</ion-view>

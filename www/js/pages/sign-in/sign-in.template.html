<ion-view class="sign-in">
    <ion-content class="options-content" has-bouncing="false">
        <ion-header-bar align-title="center" class="bar bar-header bar-positive">
            <button class="button  icon-left ion-chevron-left button-clear" ng-click="vm.changeSigninView(true)" ng-show="vm.showTokenForm || vm.showSignin || vm.showSignup || vm.showvirtualws"></button>
            <h1 class="title"></h1>
        </ion-header-bar>
        <div class="row center">
            <div class="col col-75 branding">
                <img src="img/logo.svg" class="logo" alt="Binary Logo">
                <img src="img/binary-logo-blue.svg" class="slogan" alt="Binary.com">
            </div>
        </div>
        <form ng-submit="vm.signIn()" role="form" name="signin" ng-show="vm.showTokenForm">
            <div class="list">
                <ion-spinner ng-show="vm.showSpinner"></ion-spinner>
                <label class="item-input" ng-class="{'error': vm.tokenError}">
                    <i class="icon ion-android-lock placeholder-icon icon-small"></i>
                    <input type="text" placeholder="{{'signin.paste_token' | translate }}" ng-model="vm.token" tabindex="1" ngRequired>
                </label>
            </div>
            <div class="row center">
                <div class="col col-75">
                    <button class="button button-block btn-signin" type="submit">
                        {{'signin.add_account' | translate }}
                    </button>
                </div>
            </div>
        </form>

        <form name="emailForm" id="emailform" ng-show="vm.showSignup && !vm.showvirtualws" ng-submit="vm.verifyUserMail()">
            <div class="list">
                <ion-spinner ng-show="vm.showSpinner"></ion-spinner>
                <label class="item-input">
                    <i class="icon ion-android-lock placeholder-icon icon-small"></i>
                    <input autocomplete="off" type="text" placeholder="{{'newvirtualaccount.email' | translate }}" ng-model="vm.data.mail" tabindex="1" ngRequired />
                    <div class="help-block" ng-if="emailError">
        							{{'newvirtualaccount.email-error' | translate}}
        						</div>
                </label>
            </div>
            <div class="row center">
                <div class="col col-75">
                    <button class="button button-block btn-signin" type="submit">
                        {{'newvirtualaccount.continue' | translate}}
                    </button>
                </div>
            </div>
        </form>

        <form name="virtualws" id="virtualws" ng-show="vm.showvirtualws && !vm.showSignin && !vm.showTokenForm" ng-submit="vm.createVirtualAccount()">

            <div class="list">
                <label class="item-input">
                    <div class="help-block">
                        <div>{{'newvirtualaccount.code_hint' | translate}}</div>
                    </div>
                </label>

                <label class="item-input">
                    <i class="icon ion-android-lock placeholder-icon icon-small"></i>
                    <input name="verificationCode" ng-model="vm.data.verificationCode" type="text" value="" placeholder="{{'newvirtualaccount.verification-code' | translate }} {{'newvirtualaccount.isrequired' | translate}}" ng-pattern="/^\w{15,128}$/" required/>
                </label>

                <label class="item-input">
                    <div class="help-block" ng-messages="virtualws.verificationCode.$error" role="alert" ng-if='virtualws.verificationCode.$dirty'>
                        <div ng-message="pattern">{{'newvirtualaccount.token-invalid' | translate}}</div>
                    </div>
                </label>

            </div>

            <div class="list">

                <label class="item-input">
                    <div class="help-block">
                        <div>{{'newvirtualaccount.password_hint' | translate}}</div>
                    </div>
                </label>

                <label class="item-input">
                    <i class="icon ion-android-lock placeholder-icon icon-small"></i>
                    <input name="password" id="password" ng-model="vm.data.clientPassword" type="{{vm.data.inputType}}" placeholder="{{'newvirtualaccount.password' | translate }}" ng-pattern="/^[ -~]{6,25}$/" ng-pattern="/^[ -~]{6,25}$/" required/>
                </label>

                <label class="item-input">
                    <div class="help-block" ng-messages="virtualws.password.$error" role="alert" ng-if='virtualws.password.$dirty'>
                        <div ng-message="pattern">{{'newvirtualaccount.error_format' | translate}}</div>
                    </div>
                </label>

                <div class="help-block show-hide-password">
                    <input type="checkbox" id="show-hide" name="show-hide" ng-model="vm.passwordCheckbox" ng-click="vm.hideShowPassword()"/>
                    <label for="checkbox" ng-if="vm.passwordCheckbox">{{'newvirtualaccount.hide_pass' | translate }}</label>
                    <label for="checkbox" ng-if="!vm.passwordCheckbox">{{'newvirtualaccount.show_pass' | translate }}</label>
                </div>
            </div>

            <div class="list">
                <label class="item-input">
                    <select ng-model="vm.data.residence" ng-options="residence.value as residence.text disable when residence.disabled for residence in vm.data.residenceList track by residence.value" required>
                        <option value="">{{'newvirtualaccount.select' | translate}}</option>
                    </select>
                </label>
            </div>

            <div class="row center">
                <div class="col col-75">
                    <button class="button button-block btn-signin" type="submit" ng-disabled="virtualws.$invalid">
                        {{'newvirtualaccount.signup' | translate}}
                    </button>
                </div>
            </div>

        </form>

        <div class="row responsive-sm" ng-show="vm.showTokenForm">
            <div class="col center">
                <a href="#" class="help" ui-sref="help">
                    {{'signin.get_token' | translate }}
                </a>
            </div>
        </div>

        <oauth ng-show="!vm.showTokenForm && vm.showSignin && !vm.showSignup"></oauth>

        <div class="row center" ng-show="!vm.showTokenForm && vm.showSignin && !vm.showSignup">
            <div class="col col-75">
                <a href="" class="token-link" ng-click="vm.changeSigninViewtoToken()">{{ 'signin.use_token' | translate }}</a>
            </div>
        </div>

        <!-- signup -->
        <div class="row center" ng-show="!vm.showTokenForm && !vm.showSignup && vm.showSignin">
            <div class="col col-75">
                {{'newvirtualaccount.signup-question' | translate}}
                <a href ng-click="vm.changeSigninViewtoSignup()">
                    {{'newvirtualaccount.signup' | translate}}
                </a>
            </div>
        </div>
        <!-- end signup -->

        <div class="list">
            <language ng-show="!vm.showSignin && !vm.showTokenForm  && !vm.showSignup && !vm.showvirtualws"></language>
        </div>

        <div class="row center" ng-show="!vm.showSignin && !vm.showTokenForm && !vm.showSignup && !vm.showvirtualws">
            <div class="col col-75">
                <button class="button button-block button-possitive btn-signin" type="button" ng-click="vm.showSigninView()">
                    {{ 'signin.next' | translate }}
                </button>
            </div>
        </div>

        <div class="row responsive-sm">
            <div class="col center">
                <app-version class="appVersion"></app-version>
            </div>
        </div>
    </ion-content>
</ion-view>

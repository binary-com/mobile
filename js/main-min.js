"use strict";!function(){angular.module("binary.pages.account-categorisation",["binary.pages.account-categorisation.controllers"]),angular.module("binary.pages.account-categorisation.controllers",[])}(),function(){angular.module("binary.pages.accounts-management",["binary.pages.accounts-management.controllers"]),angular.module("binary.pages.accounts-management.controllers",[])}(),function(){angular.module("binary.pages.asset-index",["binary.pages.asset-index.controllers"]),angular.module("binary.pages.asset-index.controllers",[])}(),function(){angular.module("binary.pages.authentication",["binary.pages.authentication.controllers"]),angular.module("binary.pages.authentication.controllers",[])}(),function(){angular.module("binary.pages.change-password",["binary.pages.change-password.controllers"]),angular.module("binary.pages.change-password.controllers",[])}(),function(){angular.module("binary.pages.contact",["binary.pages.contact.controllers"]),angular.module("binary.pages.contact.controllers",[])}(),function(){angular.module("binary.pages.financial-assessment",["binary.pages.financial-assessment.controllers"]),angular.module("binary.pages.financial-assessment.controllers",[])}(),function(){angular.module("binary.pages.home",["binary.pages.home.controllers"]),angular.module("binary.pages.home.controllers",[])}(),function(){angular.module("binary.pages.limits",["binary.pages.limits.controllers"]),angular.module("binary.pages.limits.controllers",[])}(),function(){angular.module("binary.pages.maltainvest-account-opening",[]),angular.module("binary.pages.maltainvest-account-opening.controllers",[])}(),function(){angular.module("binary.pages.meta-trader",["binary.pages.meta-trader.controllers","binary.pages.meta-trader.directives"]),angular.module("binary.pages.meta-trader.controllers",[]),angular.module("binary.pages.meta-trader.directives",[])}(),function(){angular.module("binary.pages.notifications",["binary.pages.notifications.controllers"]),angular.module("binary.pages.notifications.controllers",[])}(),function(){angular.module("binary.pages.profile",["binary.pages.profile.controllers"]),angular.module("binary.pages.profile.controllers",[])}(),function(){angular.module("binary.pages.profit-table",["binary.pages.profit-table.controllers","binary.pages.profit-table.filters"]),angular.module("binary.pages.profit-table.controllers",[]),angular.module("binary.pages.profit-table.filters",[])}(),function(){angular.module("binary.pages.real-account-opening",[]),angular.module("binary.pages.real-account-opening.controllers",[])}(),function(){angular.module("binary.pages.redirect",["binary.pages.redirect.controllers"]),angular.module("binary.pages.redirect.controllers",[])}(),function(){angular.module("binary.pages.resources",["binary.pages.resources.controllers"]),angular.module("binary.pages.resources.controllers",[])}(),function(){angular.module("binary.pages.self-exclusion",["binary.pages.self-exclusion.controllers","binary.pages.self-exclusion.directives"]),angular.module("binary.pages.self-exclusion.controllers",[]),angular.module("binary.pages.self-exclusion.directives",[])}(),function(){angular.module("binary.pages.settings",["binary.pages.settings.controllers"]),angular.module("binary.pages.settings.controllers",[])}(),function(){angular.module("binary.pages.set-currency",["binary.pages.set-currency.controllers"]),angular.module("binary.pages.set-currency.controllers",[])}(),function(){angular.module("binary.pages.signin",["binary.pages.signin.components","binary.pages.signin.controllers"]),angular.module("binary.pages.signin.controllers",[]),angular.module("binary.pages.signin.components",["binary.pages.signin.components.oauth"])}(),function(){angular.module("binary.pages.statement",["binary.pages.statement.controllers","binary.pages.statement.filters"]),angular.module("binary.pages.statement.controllers",[]),angular.module("binary.pages.statement.filters",[])}(),function(){angular.module("binary.pages.terms-and-conditions",["binary.pages.terms-and-conditions.controllers"]),angular.module("binary.pages.terms-and-conditions.controllers",[])}(),function(){angular.module("binary.pages.trade",["binary.pages.trade.components","binary.pages.trade.controllers","binary.pages.trade.services"]),angular.module("binary.pages.trade.components",["binary.pages.trade.components.options","binary.pages.trade.components.chart","binary.pages.trade.components.payout","binary.pages.trade.components.purchase","binary.pages.trade.components.longcode"]),angular.module("binary.pages.trade.controllers",[]),angular.module("binary.pages.trade.services",[])}(),function(){angular.module("binary.pages.trading-times",["binary.pages.trading-times.controllers"]),angular.module("binary.pages.trading-times.controllers",[])}(),function(){angular.module("binary.pages.update",["binary.pages.update.controllers"]),angular.module("binary.pages.update.controllers",[])}(),function(){angular.module("binary.pages.transaction-detail",["binary.pages.transaction-detail.controllers"]),angular.module("binary.pages.transaction-detail.controllers",[])}(),function(){angular.module("binary.share.components.accounts",["binary.share.components.accounts.controllers","binary.share.components.accounts.directives"]),angular.module("binary.share.components.accounts.controllers",[]),angular.module("binary.share.components.accounts.directives",[])}(),function(){angular.module("binary.share.components.app-version",["binary.share.components.app-version.controllers","binary.share.components.app-version.directives"]),angular.module("binary.share.components.app-version.controllers",[]),angular.module("binary.share.components.app-version.directives",[])}(),function(){angular.module("binary.share.components.balance",["binary.share.components.balance.directives","binary.share.components.balance.controllers"]),angular.module("binary.share.components.balance.controllers",[]),angular.module("binary.share.components.balance.directives",[])}(),function(){angular.module("binary.share.components.big-number",["binary.share.components.big-number.directives"]),angular.module("binary.share.components.big-number.directives",[])}(),function(){angular.module("binary.share.components.check-user-status",["binary.share.components.check-user-status.controllers","binary.share.components.check-user-status.directives"]),angular.module("binary.share.components.check-user-status.controllers",[]),angular.module("binary.share.components.check-user-status.directives",[])}(),function(){angular.module("binary.share.components.connectivity",["binary.share.components.connectivity.controllers","binary.share.components.connectivity.directives"]),angular.module("binary.share.components.connectivity.controllers",[]),angular.module("binary.share.components.connectivity.directives",[])}(),function(){angular.module("binary.share.components.ios-pwa-prompt",["binary.share.components.ios-pwa-prompt.controllers","binary.share.components.ios-pwa-prompt.directives"]),angular.module("binary.share.components.ios-pwa-prompt.controllers",[]),angular.module("binary.share.components.ios-pwa-prompt.directives",[])}(),function(){angular.module("binary.share.components.language",["binary.share.components.language.directives","binary.share.components.language.controllers"]),angular.module("binary.share.components.language.directives",[]),angular.module("binary.share.components.language.controllers",[])}(),function(){angular.module("binary.share.components.logout",["binary.share.components.logout.controllers","binary.share.components.logout.directives"]),angular.module("binary.share.components.logout.controllers",[]),angular.module("binary.share.components.logout.directives",[])}(),function(){angular.module("binary.share.components.long-press",["binary.share.components.long-press.directives"]),angular.module("binary.share.components.long-press.directives",[])}(),function(){angular.module("binary.share.components.notification-icon",["binary.share.components.notification-icon.controllers","binary.share.components.notification-icon.directives"]),angular.module("binary.share.components.notification-icon.controllers",[]),angular.module("binary.share.components.notification-icon.directives",[])}(),function(){angular.module("binary.share.components.number",["binary.share.components.number.directives"]),angular.module("binary.share.components.number.directives",[])}(),function(){angular.module("binary.share.components.reality-check",["binary.share.components.reality-check.controllers","binary.share.components.reality-check.directives"]),angular.module("binary.share.components.reality-check.controllers",[]),angular.module("binary.share.components.reality-check.directives",[])}(),function(){angular.module("binary.share.components.regex-validate",["binary.share.components.regex-validate.directives"]),angular.module("binary.share.components.regex-validate.directives",[])}(),function(){angular.module("binary.share.components.ping",["binary.share.components.ping.controllers","binary.share.components.ping.directives"]),angular.module("binary.share.components.ping.controllers",[]),angular.module("binary.share.components.ping.directives",[])}(),function(){angular.module("binary.share.components.service-outage",["binary.share.components.service-outage.controllers","binary.share.components.service-outage.directives"]),angular.module("binary.share.components.service-outage.controllers",[]),angular.module("binary.share.components.service-outage.directives",[])}(),function(){angular.module("binary.share.components.spinner-logo",["binary.share.components.spinner-logo.directives","binary.share.components.spinner-logo.controllers"]),angular.module("binary.share.components.spinner-logo.directives",[]),angular.module("binary.share.components.spinner-logo.controllers",[])}(),function(){angular.module("binary.share.components.updater",["binary.share.components.updater.controllers","binary.share.components.updater.directives"]),angular.module("binary.share.components.updater.controllers",[]),angular.module("binary.share.components.updater.directives",[])}(),function(){angular.module("binary.pages.signin.components.oauth",[])}(),function(){angular.module("binary.pages.trade.components.longcode",["binary.pages.trade.components.longcode.controllers","binary.pages.trade.components.longcode.directives"]),angular.module("binary.pages.trade.components.longcode.controllers",[]),angular.module("binary.pages.trade.components.longcode.directives",[])}(),function(){angular.module("binary.pages.trade.components.chart",["binary.pages.trade.components.chart.controllers","binary.pages.trade.components.chart.directives","binary.pages.trade.components.chart.services"]),angular.module("binary.pages.trade.components.chart.controllers",[]),angular.module("binary.pages.trade.components.chart.directives",[]),angular.module("binary.pages.trade.components.chart.services",[])}(),function(){angular.module("binary.pages.trade.components.payout",["binary.pages.trade.components.payout.controllers","binary.pages.trade.components.payout.directives"]),angular.module("binary.pages.trade.components.payout.controllers",[]),angular.module("binary.pages.trade.components.payout.directives",[])}(),function(){angular.module("binary.pages.trade.components.options",["binary.pages.trade.components.options.controllers","binary.pages.trade.components.options.directives","binary.pages.trade.components.options.services"]),angular.module("binary.pages.trade.components.options.controllers",[]),angular.module("binary.pages.trade.components.options.directives",[]),angular.module("binary.pages.trade.components.options.services",[])}(),function(){angular.module("binary.pages.trade.components.purchase",["binary.pages.trade.components.purchase.controllers","binary.pages.trade.components.purchase.directives"]),angular.module("binary.pages.trade.components.purchase.controllers",[]),angular.module("binary.pages.trade.components.purchase.directives",[])}(),function(){"use restrict";angular.module("binary",["ionic","ionic.native","pascalprecht.translate","hmTouchEvents","ngIOS9UIWebViewPatch","binary.share.components","binary.share.services","binary.pages","ngMessages","ngCordova"]),angular.module("binary.share.components",["binary.share.components.language","binary.share.components.ping","binary.share.components.accounts","binary.share.components.spinner-logo","binary.share.components.balance","binary.share.components.long-press","binary.share.components.reality-check","binary.share.components.logout","binary.share.components.connectivity","binary.share.components.regex-validate","binary.share.components.number","binary.share.components.app-version","binary.share.components.updater","binary.share.components.check-user-status","binary.share.components.service-outage","binary.share.components.notification-icon","binary.share.components.big-number","binary.share.components.ios-pwa-prompt"]),angular.module("binary.share.services",[]),angular.module("binary.pages",["binary.pages.home","binary.pages.signin","binary.pages.trade","binary.pages.real-account-opening","binary.pages.maltainvest-account-opening","binary.pages.profit-table","binary.pages.statement","binary.pages.transaction-detail","binary.pages.settings","binary.pages.self-exclusion","binary.pages.profile","binary.pages.terms-and-conditions","binary.pages.update","binary.pages.change-password","binary.pages.financial-assessment","binary.pages.limits","binary.pages.trading-times","binary.pages.resources","binary.pages.asset-index","binary.pages.meta-trader","binary.pages.authentication","binary.pages.contact","binary.pages.notifications","binary.pages.set-currency","binary.pages.accounts-management","binary.pages.redirect","binary.pages.account-categorisation"]),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}(),function(){angular.module("binary").run(["$rootScope","$ionicPlatform","$state","alertService","appStateService","appVersionService",function(e,t,n,a,o,r){t.ready(function(){window.CacheClear&&cordova.getAppVersion().then(function(e){if(e!==localStorage.version){var t=localStorage.language,n=localStorage.accounts;window.CacheClear(function(){localStorage.version=e,localStorage.language=t||"en",localStorage.accounts=n||null,window.location.href="file:///android_asset/www/index.html"},function(e){console.log("Cannot clear cache!")})}}),ionic.Platform.isIOS()&&setTimeout(function(){navigator.splashscreen.hide()},2e3),window.cordova&&window.cordova.plugins.backgroundMode&&(cordova.plugins.backgroundMode.setDefaults({title:"Binary.com TickTrade",text:"",ticker:"TickTrade is running in background",color:"#2A3052",icon:"notification"}),cordova.plugins.backgroundMode.enable()),"undefined"!=typeof window.ga?window.ga.startTrackerWithId("UA-40877026-7"):console.log("Google Analytics is unavailable"),window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!0)),window.cordova&&(window.open=cordova.InAppBrowser.open),t.registerBackButtonAction(function(){o.isPopupOpen||o.modalIsOpen||(["signin","home","update"].indexOf(n.current.name)>-1?navigator.app.exitApp():"trade"===n.current.name&&o.purchaseMode||("trade"!==n.current.name||o.purchaseMode||o.tradeMode?["trade","profittable","statement"].indexOf(n.current.name)>-1?a.confirmExit(function(e){1===e&&(sessionStorage.removeItem("start"),sessionStorage.removeItem("_interval"),navigator.app.exitApp())}):n.current.detailed?n.go("trade"):n.goBack():(o.tradeMode=!0,e.$broadcast("appState:tradeMode"),e.$$phase||e.$apply())))},500)})}])}(),angular.module("binary").controller("BodyController",["$scope","languageService",function(e,t){var n=this;n.getLanguage=function(){return t.read()}}]),angular.module("binary").controller("MainLayoutController",["$scope","$state","$timeout","config","websocketService","appStateService","accountService","clientService",function(e,t,n,a,o,r,i,s){var c=this;c.hasMTAccess=!1,c.hasNotSelectedCountry=!1;var l={};c.serverUrl=o.getServerURL,c.defaultServerUrl=a.serverUrl;var u=function(e,t){return s.isLandingCompanyOf(e,t)},d=function y(){if(c.upgrade={},c.accounts=i.getAll(),l=i.getDefault(),_.isEmpty(l))n(y,1e3);else{var t=l.landing_company_name;if(c.showNetworkStatus=u("iom",t)||u("malta",t)||u("maltainvest",t),l.country){var a=l.country;if(e.$applyAsync(function(){c.hasNotSelectedCountry=!1}),"jp"!==a){var r=1;o.sendRequestFor.landingCompanySend(a,r)}}else e.$applyAsync(function(){c.hasNotSelectedCountry=!0})}};d();var p=function(e,t){return(e||{}).shortcode===t},m=function(e){return p(e.financial_company,"vanuatu")},g=function(e){return s.getExistingCurrencies(e)},f=function(e){return s.dividedCurrencies(e)},h=function(e){var t=r.upgradeableLandingCompanies,n=l.landing_company_name,a=!(!t||!t.length),o=!1,i=!1,s=void 0,u=void 0,d=void 0,p=void 0;a&&(o=!!_.find(t,function(e){return e===n}));var m=function(e){return!!_.find(e,function(e){return e!==n&&t.indexOf(e)>-1})};if(m(["costarica","svg","malta","iom"])&&!o)s="real",u="real-account-opening",d=e.gaming_company?e.gaming_company.legal_allowed_currencies:e.financial_company.legal_allowed_currencies,p=e.gaming_company?e.gaming_company.legal_allowed_markets:e.financial_company.legal_allowed_markets;else if(m(["maltainvest"]))s="financial",u="maltainvest-account-opening",d=e.financial_company.legal_allowed_currencies,p=e.financial_company.legal_allowed_markets;else if(o){s="real",u="",p=e.financial_company.legal_allowed_markets;var h=e.financial_company.legal_allowed_currencies,y=g(c.accounts);if(y.length){var v=f(y),b=!!v.fiatCurrencies.length;if(b){var S=f(h).cryptoCurrencies,C=v.cryptoCurrencies;d=_.difference(S,C),d.length&&(a=!0,i=!0)}else a=!0,i=!0,d=_.difference(h,y)}else a=!0,i=!0,d=h}else a=!1;return{typeOfNextAccount:s,upgradeLink:u,canUpgrade:a,currencyOptions:d,allowedMarkets:p,multi:i}};e.$on("authorize",function(e,t){!l||l.id===t.loginid&&l.country===t.country||d()}),e.$on("currency:changed",function(e){d()}),e.$on("landing_company",function(e,t,n){var a=t;c.hasMTAccess=m(a),1===n&&(c.upgrade=h(a),c.upgrade.canUpgrade?r.upgrade=c.upgrade:r.upgrade={},r.checkingUpgradeDone=!0)}),c.goToRegulatory=function(){var e="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/regulation.html";window.open(e,"_blank")},c.goToNetworkStatus=function(){window.open("https://binarycom.statuspage.io/","_blank")},c.goToResponsbileTrading=function(){var e="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/responsible-trading.html";window.open(e,"_blank")}}]),angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(e){e.decorator("$browser",["$delegate","$window",function(e,t){function n(e){return/(iPhone|iPad|iPod).* OS 9_\d/.test(e)&&!/Version\/9\./.test(e)}function a(e){function t(){n=null}var n=null,a=e.url;return e.url=function(){return arguments.length?(n=arguments[0],a.apply(e,arguments)):n||a.apply(e,arguments)},window.addEventListener("popstate",t,!1),window.addEventListener("hashchange",t,!1),e}return n(t.navigator.userAgent)?a(e):e}])}]);var isBinaryMe="ticktrade.binary.me"===window.location.host;angular.module("binary").constant("config",{app_id:isBinaryMe?"15488":"10",serverUrl:"frontend.binaryws.com",serverCertFP:"",qaMachinesCertFP:"",wsUrl:"wss://frontend.binaryws.com/websockets/v3",oauthUrl:"https://oauth.binary."+(isBinaryMe?"me":"com")+"/oauth2/authorize",tradeCategories:[{name:"up_down",markets:["forex","synthetic_index","random"],value:"UP/DOWN"},{name:"digit_matches_differs",value:"MATCH/DIFF",markets:["synthetic_index","random"],digits:!0},{name:"digit_even_odd",markets:["synthetic_index","random"],value:"EVEN/ODD"},{name:"digit_over_under",value:"OVER/UNDER",markets:["synthetic_index","random"],digits:!0},{name:"asians",value:"Asians",markets:["synthetic_index","random"]},{name:"high_low_ticks",value:"HIGH/LOW TICKS",markets:["synthetic_index"]}],tradeTypes:[{name:"Up",value:"CALL",digits:!1,selected_tick:!1,category:"UP/DOWN"},{name:"Down",value:"PUT",digits:!1,selected_tick:!1,category:"UP/DOWN"},{name:"Asians Up",value:"ASIANU",digits:!1,selected_tick:!1,category:"Asians"},{name:"Asians Down",value:"ASIAND",digits:!1,selected_tick:!1,category:"Asians"},{name:"Digit Match",value:"DIGITMATCH",digits:!0,selected_tick:!1,category:"MATCH/DIFF"},{name:"Digit Differs",value:"DIGITDIFF",digits:!0,selected_tick:!1,category:"MATCH/DIFF"},{name:"Digit Even",value:"DIGITEVEN",digits:!0,selected_tick:!1,category:"EVEN/ODD"},{name:"Digit Odd",value:"DIGITODD",digits:!0,selected_tick:!1,category:"EVEN/ODD"},{name:"Digit Over",value:"DIGITOVER",digits:!0,selected_tick:!1,category:"OVER/UNDER"},{name:"Digit Under",value:"DIGITUNDER",digits:!0,selected_tick:!1,category:"OVER/UNDER"},{name:"TICK HIGH",value:"TICKHIGH",digits:!1,selected_tick:!0,category:"HIGH/LOW TICKS"},{name:"TICK LOW",value:"TICKLOW",digits:!1,selected_tick:!0,category:"HIGH/LOW TICKS"}],supportedTradeTypes:["Digits Digit Matches/Digit Differs","Digits Digit Odd/Digit Even","Digits Digit Over/Digit Under","Higher/Lower","Rise/Fall","Asians","Up/Down","High/Low Ticks"],language:"en",assetIndexes:{symbol:0,displayName:1,contracts:2,contractName:0,contractDisplayName:1,contractFrom:2,contractTo:3},cryptoConfig:{BTC:{name:"bitcoin"},BCH:{name:"bitcoin_cash"},ETH:{name:"ether"},ETC:{name:"ether_classic"},LTC:{name:"litecoin"},DAI:{name:"dai"}},appSupportedLanguages:["en","id","ru","zh_tw","zh_cn","de","fr","pl","it"]}),function(){function e(e){e.decorator("currencyFilter",["accountService",function(e){function t(e,t,n){var a={style:"currency",currency:t||"USD"};return/btc|xbt|ltc|bch|eth/i.test(t)&&(a.minimumFractionDigits=8,a.maximumFractionDigits=8),Intl.NumberFormat(e,a).format(n)}var n=function(){var n=(localStorage.language||"en").replace("_","-").slice(0,2),a=arguments[1]||(e.getDefault()?e.getDefault().currency:null);return isNaN(arguments[0])?"--":_.isEmpty(a)?"":t(n,a,arguments[0])};return n}])}angular.module("binary").config(e),e.$inject=["$provide"]}(),angular.module("binary").run(["$ionicPlatform","$cordovaDeeplinks","$state","$timeout",function(e,t,n,a){e.ready(function(){t.route({"/redirect":{},"/redirect.html":{}}).subscribe(function(e){if(e.$args&&!_.isEmpty(e.$args.action))if("signup"!==e.$args.action||_.isEmpty(e.$args.code)){if("oauth"===e.$args.action){var t=/action=oauth&(.*)/.exec(e.$link.queryString);if(_.isEmpty(t))return;a(function(){n.go("signin",{accountTokens:t[1]})},100)}}else a(function(){n.go("signin",{verificationCode:e.$args.code})},100);else"/redirect.html"===e.$link.path&&e.$link.queryString&&a(function(){n.go("signin",{accountTokens:e.$link.queryString})},100)},function(e){})})}]),function(){function e(e){e.decorator("$state",["$delegate","$rootScope",function(e,t){var n=e;return n.previous=void 0,n.goBack=function(){n.previous&&n.go(n.previous.name)},t.$on("$stateChangeSuccess",function(e,t,a,o,r){n.previous={name:o,params:r}}),n}])}e.$inject=["$provide"],angular.module("binary").config(e)}(),angular.module("binary").config(["$locationProvider","$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,t,n,a){a.views.swipeBackEnabled(!1),t.state("home",{url:"/",cache:!1,templateUrl:"js/pages/home/home.template.html",controller:"HomeController"}).state("layout",{cache:!1,templateUrl:"js/share/templates/layout/main-layout.template.html","abstract":!0}).state("trade",{parent:"layout",cache:!1,controller:"TradeController",controllerAs:"vm",templateUrl:"js/pages/trade/trade.template.html"}).state("signin",{params:{accountTokens:null,verificationCode:null},cache:!1,templateUrl:"js/pages/sign-in/sign-in.template.html",controller:"SigninController",controllerAs:"vm"}).state("profit-table",{parent:"layout",cache:!0,templateUrl:"js/pages/profit-table/profit-table.template.html",controller:"ProfitTableController",controllerAs:"vm",detailed:!0}).state("statement",{parent:"layout",cache:!0,templateUrl:"js/pages/statement/statement.template.html",controller:"StatementController",controllerAs:"vm",detailed:!0}).state("transaction-detail",{parent:"layout",cache:!1,templateUrl:"js/pages/transaction-detail/transaction-detail.template.html",controller:"TransactionDetailController",controllerAs:"vm",reloadOnSearch:!1}).state("real-account-opening",{parent:"layout",cache:!1,templateUrl:"js/pages/real-account-opening/real-account-opening.template.html",controller:"RealAccountOpeningController",controllerAs:"vm"}).state("maltainvest-account-opening",{parent:"layout",cache:!1,templateUrl:"js/pages/maltainvest-account-opening/maltainvest-account-opening.template.html",controller:"MaltainvestAccountOpeningController",controllerAs:"vm"}).state("language",{parent:"layout",cache:!1,templateUrl:"js/pages/language/language.template.html"}).state("settings",{parent:"layout",cache:!1,templateUrl:"js/pages/settings/settings.template.html",controller:"SettingsController",controllerAs:"vm",detailed:!0}).state("resources",{parent:"layout",cache:!1,templateUrl:"js/pages/resources/resources.template.html",controller:"ResourcesController",controllerAs:"vm",detailed:!0}).state("self-exclusion",{parent:"layout",cache:!1,templateUrl:"js/pages/self-exclusion/self-exclusion.template.html",controller:"SelfExclusionController",controllerAs:"vm"}).state("no-connection",{templateUrl:"js/share/components/connectivity/connectivity.template.html"}).state("profile",{parent:"layout",cache:!1,templateUrl:"js/pages/profile/profile.template.html",controller:"ProfileController",controllerAs:"vm"}).state("terms-and-conditions",{parent:"layout",cache:!1,templateUrl:"js/pages/terms-and-conditions/terms-and-conditions.template.html",controller:"TermsAndConditionsController",controllerAs:"vm"}).state("update",{url:"/update",cache:!1,templateUrl:"js/pages/update/update.template.html",controller:"UpdateController",controllerAs:"vm"}).state("change-password",{parent:"layout",cache:!1,templateUrl:"js/pages/change-password/change-password.template.html",controller:"ChangePasswordController",controllerAs:"vm"}).state("financial-assessment",{parent:"layout",cache:!1,templateUrl:"js/pages/financial-assessment/financial-assessment.template.html",controller:"FinancialAssessmentController",controllerAs:"vm"}).state("limits",{parent:"layout",cache:!1,templateUrl:"js/pages/limits/limits.template.html",controller:"LimitsController",controllerAs:"vm"}).state("trading-times",{parent:"layout",cache:!1,templateUrl:"js/pages/trading-times/trading-times.template.html",controller:"TradingTimesController",controllerAs:"vm"}).state("asset-index",{parent:"layout",cache:!1,templateUrl:"js/pages/asset-index/asset-index.template.html",controller:"AssetIndexController",controllerAs:"vm"}).state("meta-trader",{parent:"layout",cache:!1,templateUrl:"js/pages/meta-trader/meta-trader.template.html",controller:"MetaTraderController",controllerAs:"vm"}).state("mt5-web",{parent:"layout",params:{id:null},cache:!1,templateUrl:"js/pages/meta-trader/mt5-web.template.html",controller:"MT5WebController",controllerAs:"vm"}).state("outage",{params:{message:null},controller:"ServiceOutagePageController",controllerAs:"vm",templateUrl:"js/share/components/service-outage/service-outage.template.html"}).state("authentication",{parent:"layout",cache:!1,templateUrl:"js/pages/authentication/authentication.template.html",controller:"AuthenticationController",controllerAs:"vm",detailed:!0}).state("contact",{parent:"layout",cache:!0,templateUrl:"js/pages/contact/contact.template.html",controller:"ContactController",controllerAs:"vm"}).state("notifications",{parent:"layout",cache:!1,templateUrl:"js/pages/notifications/notifications.template.html",controller:"NotificationsController",controllerAs:"vm",detailed:!0}).state("set-currency",{parent:"layout",cache:!1,templateUrl:"js/pages/set-currency/set-currency.template.html",controller:"SetCurrencyController",controllerAs:"vm"}).state("accounts-management",{parent:"layout",cache:!1,templateUrl:"js/pages/accounts-management/accounts-management.template.html",controller:"AccountsManagementController",controllerAs:"vm"}).state("redirect",{url:"/redirect",cache:"false",templateUrl:"js/pages/redirect/redirect.template.html",controller:"RedirectController",controllerAs:"vm"}).state("account-categorisation",{parent:"layout",cache:"false",templateUrl:"js/pages/account-categorisation/account-categorisation.template.html",controller:"AccountCategorisationController",controllerAs:"vm"}),n.otherwise("/");var o=document.getElementsByTagName("base");o.length&&e.html5Mode(!0)}]),angular.module("binary").config(["$translateProvider",function(e){var t=localStorage.language||"en";e.fallbackLanguage("en"),e.preferredLanguage(t),e.useStaticFilesLoader({prefix:"i18n/",suffix:".json"})}]),angular.module("binary").constant("accountOptions",{salutation:[{text:"account-options.mr",value:"Mr"},{text:"account-options.mrs",value:"Mrs"},{text:"account-options.miss",value:"Miss"},{text:"account-options.ms",value:"Ms"}],account_opening_reason:[{text:"account-options.speculative",value:"Speculative"},{text:"account-options.income_earning",value:"Income Earning"},{text:"account-options.hedging",value:"Hedging"}],secret_question:[{text:"account-options.secret_question_1",value:"Mother's maiden name"},{text:"account-options.secret_question_2",value:"Name of your pet"},{text:"account-options.secret_question_3",value:"Name of first love"},{text:"account-options.secret_question_4",value:"Memorable town/city"},{text:"account-options.secret_question_5",value:"Memorable date"},{text:"account-options.secret_question_6",value:"Favourite dish"},{text:"account-options.secret_question_7",value:"Brand of first car"},{text:"account-options.secret_question_8",value:"Favourite artist"}]}),angular.module("binary").constant("financialInformationOptions",{experienceOptions:[{text:"financial-information-options.under_1_year",value:"0-1 year"},{text:"financial-information-options.1_2_years",value:"1-2 years"},{text:"financial-information-options.over_3_years",value:"Over 3 years"}],frequencyOptions:[{text:"financial-information-options.0_5_transactions",value:"0-5 transactions in the past 12 months"},{text:"financial-information-options.6_10_transactions",value:"6-10 transactions in the past 12 months"},{text:"financial-information-options.transactions_more",value:"40 transactions or more in the past 12 months"}],employment_industry:[{text:"financial-information-options.construction",value:"Construction"},{text:"financial-information-options.education",value:"Education"},{text:"financial-information-options.finance",value:"Finance"},{text:"financial-information-options.health",value:"Health"},{text:"financial-information-options.tourism",value:"Tourism"},{text:"financial-information-options.other",value:"Other"}],education_level:[{text:"financial-information-options.primary",value:"Primary"},{text:"financial-information-options.secondary",value:"Secondary"},{text:"financial-information-options.tertiary",value:"Tertiary"}],income_source:[{text:"financial-information-options.salaried",value:"Salaried Employee"},{text:"financial-information-options.self_employed",value:"Self-Employed"},{text:"financial-information-options.investment",value:"Investments & Dividends"},{text:"financial-information-options.pension",value:"Pension"},{text:"financial-information-options.other",value:"Other"}],employment_status:[{text:"financial-information-options.employed",value:"Employed"},{text:"financial-information-options.pensioner",value:"Pensioner"},{text:"financial-information-options.self_employed",value:"Self-Employed"},{text:"financial-information-options.student",value:"Student"},{text:"financial-information-options.unemployed",value:"Unemployed"}],occupation:[{text:"financial-information-options.chief_executives",value:"Chief Executives, Senior Officials and Legislators"},{text:"financial-information-options.managers",value:"Managers"},{text:"financial-information-options.professionals",
value:"Professionals"},{text:"financial-information-options.clerks",value:"Clerks"},{text:"financial-information-options.personal_care",value:"Personal Care, Sales and Service Workers"},{text:"financial-information-options.agricultural",value:"Agricultural, Forestry and Fishery Workers"},{text:"financial-information-options.craft",value:"Craft, Metal, Electrical and Electronics Workers"},{text:"financial-information-options.machine",value:"Plant and Machine Operators and Assemblers"},{text:"financial-information-options.helpers",value:"Cleaners and Helpers"},{text:"financial-information-options.mining",value:"Mining, Construction, Manufacturing and Transport Workers"},{text:"financial-information-options.armed_forces",value:"Armed Forces"},{text:"financial-information-options.government_officers",value:"Government Officers"},{text:"financial-information-options.others",value:"Others"}],source_of_wealth:[{text:"financial-information-options.accumulation_of_income_savings",value:"Accumulation of Income/Savings"},{text:"financial-information-options.cash_business",value:"Cash Business"},{text:"financial-information-options.company_ownership",value:"Company Ownership"},{text:"financial-information-options.divorce_settlement",value:"Divorce Settlement"},{text:"financial-information-options.inheritance",value:"Inheritance"},{text:"financial-information-options.investment_income",value:"Investment Income"},{text:"financial-information-options.sale_of_property",value:"Sale of Property"},{text:"financial-information-options.other",value:"Other"}],net_income:[{text:"financial-information-options.net_income_1",value:"Less than $25,000"},{text:"financial-information-options.net_income_2",value:"$25,000 - $50,000"},{text:"financial-information-options.net_income_3",value:"$50,001 - $100,000"},{text:"financial-information-options.net_income_4",value:"$100,001 - $500,000"},{text:"financial-information-options.net_income_5",value:"Over $500,000"}],estimated_worth:[{text:"financial-information-options.estimated_worth_1",value:"Less than $100,000"},{text:"financial-information-options.estimated_worth_2",value:"$100,000 - $250,000"},{text:"financial-information-options.estimated_worth_3",value:"$250,001 - $500,000"},{text:"financial-information-options.estimated_worth_4",value:"$500,001 - $1,000,000"},{text:"financial-information-options.estimated_worth_5",value:"Over $1,000,000"}],account_turnover:[{text:"financial-information-options.account_turnover_1",value:"Less than $25,000"},{text:"financial-information-options.account_turnover_2",value:"$25,000 - $50,000"},{text:"financial-information-options.account_turnover_3",value:"$50,001 - $100,000"},{text:"financial-information-options.account_turnover_4",value:"$100,001 - $500,000"},{text:"financial-information-options.account_turnover_5",value:"Over $500,000"}]}),function(){function e(e,t,n,a,o,r,i,s){var c=this,l="",u={request_professional_status:0,tax_identification_number:"",tax_residence:""},d=function(e,t){return _.indexOf(e,t)>-1},p=function(e,t){return i.isLandingCompanyOf(e,t)};e.$on("set-settings:error",function(e,n){"InputValidationFailed"===n.code?t.go("profile"):s.displayError(n.message)}),e.$on("set-settings",function(e,t){m()}),e.$on("get_settings",function(e,t){_.forEach(u,function(e,n){t[n]&&(u[n]=t[n])}),u.request_professional_status=1,o.sendRequestFor.setAccountSettings(u)}),e.$on("authorize",function(e,n){if(n&&n.loginid!==l){l=n.loginid;var a=p("maltainvest",n.landing_company_name);a?m():t.go("trade")}}),c.openProfessionalClientInformation=function(){s.showProfessioanlClientInformation(e)},c.updateClientType=function(){o.sendRequestFor.accountSetting()},c.showConfirmProfessionalClient=function(){c.client_type&&s.displayProfessionalClientConfirmation(a.instant("professional-client-confirmation.professional_clients"),"information-popup",e,"js/share/templates/professional-client/professional-client-confirmation.template.html",[{text:a.instant("professional-client-confirmation.decline"),onTap:function(){return c.client_type=0}},{text:a.instant("professional-client-confirmation.accept"),type:"button-positive",onTap:function(){return!0}}])},e.$on("get_account_status",function(t,n){c.isDataLoaded=!0;var a=n.status;a?d(a,"professional")?c.userState="professional":d(a,"professional_requested")?c.userState="processing":c.userState="retail":c.hasError=!0,e.$apply()});var m=function g(){c.isDataLoaded=!1,c.userState="";var e=r.getDefault();if(e){l=e.id;var a=e.landing_company_name,i=p("maltainvest",a);i?o.sendRequestFor.getAccountStatus():t.go("trade")}else n(g,1e3)};m()}angular.module("binary.pages.account-categorisation.controllers").controller("AccountCategorisationController",e),e.$inject=["$scope","$state","$timeout","$translate","websocketService","accountService","clientService","alertService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l){var u=this,d=!1,p=!1;u.upgradeButtonDisabled=!1;var m={commodities:o.instant("accounts-management.commodities"),forex:o.instant("accounts-management.forex"),indices:o.instant("accounts-management.indices"),stocks:o.instant("accounts-management.stocks"),volidx:o.instant("accounts-management.volidx")},g=["salutation","first_name","last_name","date_of_birth","residence","place_of_birth","address_line_1","address_city","phone","account_opening_reason"],f={salutation:"",first_name:"",last_name:"",date_of_birth:"",place_of_birth:"",residence:"",address_line_1:"",address_line_2:"",address_city:"",address_state:"",address_postcode:"",phone:"",account_opening_reason:""},h=function(e){var t=[];return _.forEach(e,function(e){e in m&&_.indexOf(t,m[e])<0&&t.push(m[e])}),t},y=function(e,t){return/crypto/i.test(e[t].type)},v=function(e){var t=void 0;return"real"===e?t=o.instant("accounts-management.account_real"):"financial"===e&&(t=o.instant("accounts-management.account_financial")),t},b=function(e){for(var t=r.currenciesConfig,n=e.length,a=[],i=0;n>i;i++){var s={},c=e[i];s.name=c,s.currencyGroup=y(t,c)?o.instant("accounts-management.crypto_currencies"):o.instant("accounts-management.fiat_currencies"),a.push(s)}return a},S=function(e){return s.getAccountType(e)},C=function(e){var t=s.landingCompanyValue(e,"legal_allowed_markets"),n=[];return Array.isArray(t)&&t.length&&(n=_.join(h(t),", ")),n},w=function(){var e=[];return _.forEach(u.accounts,function(t){var a={};a.id=t.id,a.isDisabled=t.is_disabled,a.excludedUntil=t.excluded_until?n("date")(1e3*t.excluded_until,"yyyy-MM-dd HH:mm:ss"):!1,a.availableMarkets=C(t.landing_company_name),a.type=S(t.landing_company_name),u.currentAccount.id!==a.id?a.currency=t.currency||"-":a.currency=t.currency,e.push(a)}),e},k=function(){u.upgrade=r.upgrade,u.upgrade.canUpgrade&&(u.legalAllowedMarkets=_.join(h(u.upgrade.allowedMarkets),", "),u.titleOfNextAccount=v(u.upgrade.typeOfNextAccount),u.newAccountCurrencyOptions=b(u.upgrade.currencyOptions),u.newAccountCurrencyOptions.length&&(u.selectedCurrency=u.newAccountCurrencyOptions[0].name))},T=function(){u.accounts=i.getAll(),u.currentAccount=i.getDefault();var e=u.currentAccount.landing_company_name;u.isMultiAccount=s.isLandingCompanyOf("costarica",e)||s.isLandingCompanyOf("svg",e),u.selectCurrencyError=!1,k(),u.existingAccounts=w(),d=!!_.find(u.existingAccounts,function(e){return"real"===e.type}),u.showContact=_.some(u.existingAccounts,function(e){return e.isDisabled||e.excludedUntil})};u.redirectToSetCurrency=function(){t.go("set-currency")},u.openNewAccount=function(){(!u.currentAccount.currency||""===u.currentAccount.currency)&&u.upgrade.multi||u.upgradeButtonDisabled?e.$applyAsync(function(){u.upgradeButtonDisabled=!1,u.selectCurrencyError=!0}):(u.upgradeButtonDisabled=!0,r.selectedCurrency=u.selectedCurrency,r.redirectedFromAccountsManagemenet=!0,"real"===u.upgrade.typeOfNextAccount?d?(p=!0,c.sendRequestFor.accountSetting()):t.go("real-account-opening"):"financial"===u.upgrade.typeOfNextAccount&&t.go("maltainvest-account-opening"))},e.$on("get_settings",function(e,a){p&&a&&(_.forEach(f,function(e,t){a[t]&&(f[t]=a[t])}),f.residence=a.country_code,f.date_of_birth=a.date_of_birth?n("date")(1e3*a.date_of_birth,"yyyy-MM-dd"):"",f.currency=u.selectedCurrency,_.findIndex(g,function(e){return!f[e]})>-1?t.go("profile"):c.sendRequestFor.createRealAccountSend(f))}),e.$on("new_account_real:error",function(e,t){u.upgradeButtonDisabled=!1,t.hasOwnProperty("details")?l.displayError(t.details):t.code&&l.displayError(t.message)}),e.$on("new_account_real",function(e,t){var n=t.oauth_token;c.authenticate(n),r.newAccountAdded=!0,i.addedAccount=n,u.upgradeButtonDisabled=!1});var $=function x(){r.checkingUpgradeDone?T():a(x,500)};e.$on("authorize",function(e,t){u.currentAccount.id!==t.loginid&&$()}),T()}angular.module("binary.pages.accounts-management.controllers").controller("AccountsManagementController",e),e.$inject=["$scope","$state","$filter","$timeout","$translate","appStateService","accountService","clientService","websocketService","alertService"]}(),function(){function e(e,t){var n=this;n.hasError=!1,n.assetIndex=JSON.parse(sessionStorage.asset_index||null),n.activeSymbols=JSON.parse(sessionStorage.all_active_symbols),n.getSymbolInfo=function(e,t){return _.filter(t,function(t,n){return t.symbol===e})},n.getAssetIndexData=function(e,t){if(!e||!t)return!1;n.marketColumns={};for(var a={symbol:0,displayName:1,cells:2,cellName:0,cellDisplayName:1,cellFrom:2,cellTo:3,symInfo:3,values:4},o=0;o<e.length;o++)if(n.assetItem=e[o],n.symbolInfo=n.getSymbolInfo(n.assetItem[a.symbol],t)[0],n.symbolInfo){var r=n.symbolInfo.market;n.assetItem.push(n.symbolInfo),r in n.marketColumns||(n.marketColumns[r]={header:[],columns:[],sub:[],displayName:n.symbolInfo.market_display_name}),n.assetCells=n.assetItem[a.cells];for(var i={},s=0;s<n.assetCells.length;s++){var c=n.assetCells[s][a.displayName];i[c]=n.assetCells[s][a.cellFrom]+" - "+n.assetCells[s][a.cellTo];var l=n.marketColumns[r];l.columns.indexOf(c)<0&&(l.header.push(n.assetCells[s][a.cellDisplayName]),l.columns.push(c))}n.assetItem.push(i)}return n.assetIndex=e,n.assetIndex},n.getMarketColumns=function(){return e.$applyAsync(function(){n.marketColumns&&(n.selectedMarket=Object.getOwnPropertyNames(n.marketColumns)[0])}),n.hasError=!1,n.marketColumns},n.getSubmarketTable=function(e,t){if(n.submarketNames={},t)for(var a=0;a<t.length;a++){var o=t[a];if(o[3]){var r=o[3],i=r.market,s=r.submarket,c=r.submarket_display_name;e[i].sub.indexOf(s)<0&&(e[i].sub.push(s),n.submarketNames[s]=c)}}},n.getAssetIndexData(n.assetIndex,n.activeSymbols);var a=t(function(e){n.getMarketColumns()&&e()});a.then(function(){n.getSubmarketTable(n.marketColumns,n.assetIndex),n.hasError=!1})}angular.module("binary.pages.asset-index.controllers").controller("AssetIndexController",e),e.$inject=["$scope","$q"]}(),angular.module("binary").service("accountService",["websocketService","appStateService","delayService",function(e,t,n){var a=this;this.addedAccount="";var o=function(e,t,n){var a=-1;return e.forEach(function(o,r){e[r][t]===n&&(a=r)}),a},r=function(){return localStorage.accounts&&JSON.parse(localStorage.accounts)instanceof Array};this.getAll=function(){var e=r()?JSON.parse(localStorage.accounts):[];return e.length>0&&(e=e.sort(function(e,t){return null===e.currency?1:null===t.currency?-1:e.currency===t.currency?0:e.currency<t.currency?-1:1})),e},this.removeAll=function(){localStorage.removeItem("accounts")};var i=function(t,a){if(n.remove("symbolsAndAssetIndexUpdate"),t)e.authenticate(t,a);else{var r=this.getAll(),i=o(r,"is_default",!0);if(i>-1){var s=r[i].token;e.authenticate(s,a)}}};this.validate=function(e,t){if(!e){var n=this.getAll(),a=o(n,"is_default",!0);a>-1&&(e=n[a].token)}i(e,t)},this.add=function(e){var t={id:e.loginid,token:e.token,currency:e.currency,email:e.email,country:e.country,is_disabled:e.is_disabled,is_ico_only:e.is_ico_only,is_virtual:e.is_virtual,excluded_until:e.excluded_until,landing_company_name:e.landing_company_name},n=this.getAll();_.find(n,["id",t.id])||(n.push(t),localStorage.accounts=JSON.stringify(n))},this.remove=function(e){var t=this.getAll(),n=o(t,"token",e);n>-1&&t[n].is_default!==!0&&(t.splice(n,1),localStorage.accounts=JSON.stringify(t))},this.setDefault=function(e){var t=this.getAll(),n=o(t,"token",e);n>-1&&(t.forEach(function(n,a){t[a].is_default=t[a].token===e}),localStorage.accounts=JSON.stringify(t))},this.hasDefault=function(){var e=this.getAll(),t=o(e,"is_default",!0);return t>-1},this.getDefault=function(){var e=this.getAll(),t=o(e,"is_default",!0);return-1===t?null:e[t]},this.isUnique=function(e){var t=this.getAll(),n=o(t,"id",e);return!(n>-1)},this.checkScope=function(e){var n=_.concat([],e),a=!1;return t.isLoggedin&&!_.isEmpty(t.scopes)&&(a=!0,n.some(function(e,n){return t.scopes.indexOf(e.toLowerCase())<0?(a=!1,!0):!1})),a},this.getAllloginids=function(e){var t=[],n=e||a.getAll();return n.forEach(function(e){t.push(e.id)}),t}}]),angular.module("binary").service("alertService",["$translate","$ionicPopup","$rootScope",function(e,t,n){var a=this,o=function(n,a,o,r){e(["alert.ok"]).then(function(e){if(void 0===navigator.notification){var i=t.alert({title:n,template:a,buttons:[{type:"button-positive",text:o||e["alert.ok"]}]});i.then(r)}else navigator.notification.alert(a,r,n,o||e["alert.ok"])})},r=function(e,n,a,o){if(void 0===navigator.notification){var r=t.confirm({title:e,template:n,buttons:a});r.then(o)}else navigator.notification.confirm(n,o,e,a)};this.displayRealitCheckInterval=function(e,n,a,o,r,i){var s=t.show({title:e,cssClass:n,scope:a,templateUrl:o,buttons:r});s.then(i)},this.displayRealityCheckResult=function(e,n,a,o,r,i){var s=t.show({title:e,cssClass:n,scope:a,templateUrl:o,buttons:r});s.then(i)},this.displayIOSPWAPrompt=function(e,n,a,o,r,i){var s=t.show({title:e,cssClass:n,scope:a,templateUrl:o,buttons:r});return s.then(i),s},this.displayError=function(t){e(["alert.error"]).then(function(e){o(e["alert.error"],t)})},this.displaySymbolWarning=function(t,n){e(["alert.warning",t]).then(function(e){o(e["alert.warning"],e[t])})},this.accountError={tokenNotValid:function(){e(["alert.error","alert.not_valid"]).then(function(e){o(e["alert.error"],e["alert.not_valid"])})},tokenNotAuthenticated:function(t){e(["alert.error","alert.not_auth"]).then(function(e){o(e["alert.error"],t||e["alert.not_auth"])})},tokenNotUnique:function(){e(["alert.error","alert.not_unique"]).then(function(e){o(e["alert.error"],e["alert.not_unique"])})}},this.contractError={notAvailable:function(){e(["alert.error","alert.contract_error"]).then(function(e){o(e["alert.error"],e["alert.contract_error"])})}},this.optionsError={noTick:function(){e(["alert.error","alert.no_tick"]).then(function(e){o(e["alert.error"],e["alert.no_tick"])})}},this.displayAlert=o,this.confirmAccountRemoval=function(t){e(["alert.remove_token_title","alert.remove_token_content"]).then(function(e){r(e["alert.remove_token_title"],e["alert.remove_token_content"],["Yes","No"],function(e){"boolean"!=typeof e&&(e=1===e?!0:!1),e&&n.$broadcast("token:remove",t)})})},this.confirmRemoveAllAccount=function(t){e(["alert.remove_all_tokens_title","alert.remove_all_tokens_content","alert.yes","alert.no"]).then(function(e){var n=null;n=navigator.notification?[e["alert.yes"],e["alert.no"]]:[{text:e["alert.no"],onTap:function(){return!1}},{text:e["alert.yes"],type:"button-positive",onTap:function(){return!0}}],r(e["alert.remove_all_tokens_title"],e["alert.remove_all_tokens_content"],n,t)})},this.confirmExit=function(t){e(["app.exit_title","app.exit_confirmation","alert.yes","alert.no"]).then(function(e){r(e["app.exit_title"],e["app.exit_confirmation"],[e["alert.yes"],e["alert.no"]],t)})},this.showInformation=function(n,a,o){var r=t.show({title:a,cssClass:"information-popup",scope:n,templateUrl:o,buttons:[{type:"button-positive",text:e.instant("alert.ok")}]});return r},this.showProfessioanlClientInformation=function(t){return a.showInformation(t,e.instant("professional-client.professional_client"),"js/share/templates/professional-client/professional-client-information.template.html")},this.showPEPInformation=function(t){return a.showInformation(t,e.instant("pep-information.pep"),"js/share/templates/pep-information/pep-information.template.html")},this.showTaxInformation=function(t){return a.showInformation(t,e.instant("what-is-tax-information.tax_information_title"),"js/share/templates/tax-information/tax-information.template.html")},this.displayProfessionalClientConfirmation=function(e,n,a,o,r){var i=t.show({title:e,cssClass:n,scope:a,templateUrl:o,buttons:r});return i}}]),angular.module("binary").factory("analyticsService",["accountService",function(e){var t={};return t.google={addUser:function(){var t=e.getDefault(),n=t&&t.id?t.id:null;window.ga.setUserId(n)},trackView:function(e){"undefined"!=typeof ga&&(this.addUser(),ga.trackView(e))},trackEvent:function(e,t,n,a){"undefined"!=typeof ga&&(this.addUser(),ga.trackEvent(e,t,n,a))}},t}]),angular.module("binary").factory("appStateService",function(){var e={};return e.tradeMode=!0,e.purchaseMode=!1,e.isLoggedin=!1,e.scopes=[],e.isChangedAccount=!1,e.isRealityChecked=!1,e.isPopupOpen=!1,e.isProfitTableSet=!1,e.profitTableRefresh=!1,e.isStatementSet=!1,e.statementRefresh=!1,e.virtuality=0,e.newAccountAdded=!1,e.isLanguageReady=!1,e.passwordChanged=!1,e.limitsChange=!1,e.realityCheckLogin=!1,e.hasAuthenticateMessage=!1,e.hasRestrictedMessage=!1,e.hasMaxTurnoverMessage=!1,e.hasCountryMessage=!1,e.hasTnCMessage=!1,e.hasTaxInfoMessage=!1,e.hasFinancialAssessmentMessage=!1,e.hasAgeVerificationMessage=!1,e.hasCurrencyMessage=!1,e.checkedAccountStatus=!1,e.siteStatus="up",e.modalIsOpen=!1,e.currenciesConfig={},e.balanceSubscribtionId=null,e.accountCurrencyChanged=!1,e.selectedCurrency=!1,e.upgrade={},e.redirectedFromAccountsManagemenet=!1,e.checkingUpgradeDone=!1,e.upgradeableLandingCompanies=[],e.loginFinished=!1,e.isMaltainvest=!1,e.authorizeToken="",e}),angular.module("binary").factory("appVersionService",["$http",function(e){function t(){return e.get("js/config.json")}var n={};return n.getAppVersion=t,n}]),angular.module("binary").factory("chartService",["$rootScope",function(e){var t=void 0,n=void 0,a=[],o=function(e){return i.tickCount-1-e},r=function(e){var t=Math.ceil(i.tickCount/i.minTickCount);return o(e)%t===0?!0:!1},i=void 0,s=function(){i={chartJS:null,capacity:600,maxTickCount:50,hideLabelsThreshold:15,tickCount:15,minTickCount:5,chartData:{labels:[],labelsFilter:function(e){return!r(e)},datasets:[{strokeColor:"#7cb5ec",pointColor:"#7cb5ec",pointStrokeColor:"#7cb5ec",data:[]}]},chartOptions:{animation:!1,bezierCurve:!1,datasetFill:!1,showTooltips:!1,keepAspectRatio:!1,scaleShowLabels:!1,scaleFontSize:10,pointDotRadius:3,datasetStrokeWidth:2}}};s();var c={zeroPad:function(e){return 10>e?"0"+e:e.toString()},getTickTime:function(e){var t=new Date(1e3*e);return t.getUTCHours()+":"+c.zeroPad(t.getUTCMinutes())+":"+c.zeroPad(t.getUTCSeconds())},isDefined:function(e){return"undefined"==typeof e||null===e?!1:!0},setObjValue:function(e,t,n,a){c.isDefined(e)&&(c.isDefined(a)?a&&(e[t]=n):"undefined"==typeof e[t]&&(e[t]=n))},fractionalLength:function(e){var t=e.toString(),n=t.indexOf(".");return t.length-n-1},maxFractionalLength:function(e){var t=0;return e.forEach(function(e){t=t<c.fractionalLength(e)?c.fractionalLength(e):t}),t},lastDigit:function(e){return parseInt(e.toString().slice(-1)[0])},average:function(e){var t=c.fractionalLength(e[0])+1;return parseFloat(e.reduce(function(e,t){return+e+ +t},0)/e.length).toFixed(t)},conditions:{CALL:function(e,t){return parseFloat(t)>parseFloat(e)},PUT:function(e,t){return parseFloat(t)<parseFloat(e)},CALLHL:function(e,t){return parseFloat(t)>parseFloat(e)},PUTHL:function(e,t){return parseFloat(t)<parseFloat(e)},DIGITMATCH:function(e,t){return c.lastDigit(parseInt(e))===c.lastDigit(t)},DIGITDIFF:function(e,t){return c.lastDigit(parseInt(e))!==c.lastDigit(t)},DIGITEVEN:function(e,t){return c.lastDigit(t)%2===0},DIGITODD:function(e,t){return c.lastDigit(t)%2!==0},DIGITUNDER:function(e,t){return c.lastDigit(t)<parseInt(e)},DIGITOVER:function(e,t){return c.lastDigit(t)>parseInt(e)},ASIANU:function(e,t,n){var a=c.average(n);return parseFloat(t)>a},ASIAND:function(e,t,n){var a=c.average(n);return parseFloat(t)<a},TICKHIGH:function(e,t,n,a){return n[a-1]&&!_.find(n,function(e){return e>n[a-1]})},TICKLOW:function(e,t,n,a){return n[a-1]&&!_.find(n,function(e){return e<n[a-1]})}},digitTrade:function(e){return 0===e.type.indexOf("DIGIT")?!0:!1},asianGame:function(e){return 0===e.type.indexOf("ASIAN")?!0:!1},higherLowerTrade:function(e){return["PUTHL","CALLHL"].indexOf(e.type)>-1&&!_.isEmpty(e.barrier)?!0:!1},highLowTrade:function(e){return["TICKLOW","TICKHIGH"].indexOf(e.type)>-1?!0:!1},getRelativeIndex:function(e,t){return e-(n.getCapacity()-(n.getTickCount()+n.getDataIndex()))},getAbsoluteIndex:function(e,t){return e+(n.getCapacity()-(n.getTickCount()+n.getDataIndex()))}},l=function(){var e=0,t=0,n=0,a=!1,o=0,r=function(e,o){t=o,n=e,a=!0},i=function(o,r){return a?n+Math.floor((r-t)/e)-o:0},s=function(t,n){null!==t&&(e=Math.ceil(t.offsetWidth/n))},c=function(){return e},l=function(e,t){return e.timeStamp-o>100?(o=e.timeStamp,!0):!1},u=function(){a=!1};return{isStep:l,stop:u,setDistance:s,getDistance:c,setStartPosition:r,stepCount:i}},u=function(e){var t=[],n=function(e){var n=JSON.parse(localStorage.options),a=n.underlying.pip,o=c.fractionalLength(a);parseInt(e.epoch)>parseInt(t.slice(-1)[0].time)&&(t.push({time:e.epoch,price:parseFloat(e.quote).toFixed(o)}),t.shift())},o=function(e,t){var n=t.times,a=t.prices,o=function(e,t){var n=parseInt(e.time),a=parseInt(t.time);return a>n?-1:n>a?1:0},r=[];n.forEach(function(t,n){r.indexOf(t)<0&&(r.push(t),e.push({time:t,price:a[n]}))}),n.sort(o)},r=function(e){t=[],a.forEach(function(e){e.removeRegion()}),a=[],o(t,e)},i=function(n,a,o){var r=e-n,i=r-a;o(i>=0?t.slice(i,r):[])};return{getHistory:i,addTick:n,addHistory:r}},d=function(t){var o=!0,r=[],i=function(){return o=!1},s=function(){return o},l=function(){return c.isDefined(t.exitSpot)},u=function(){return t},d=function(){t.showingEntrySpot=!1,t.showingExitSpot=!1},p=function(){return c.isDefined(t.entrySpotIndex)?!0:!1},m=function(){return c.isDefined(t.exitSpotIndex)?!0:!1},g=function(e){return p()&&e>=t.entrySpotTime&&(!m()||e<=t.exitSpot)?!0:!1},f=function(e){return t.showingEntrySpot&&t.entrySpotIndex===c.getAbsoluteIndex(e)?!0:t.showingExitSpot&&t.exitSpotIndex===c.getAbsoluteIndex(e)?!0:!1},h=function(e){var n=void 0;return t.showingEntrySpot&&(n=e[c.getRelativeIndex(t.entrySpotIndex)]),n},y=function(e){var n=void 0;return t.showingExitSpot&&(n=e[c.getRelativeIndex(t.exitSpotIndex)]),n},v=function(e){return p()?e===t.entrySpotTime?!0:!1:e>=t.startTime?!0:!1},_=function(e,n){return m()?e===t.exitSpot?!0:!1:p()&&n===t.entrySpotIndex+t.duration?!0:!1},b=function(e,a){v(a)&&(t.showingEntrySpot=!0,c.digitTrade(t)||c.asianGame(t)||m()?c.asianGame(t)&&r.length>0&&!m()&&n.addGridLine({color:"#2E8836",label:"Average: "+c.average(r),orientation:"horizontal",type:"average",firstIndex:e,index:e+(r.length-1)}):n.addGridLine({color:"#2E8836",label:"barrier: "+t.barrier,orientation:"horizontal",type:"barrier",index:e})),_(a,c.getAbsoluteIndex(e))&&(t.showingExitSpot=!0)},S=function(e,n,a){if(v(n)||g(n)){if(v(n)){var o=a;c.higherLowerTrade(t)&&(t.offset=t.offset||t.barrier,o=Number(a)+Number(t.offset),o=c.digitTrade(t)?t.barrier:o.toFixed(c.fractionalLength(a))),c.setObjValue(t,"barrier",o,!c.digitTrade(t)),c.setObjValue(t,"entrySpotPrice",a,!0),c.setObjValue(t,"entrySpotTime",n,!p()),c.setObjValue(t,"entrySpotIndex",e,!0)}_(n,e)&&(c.setObjValue(t,"exitSpot",n,!m()),c.setObjValue(t,"exitSpotIndex",e,!0))}},C=function(){if(p()){var e="win"===t.result?"rgba(0, 255, 0, 0.1)":"rgba(255, 0, 0, 0.1)";if(t.showingExitSpot){var a=c.getRelativeIndex(t.entrySpotIndex);a=0>a?0:a,c.isDefined(t.region)?(t.region.color=e,t.region.start=a):t.region={color:e,start:a},t.region.end=c.getRelativeIndex(t.exitSpotIndex),n.addRegion(t.region)}else t.showingEntrySpot?(c.isDefined(t.region)?(t.region.color=e,t.region.start=c.getRelativeIndex(t.entrySpotIndex)):t.region={color:e,start:c.getRelativeIndex(t.entrySpotIndex)},n.addRegion(t.region)):n.removeRegion(t.region)}},w=function(n,s){var u=JSON.parse(localStorage.options),d=u.underlying.pip,m=c.fractionalLength(d);if(p()&&o){var f=t.exitSpot&&n>t.exitSpot;if(0===r.length)if(t.entrySpotTime!==n&&g(n)){var h=parseFloat(t.entrySpotPrice).toFixed(m),y=c.digitTrade(t)?t.barrier:parseFloat(t.barrier).toFixed(m);r.push(h),c.conditions[t.type](y,h,r,t.selectedTick)?t.result="win":t.result="lose",e.$broadcast("contract:spot",t,h)}else f?r.push(t.entrySpotPrice):r.push(parseFloat(s).toFixed(m));else r.push(parseFloat(s).toFixed(m));if(g(n)||f){var v=parseFloat(t.barrier).toFixed(m),_=f?r.slice(-2)[0]:parseFloat(s).toFixed(m);c.conditions[t.type](v,_,r,t.selectedTick)?t.result="win":t.result="lose",e.$broadcast("contract:spot",t,_),l()&&o&&(r=[],a.forEach(function(e,n){var a=e.getContract();t===a||e.isFinished()||i()}),o&&e.$broadcast("contract:finished",t),i())}}},k=function(){n.removeRegion(t.region)};return{getBroadcastable:s,setNotBroadcastable:i,isFinished:l,getContract:u,isSpot:f,betweenExistingSpots:g,resetSpotShowing:d,addSpots:S,addRegions:w,removeRegion:k,viewSpots:b,viewRegions:C,getEntrySpotPoint:h,getExitSpotPoint:y}},p=function(){var e=0,n=void 0,r=void 0,p=!1,m=!1,g=l(),f=function(e){return 0===o(e)?!0:!1},h=function(){return i.tickCount>=i.hideLabelsThreshold?!0:!1},y=function(){return 0===e?!1:!0},v=function(e){var t="black";return!y()&&f(e)&&(t="#2E8836"),a.forEach(function(n){n.isSpot(e)&&(t="#818183")}),t},b=function(e,t){var n=void 0;return a.forEach(function(t){t.betweenExistingSpots(e)&&(n="#7cb5ec")}),c.isDefined(n)?n:n=f(t)&&!y()?"#2E8836":"#7cb5ec"},S=function(e,t){var n=e.scale.endPoint-e.scale.startPoint+12,a=void 0,o=e.datasets[0].points[t.start].x;if(a=c.isDefined(t.end)?e.datasets[0].points[t.end].x:e.datasets[0].points.slice(-1)[0].x,!(o>a)){a===o&&(o-=2);var i=a-o||6;r.fillStyle=t.color,r.fillRect(o,e.scale.startPoint-12,i,n)}},C=function(e,t){return{width:e.measureText(t.value).width,height:parseInt(e.font)}},w=function(e,t){return e.s<t.e&&e.e>t.s||t.s<e.e&&t.e>e.s},k=function(e,t){var n=C(r,e),a=C(r,t),o=w({s:e.y,e:e.y+n.height},{s:t.y,e:t.y+a.height}),i=w({s:e.x,e:e.x+n.width},{s:t.x,e:t.x+a.width});return i&&o},T=function(e){var t=[],n=[];return a.forEach(function(a){var o=a.getEntrySpotPoint(e),r=a.getExitSpotPoint(e);c.isDefined(o)&&t.push(o),c.isDefined(r)&&n.push(r)}),{entries:t,exits:n}},$=function(e,t){var n=!0;return e.forEach(function(e,a){k(e,t)&&(n=!1)}),n},x=function(e){var t=[],n=T(e);n.exits.forEach(function(e,n){t.push(e)}),n.entries.forEach(function(e,n){$(t,e)&&t.push(e)});var a=e.slice(-1)[0];if(!y()&&$(t,a)&&t.push(a),!h())for(var o=e.length-1;o>=0;o--)$(t,e[o])&&t.push(e[o]);t.forEach(function(e,t){_.isEmpty(e)||(e.shown=!0)})},A=function(e,t){if(0!==t&&c.isDefined(e.shown)&&e.shown){r.fillStyle=v(t),r.textAlign="center",r.textBaseline="bottom";var n=0,a=C(r,e).width;f(t)&&(n=45>a?0:a-45),r.fillText(e.value,e.x-n,e.y-1)}},I=function(e,t){var n=e.datasets[0].points[t.index],a=e.scale;if(r.beginPath(),"vertical"===t.orientation)r.moveTo(n.x,a.startPoint+24),r.strokeStyle=t.color,r.fillStyle=t.color,r.lineTo(n.x,a.endPoint),r.stroke(),r.textAlign="center",r.fillText(t.label,n.x,a.startPoint+12);else if("horizontal"===t.orientation){var o=n.y;if("average"===t.type&&t.index!==t.firstIndex){var i=e.datasets[0].points[t.firstIndex];o=(i.y+n.y)/2}r.moveTo(a.startPoint,o),r.strokeStyle=t.color,r.fillStyle=t.color,r.lineTo(e.chart.width,o),r.stroke(),r.textAlign="center";var s=r.measureText(t.label).width;r.fillText(t.label,parseInt(s/2)+5,o-1)}};Chart.CustomScale=Chart.Scale.extend({initialize:function(){var e=function(e,t,n){e.font=t;var a=0;return Chart.helpers.each(n,function(t){var n=e.measureText(t).width;a=n>a?n:a}),a};this.calculateXLabelRotation=function(){this.ctx.font=this.font;var t=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=t/2+3,this.xLabelRotation=0,this.display){var n=e(this.ctx,this.font,this.xLabels);this.xLabelWidth=n}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding;this.xScalePaddingLeft=0},Chart.Scale.prototype.initialize.apply(this,arguments)},draw:function(){var e=Chart.helpers,t=e.each,n=e.aliasPixel,a=this.ctx,o=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(a.fillStyle=this.textColor,a.font=this.font,t(this.yLabels,function(t,n){var i=this.endPoint-o*n,s=Math.round(i);a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(t,r-10,i),a.beginPath(),n>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),s+=e.aliasPixel(a.lineWidth),a.moveTo(r,s),a.lineTo(this.width,s),a.stroke(),a.closePath(),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(r-5,s),a.lineTo(r,s),a.stroke(),a.closePath()},this),t(this.xLabels,function(e,t){var o=!1;"function"==typeof this.labelsFilter&&this.labelsFilter(t)&&(o=!0);var r=this.calculateX(t)+n(this.lineWidth),i=this.calculateX(t-(this.offsetGridLines?.5:0))+n(this.lineWidth);a.beginPath(),t>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),a.moveTo(i,this.endPoint),a.lineTo(i,this.startPoint-12),a.stroke(),a.closePath(),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(i,this.endPoint),o?a.lineTo(i,this.endPoint):a.lineTo(i,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(r,this.endPoint+8),a.textAlign="center",a.textBaseline="top",o||a.fillText(e,0,0),a.restore()},this))}}),Chart.types.Line.extend({name:"LineChartSpots",initialize:function(e){this.options.labelsFilter=e.labelsFilter||null,Chart.types.Line.prototype.initialize.apply(this,arguments)},draw:function(){var e=this.datasets[0],t=this;e.points.forEach(function(e,t){e.fillColor=b(i.chartData.epochLabels[t],t)}),Chart.types.Line.prototype.draw.apply(this,arguments),x(e.points),e.points.forEach(function(e,t){A(e,t)}),c.isDefined(this.options.regions)&&this.options.regions.forEach(function(e){S(t,e)}),c.isDefined(this.options.gridLines)&&this.options.gridLines.forEach(function(e){I(t,e)})},buildScale:function(e){var t=Chart.helpers,n=this,a=function(){var e=[];return n.eachPoints(function(t){e.push(t.value)}),e},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,labelsFilter:this.options.labelsFilter,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var n=t.calculateScaleRange(a(),e,this.fontSize,this.beginAtZero,this.integersOnly);t.extend(this,n)},xLabels:e,font:t.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&t.extend(o,{calculateYRange:t.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new Chart.CustomScale(o)}});var E=function(){i.chartJS&&(i.chartJS.destroy(),s(),n=null,r=null,e=0,p=!1,m=!1,g=null)},O=function(e){n=document.getElementById(e),null!==n&&(r=n.getContext("2d"),
g=l(),g.setDistance(n,i.tickCount))},D=function(e){return c.isDefined(i.chartOptions.regions)?i.chartOptions.regions.indexOf(e):-1},L=function(e){c.isDefined(i.chartOptions.regions)||(i.chartOptions.regions=[]),D(e)<0&&i.chartOptions.regions.push(e)},P=function(e){var t=D(e);t>=0&&i.chartOptions.regions.splice(t,1)},R=function(t){_.isEmpty(g)||(g.setStartPosition(e,t.center.x),p=!0)},M=function(t){_.isEmpty(g)||(m||Z(g.stepCount(e,t.center.x)),g.stop(),p=!1)},F=function(){m=!0},N=function(){m=!1},j=function(e){c.isDefined(i.chartOptions.gridLines)||(i.chartOptions.gridLines=[]),i.chartOptions.gridLines.push(e)},U=function(e,t){if(i.chartData.labels=[],i.chartData.epochLabels=e,e.forEach(function(e,t){i.chartData.labels.push(c.getTickTime(e))}),i.chartData.datasets[0].data=t,c.isDefined(i.chartJS)&&i.chartJS.destroy(),c.isDefined(r)){var n=new Chart(r);i.chartJS=n.LineChartSpots(i.chartData,i.chartOptions)}},q=function(e){i.chartOptions.gridLines=[],a.forEach(function(e){e.resetSpotShowing()});var t=[],n=[];e.forEach(function(e,o){var r=parseInt(e.time);a.forEach(function(e){e.viewSpots(o,r)}),t.push(r),n.push(e.price)}),a.forEach(function(e){e.viewRegions()}),U(t,n)},B=function(e){var t=void 0,n=void 0;e.forEach(function(e,o){var r=parseInt(e.time),i=e.price;a.forEach(function(e){e.addSpots(o,r,i)}),t=parseInt(e.time),n=e.price}),a.forEach(function(e){e.addRegions(t,n)})},V=function(n){c.isDefined(t)&&(t.addTick(n),t.getHistory(0,i.capacity,B),0!==e||p||m?Z(1,!1):t.getHistory(e,i.tickCount,q))},z=function(n){c.isDefined(t)||(t=u(i.capacity)),t.addHistory(n),t.getHistory(0,i.capacity,B),t.getHistory(e,i.tickCount,q)},H=function(e){},G=function(e){},J=function(a){var o=void 0,r=void 0;if("in"===a)o=parseInt(i.tickCount/1.2),r=o>i.minTickCount;else{if("out"!==a)return;o=parseInt(1.2*i.tickCount),r=o<i.maxTickCount}r&&(i.tickCount=o,t.getHistory(e,i.tickCount,q),g.setDistance(n,i.tickCount))},W=function(){J("out")},K=function(){J("in")},Z=function(n,a){if(0!==n){var o=e+n;0>o?o=0:o>=i.capacity-i.tickCount&&(o=i.capacity-i.tickCount-1),o!==e&&(e=o,(!c.isDefined(a)||a)&&t.getHistory(e,i.tickCount,q))}},Y=function(t){_.isEmpty(g)||!m&&g.isStep(t,i.tickCount)&&Z(g.stepCount(e,t.center.x))},X=function(){return i.capacity},Q=function(){return i.tickCount},ee=function(){return e},te=function(t){t&&((c.digitTrade(t)||c.asianGame(t)||c.highLowTrade(t))&&(t.duration-=1),a.push(d(t)),e=0)},ne={addTick:V,addHistory:z,addCandles:H,addOhlc:G};return{dragStart:R,dragEnd:M,zoomIn:K,zoomOut:W,zoomStart:F,zoomEnd:N,dragRight:Y,dragLeft:Y,getCapacity:X,getTickCount:Q,getDataIndex:ee,addContract:te,historyInterface:ne,addGridLine:j,addRegion:L,removeRegion:P,drawChart:O,destroy:E}},m=function(e){n.drawChart(e)},g=function(){n.destroy(),a.forEach(function(e,t){e.setNotBroadcastable()}),t=null};return n=p(),{destroy:g,drawChart:m,dragStart:n.dragStart,dragEnd:n.dragEnd,zoomIn:n.zoomIn,zoomOut:n.zoomOut,zoomStart:n.zoomStart,zoomEnd:n.zoomEnd,dragRight:n.dragRight,dragLeft:n.dragLeft,getCapacity:n.getCapacity,addContract:n.addContract,historyInterface:n.historyInterface}}]),angular.module("binary").service("cleanupService",["$translate","proposalService",function(e,t){this.run=function(){t.forget()}}]),angular.module("binary").service("clientService",["appStateService",function(e){var t=this;this.isLandingCompanyOf=function(e,t){return e===t},this.hasAccountOfLandingCompany=function(e,n){return!!_.find(e,function(e){return t.isLandingCompanyOf(n,e.landing_company_name)})},this.getAccountType=function(e){var n=void 0;return e&&(n=t.isLandingCompanyOf("virtual",e)?"virtual":t.isLandingCompanyOf("maltainvest",e)?"financial":t.isLandingCompanyOf("malta",e)?"gaming":"real"),n},this.isAccountOfType=function(e,n){var a=t.getAccountType(n);return"virtual"===e&&"virtual"===a||"real"===e&&"virtual"!==a||e===a},this.landingCompanyValue=function(e,n,a){var o=void 0,r=a||JSON.parse(localStorage.getItem("landingCompanyObject"));if(t.isAccountOfType("financial",e))o=r.financial_company;else{if(!t.isAccountOfType("real",e)){var i=(r.financial_company||{})[n]||[],s=(r.gaming_company||{})[n]||[];return o=i.concat(s)}o=r.gaming_company,o||(o=r.financial_company)}return(o||{})[n]},this.getExistingCurrencies=function(e){var n=[];return _.forIn(e,function(e,a){!t.isLandingCompanyOf("virtual",e.landing_company_name)&&e.currency.length>0&&n.push(e.currency)}),n},this.dividedCurrencies=function(t){var n=e.currenciesConfig,a=[],o=[];return _.forEach(t,function(e){var t=/crypto/i.test(n[e].type);t?a.push(e):o.push(e)}),{cryptoCurrencies:a,fiatCurrencies:o}},this.getFractionalDigits=function(){var t=sessionStorage.getItem("currency")||"USD",n=e.currenciesConfig||{};return!_.isEmpty(n)&&n[t]?n[t].fractional_digits:2},this.groupMT5Accounts=function(e){var t={},n=[],a=[];return _.forEach(e,function(e){return e.isDemo?n.push(e):a.push(e)}),n.length&&(t.demo=n),a.length&&(t.real=a),t}}]),angular.module("binary").factory("delayService",function(){var e={},t={},n=function(e,n,a){var o=0;return{run:function(r){var i=function(){t[a]=(new Date).getTime(),e.apply(this,n)};0!==r?o=setTimeout(function(){i()},r):i()},cancel:function(){clearTimeout(o)}}};return{update:function(a,o,r,i){var s=(new Date).getTime();if(e.hasOwnProperty(a)){var c=r-(s-t[a]);r=c>0?c:0,e[a].cancel()}else r=0,t[a]=s;e[a]=n(o,i,a),e[a].run(r)},remove:function(n){e.hasOwnProperty(n)&&(e[n].cancel(),delete e[n],delete t[n])}}}),angular.module("binary").service("languageService",["$rootScope","$translate","cleanupService",function(e,t,n){this.update=function(e){localStorage.language=e,this.set(e)},this.set=function(a){var o=localStorage.language||"en";a&&(o=a),n.run(),e.$broadcast("language:updated"),t.use(o)},this.read=function(){var e=localStorage.language;return e||"en"},this.remove=function(){localStorage.removeItem("language"),n.run()};var a={en:{nativeName:"English"},de:{nativeName:"Deutsch"},es:{nativeName:"Espaol"},fr:{nativeName:"Franais"},id:{nativeName:"Indonesia"},it:{nativeName:"Italiano"},ja:{nativeName:""},pl:{nativeName:"Polish"},pt:{nativeName:"Portugus"},ru:{nativeName:""},th:{nativeName:"Thai"},vi:{nativeName:"Ting Vit"},zh_cn:{nativeName:""},zh_tw:{nativeName:""}},o=function(e){var t=a[e];return t?t.nativeName:void 0};this.getLanguageNativeName=o}]),angular.module("binary").factory("localStorageService",["$state","appStateService",function(e,t){var n={},a=function(e,t,n){var a=-1;return e.forEach(function(o,r){e[r][t]===n&&(a=r)}),a};return n.removeToken=function(e){if(localStorage.hasOwnProperty("accounts")){var t=JSON.parse(localStorage.accounts),n=a(t,"token",e);n>-1&&(t.splice(n),localStorage.accounts=JSON.stringify(t))}},n.getDefaultToken=function(){if(localStorage.accounts&&JSON.parse(localStorage.accounts)instanceof Array){var e=JSON.parse(localStorage.accounts),t=a(e,"is_default",!0);if(t>-1)return e[t].token}return null},n}]),angular.module("binary").service("marketService",["websocketService","proposalService","config",function(e,t,n){var a=function(e){var t={index:["R_100","R_25","R_50","R_75"],BEARBULL:["RDBEAR","RDBULL"],MOONSUN:["RDMOON","RDSUN"],MARSVENUS:["RDMARS","RDVENUS"],YANGYIN:["RDYANG","RDYIN"]},n=[],a=[];return Object.keys(t).forEach(function(o){var r=[],i=-1;e.forEach(function(e,n){e.symbol===t[o][0]&&(i=n)}),i>=0&&(t[o].forEach(function(n,i){var s=-1;e.forEach(function(e,n){e.symbol===t[o][i]&&(s=n)}),s>=0&&(r.push(e[s]),a.push(s))}),r.sort(),n=n.concat(r))}),e.forEach(function(e,t){a.indexOf(t)<0&&n.push(e)}),n},o=function(e){return e.sort(function(e,t){return e.display_name>t.display_name?1:e.display_name<t.display_name?-1:0}),e=a(e)};this.fixOrder=function(){if(sessionStorage.active_symbols&&"null"!==sessionStorage.active_symbols){var e=JSON.parse(sessionStorage.active_symbols);Object.keys(e).forEach(function(t){e[t]=o(e[t])}),sessionStorage.active_symbols=JSON.stringify(e)}},this.getActiveMarkets=function(){if(!sessionStorage.active_symbols||"null"===sessionStorage.active_symbols)return[];var e=JSON.parse(sessionStorage.active_symbols);return e?Object.keys(e):(console.log(e),[])},this.getAllSymbolsForAMarket=function(e){if(!e||!sessionStorage.active_symbols||!sessionStorage.asset_index)return[];var t=JSON.parse(sessionStorage.active_symbols)[e],a=JSON.parse(sessionStorage.asset_index),o=n.assetIndexes,r=[];return t.forEach(function(e){for(var t=0;t<a.length;t++)if(e.symbol===a[t][o.symbol]){for(var n=a[t][o.contracts],i=0;i<n.length;i++)if(-1!==n[i][o.contractFrom].indexOf("t")){e.display_name=a[t][o.displayName],r.push(e);break}break}}),r},this.getSymbolDetails=function(t){e.sendRequestFor.contractsForSymbol(t)},this.getDefault={market:function(e){var n=t.get();return n&&n.passthrough&&n.passthrough.market&&e[n.passthrough.market]?n.passthrough.market:_.findKey(e,function(e){return e})},symbol:function(e,n){var a=t.get();return a&&a.passthrough&&a.passthrough.market&&a.symbol&&a.passthrough.market===e?a.symbol:n[0].symbol},tradeType:function(e){if(_.isEmpty(e))return null;var n=t.get(),a=n.contract_type,o=e[0].value;return e.forEach(function(e,t){e.value===a&&(o=a)}),o},tick:function(){var e=t.get();return e.duration?e.duration:5},digit:function(){var e=t.get();return e.barrier?e.barrier:0},basis:function(){var e=t.get();return e.basis?e.basis:"payout"},amount:function(){var e=t.get();return isNaN(e.amount)?5:e.amount}},this.getTradeTypes=function(e){var t=n.tradeTypes,a=[];return t.forEach(function(t,n){Object.keys(e).forEach(function(n,o){if(e.hasOwnProperty(n)&&t.value===n){for(var r=!1,i=0;i<e[n].length;i++){var s=e[n][i].min_contract_duration;s&&s.toString().match(/^\d+t$/)&&(r=!0)}r&&a.push(t)}})}),a},this.removeActiveSymbols=function(){sessionStorage.active_symbols=null},this.removeAssetIndex=function(){sessionStorage.asset_index=null},this.hasActiveSymobols=function(){return sessionStorage.active_symbols?JSON.parse(sessionStorage.active_symbols):!1},this.hasAssetIndex=function(){return sessionStorage.asset_index?JSON.parse(sessionStorage.asset_index):!1}}]),angular.module("binary").service("notificationService",function(){var e=this;this.notices=[],this.emptyNotices=function(){e.notices=[]},this.messages={authenticateMessage:{title:"account_authentication",text:"please_authenticate",link:"authentication"},ageVerificationMessage:{title:"account_age_verification",text:"needs_age_verification",link:"contact"},restrictedMessage:{title:"account_restriction",text:"please_contact",link:"contact"},countryNotSetMessage:{title:"account_country",text:"set_country",link:"profile"},riskAssessmentMessage:{title:"financial_assessment_not_completed",text:"complete_financial_assessment",link:"financial-assessment"},taxInformationMessage:{title:"tax_information",text:"complete_profile",link:"profile"},termsAndConditionsMessage:{title:"tnc",text:"accept_tnc",link:"terms-and-conditions"},maxTurnoverLimitNotSetMessage:{title:"max_turnover_limit",text:"set_max_turnover_limit",link:"self-exclusion"},currencyNotSetMessage:{title:"account_currency",text:"choose_account_currency",link:"set-currency"}}}),function(){function e(){var e={};return e.getItem=function(e){var t=sessionStorage.getItem(e);return _.isEmpty(t)||"undefined"===t?null:t},e}angular.module("binary").factory("sessionStorageService",e)}(),angular.module("binary").service("supportedLanguagesService",function(){var e=this;this.supportedLanguages=["en"],this.setSupportedLanguages=function(t){return e.supportedLanguages=t}}),angular.module("binary").factory("tableStateService",function(){var e={};return e.dateType="allTime",e.dateFrom="",e.dateTo="",e.currentPage=0,e.appID="allApps",e.batchNum=0,e.batchLimit=0,e.batchSize=20,e.completedGroup=!0,e.statementDateType="allTime",e.statementDateFrom="",e.statementDateTo="",e.statementCurrentPage=0,e.statementAppID="allApps",e.statementBatchNum=0,e.statementBatchLimit=0,e.statementBatchSize=20,e.statementCompletedGroup=!0,e}),function(){function e(e){var t={};return t.spinnerLogo={start:function(){e.$broadcast("spinner-logo:start")},stop:function(){e.$broadcast("spinner-logo:stop")}},t}angular.module("binary.share.services").factory("utilsService",e),e.$inject=["$rootScope"]}(),angular.module("binary").factory("validationService",["clientService",function(e){var t={},n=function(){return e.getFractionalDigits()},a=function(){return new RegExp("^\\d+(\\.\\d{0,"+t.fractionalDigits+"})?$")},o=function(e){return function(t){return f(t,e)}()};t.fractionalDigits=n();var r=/[`~!@#$%^&*)(_=+[}{\]\\\/";:?><|]+/,i=/[`~!$%^&*_=+[}{\]\\"?><|]+/,s=/^([a-zA-Z\d-\s])*$/,c=/^\+?((-|\s)*[0-9])*$/,l=/^[\w-]{0,20}$/,u=/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]+/,d=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$/,p=/^\w{8,128}$/,m=a(),g=/^\d+$/,f=function(e,t,n){return{test:function(e){return n?!t.test(e):t.test(e)}}};return t.validateGeneral=function(e){return f(e,r,!0)}(),t.validateAddress=function(e){return f(e,i,!0)}(),t.validatePostcode=function(e){return f(e,s)}(),t.validatePhone=function(e){return f(e,c)}(),t.validateTaxIdentificationNumber=function(e){return f(e,l)}(),t.validatePassword=function(e){return f(e,u)}(),t.validateMail=function(e){return f(e,d)}(),t.validateToken=function(e){return f(e,p)}(),t.validateFloatNumber=o(m),t.validateIntegerNumber=function(e){return f(e,g)}(),t.length={name:{min:2,max:50},tin:{max:20},address:{max:70},city:{max:35},postcode:{max:20},phone:{min:8,max:35},secret_answer:{min:4,max:50},password:{min:6,max:25},selfExclusionLimits:{max:20},selfExclusionOpenPositions:{max:4},selfExclusionSessionDuration:{max:5}},t.reset=function(){t.fractionalDigits=n(),m=a(),t.validateFloatNumber=o(m)},t}]),angular.module("binary").factory("websocketService",["$ionicLoading","$ionicPlatform","$rootScope","$state","$translate","alertService","appStateService","localStorageService","clientService","config","notificationService","supportedLanguagesService",function(e,t,n,a,o,r,i,s,c,l,u,d){var p="",m=function(e,t){return _.isEmpty(t)?e:(Object.keys(t).forEach(function(n,a){t.hasOwnProperty(n)&&(e[n]=t[n])}),e)},g=function w(e,t){p&&3===p.readyState?(b(),t||setTimeout(function(){w(e)},1e3)):p&&1===p.readyState?e():p instanceof WebSocket?setTimeout(function(){w(e)},1e3):(b(),t||setTimeout(function(){w(e)},1e3))},f=function(e){var n=s.getDefaultToken();t.ready(function(){g(function(){p.send(JSON.stringify(e))},e.hasOwnProperty("authorize")&&n)})},h=function(){return window.localStorage.getItem("config.app_id")||l.app_id},y=function(){var e=window.localStorage.getItem("config.server_url"),t=e?"wss://"+e+"/websockets/v3":l.wsUrl;return t},v=function(e){if(_.isEmpty(e))return null;var t=/(binaryqa\d{2}.com)/.exec(e);if(!_.isEmpty(t)){var n="www."+t[1],a=_.find(l.qaMachinesCertFP,function(e){return e.url.indexOf(n)>-1});if(a)return a.fp}return l.serverCertFP},b=function k(e){e=e||!1;var t=localStorage.language||"en";if(!p||3===p.readyState||e){p&&0!==p.readyState&&p.close(),p=null,i.isLoggedin=!1;var a=function(){n.$broadcast("connection:error",!0)},o=function(){p=new WebSocket(c+"?app_id="+r+"&l="+t),p.onopen=function(){var e=s.getDefaultToken();if(e){var t={authorize:e,passthrough:{type:"reopen-connection"}};f(t)}console.log("socket is opened"),n.$broadcast("connection:ready")},p.onmessage=function(e){C(e)},p.onclose=function(e){console.log("socket is closed ",e),k(),console.log("socket is reopened"),i.isLoggedin=!1,n.$broadcast("connection:reopened")},p.onerror=function(e){3===e.target.readyState&&n.$broadcast("connection:error"),i.isLoggedin=!1}},r=h(),c=y(),l=v(c);window.plugins&&window.plugins.sslCertificateChecker?window.plugins.sslCertificateChecker.check(o,a,"https://"+c.slice(6),l):o()}};n.$on("language:updated",function(){b(!0),sessionStorage.removeItem("asset_index"),sessionStorage.removeItem("active_symbols"),S.sendRequestFor.assetIndex(),S.sendRequestFor.symbols()});var S={};S.authenticate=function(e,t){e&&"<not shown>"!==e?i.authorizeToken=e:e=i.authorizeToken,t=t,i.isLoggedin=!1;var n={authorize:e};m(n,t),f(n)},S.logout=function(e){S.sendRequestFor.logout(),localStorage.removeItem("accounts"),S.sendRequestFor.forgetProposals(),sessionStorage.active_symbols=null,sessionStorage.asset_index=null,i.isRealityChecked=!1,i.isChangedAccount=!1,i.isPopupOpen=!1,i.isLoggedin=!1,i.authorizeToken="",sessionStorage.removeItem("start"),sessionStorage.removeItem("_interval"),sessionStorage.removeItem("realityCheckStart"),localStorage.removeItem("termsConditionsVersion"),localStorage.removeItem("landingCompanyObject"),localStorage.removeItem("landingCompany"),localStorage.removeItem("landingCompanyName"),i.profitTableRefresh=!0,i.statementRefresh=!0,sessionStorage.removeItem("countryParams"),S.closeConnection(),i.passwordChanged=!1,i.limitsChange=!1,i.realityCheckLogin=!1,i.hasAuthenticateMessage=!1,i.hasRestrictedMessage=!1,i.hasMaxTurnoverMessage=!1,i.hasCountryMessage=!1,i.hasTnCMessage=!1,i.hasTaxInfoMessage=!1,i.hasFinancialAssessmentMessage=!1,i.hasAgeVerificationMessage=!1,i.hasCountryMessage=!1,i.hasCurrencyMessage=!1,i.checkedAccountStatus=!1,i.accountCurrencyChanged=!1,i.selectedCurrency=!1,u.emptyNotices(),i.checkingUpgradeDone=!1,i.loginFinished=!1,i.isMaltainvest=!1,e?o(["alert.error","alert.ok"]).then(function(t){r.displayAlert(t["alert.error"],e,t["alert.ok"],function(){a.go("signin")})}):a.go("signin")},S.sendRequestFor={websiteStatus:function(e){e=e||!1;var t={website_status:1,subscribe:e?1:0};f(t)},symbols:function(){var e={active_symbols:"brief"};f(e)},assetIndex:function(){var e={asset_index:1};f(e)},currencies:function(){var e={payout_currencies:1};f(e)},contractsForSymbol:function(e){var t={contracts_for:e};f(t)},ticksForSymbol:function(e){var t={ticks:e};f(t)},forgetAll:function(e){var t={forget_all:e};f(t)},forgetStream:function(e){var t={forget:e};f(t)},forgetProposals:function(e){var t={forget_all:"proposal",req_id:e};f(t)},forgetTicks:function(){var e={forget_all:"ticks"};f(e)},proposal:function(e){f(e)},purchase:function(e,t){var n={buy:e,price:t||0};f(n)},balance:function(){var e={balance:1,subscribe:1};f(e)},portfolio:function(){var e={portfolio:1};f(e)},profitTable:function(e,t){var n={profit_table:1};m(n,e),f(n)},ticksHistory:function(e){e.ticks_history&&f(e)},openContract:function(e,t){var n={};n.proposal_open_contract=1,e&&(n.contract_id=e),m(n,t),f(n)},sellExpiredContract:function(){var e={sell_expired:1};f(e)},landingCompanyDetails:function(e){var t={landing_company_details:e};f(t)},realityCheck:function(){var e={reality_check:1};f(e)},accountOpening:function(e){var t={verify_email:e,type:"account_opening"};f(t)},residenceListSend:function(){var e={residence_list:1};f(e)},newAccountVirtual:function(e,t,n){var a={new_account_virtual:"1",verification_code:e,client_password:t,residence:n};f(a)},accountSetting:function(){var e={get_settings:1};f(e)},setAccountSettings:function(e){e.set_settings=1,f(e)},landingCompanySend:function(e,t){var n={landing_company:e};t&&(n.req_id=t),f(n)},statesListSend:function(e){var t={states_list:e};f(t)},createRealAccountSend:function(e){var t={new_account_real:"1"};m(t,e),f(t)},createMaltainvestAccountSend:function(e){var t={new_account_maltainvest:"1"};m(t,e),f(t)},statement:function(e){var t={statement:1};m(t,e),f(t)},ping:function(){var e={ping:1};f(e)},setSelfExclusion:function(e){var t={set_self_exclusion:1};m(t,e),f(t)},getSelfExclusion:function(){var e={get_self_exclusion:1};f(e)},TAndCApprovalSend:function(){var e={tnc_approval:1};f(e)},changePassword:function(e,t){var n={change_password:"1",old_password:e,new_password:t};f(n)},getFinancialAssessment:function(){var e={get_financial_assessment:1};f(e)},setFinancialAssessment:function(e){var t={set_financial_assessment:1};m(t,e),f(t)},tradingTimes:function(e){var t={trading_times:e};f(t)},getAccountStatus:function(){var e={get_account_status:1};f(e)},accountLimits:function(){var e={get_limits:1};f(e)},logout:function(){var e={logout:1};f(e)},mt5LoginList:function(){var e={mt5_login_list:1};f(e)},mt5GetSettings:function(e){var t={mt5_get_settings:1,login:e};f(t)},setAccountCurrency:function(e){var t={set_account_currency:e};f(t)},serverTime:function(){var e={time:1};f(e)}},S.closeConnection=function(){p&&p.close()};var C=function(t){var a=JSON.parse(t.data);if(a){if(a.error&&["InvalidToken","AccountDisabled","DisabledClient"].indexOf(a.error.code)>-1)return S.logout(a.error.message),void e.hide();var o=a.msg_type;switch(o){case"authorize":if(a.authorize){a.echo_req.authorize=i.authorizeToken,a.authorize.token=a.echo_req.authorize,window._trackJs.userId=a.authorize.loginid,i.isLoggedin=!0,i.virtuality=a.authorize.is_virtual,localStorage.landingCompanyName=a.authorize.landing_company_fullname,localStorage.landingCompany=a.authorize.landing_company_name,i.scopes=a.authorize.scopes,i.upgradeableLandingCompanies=a.authorize.upgradeable_landing_companies||[],i.isMaltainvest=c.isLandingCompanyOf("maltainvest",a.authorize.landing_company_name);var l=!_.isEmpty(localStorage.getItem("accounts"))&&JSON.parse(localStorage.getItem("accounts")),u=a.authorize.account_list;l&&l.length&&u&&(l.forEach(function(e,t){var n=_.find(u,function(t){return t.loginid===e.id});e.country=a.authorize.country||"",l[t]=_.assign(e,n)}),localStorage.setItem("accounts",JSON.stringify(l))),_.isEmpty(a.authorize.currency)?S.sendRequestFor.currencies():sessionStorage.currency=a.authorize.currency,i.loginFinished=!0,n.$broadcast("authorize",a.authorize,a.req_id,a.passthrough)}else{var p="Unexpected Error!";a.hasOwnProperty("error")&&(s.removeToken(a.echo_req.authorize),p=a.error.message),n.$broadcast("authorize",!1,p),i.isLoggedin=!1}break;case"website_status":if(a.hasOwnProperty("website_status")){i.currenciesConfig=a.website_status.currencies_config,n.$broadcast("website_status",a.website_status),localStorage.termsConditionsVersion=a.website_status.terms_conditions_version;var m=a.website_status.supported_languages;m.length&&(d.setSupportedLanguages(a.website_status.supported_languages),n.$broadcast("supported_languages"))}else a.hasOwnProperty("error")&&trackJs.track(a.error.code+": "+a.error.message);break;case"active_symbols":var g=a.active_symbols,f=_.groupBy(g,"market"),h={};Object.keys(f).forEach(function(e,t){f.hasOwnProperty(e)&&1===f[e][0].exchange_is_open&&(h[e]=f[e])}),sessionStorage.active_symbols=JSON.stringify(h),sessionStorage.all_active_symbols=JSON.stringify(a.active_symbols),n.$broadcast("symbols:updated",h);break;case"asset_index":sessionStorage.asset_index=JSON.stringify(a.asset_index),n.$broadcast("assetIndex:updated");break;case"payout_currencies":n.$broadcast("currencies",a.payout_currencies);break;case"proposal":a.proposal?n.$broadcast("proposal",a.proposal,a.req_id):a.error&&n.$broadcast("proposal:error",a.error,a.req_id);break;case"contracts_for":var y=a.echo_req.contracts_for;if(a.error){trackJs.track(a.error.code+": "+a.error.message+" - "+y);break}var v=_.groupBy(a.contracts_for.available,"contract_category");n.$broadcast("symbol",v);break;case"buy":a.error?(n.$broadcast("purchase:error",a.error),r.displayError(a.error.message)):n.$broadcast("purchase",a);break;case"balance":a.error||n.$broadcast("balance",a.balance);break;case"tick":n.$broadcast("tick",a);break;case"history":n.$broadcast("history",a);break;case"candles":n.$broadcast("candles",a);break;case"ohlc":n.$broadcast("ohlc",a);break;case"portfolio":n.$broadcast("portfolio",a.portfolio);break;case"profit_table":a.profit_table?n.$broadcast("profit_table:update",a.profit_table,a.req_id):a.error&&n.$broadcast("profit_table:error",a.error.message);break;case"sell_expired":n.$broadcast("sell:expired",a.sell_expired);break;case"proposal_open_contract":n.$broadcast("proposal:open-contract",a.proposal_open_contract,a.req_id);break;case"landing_company_details":a.landing_company_details?n.$broadcast("landing_company_details",a.landing_company_details):a.error&&n.$broadcast("landing_company_details:error",a.error.message);break;case"reality_check":n.$broadcast("reality_check",a.reality_check);break;case"verify_email":a.verify_email?n.$broadcast("verify_email",a.verify_email):a.error&&n.$broadcast("verify_email:error",a.error.details);break;case"residence_list":n.$broadcast("residence_list",a.residence_list);break;case"new_account_virtual":a.new_account_virtual?n.$broadcast("new_account_virtual",a.new_account_virtual):a.error&&n.$broadcast("new_account_virtual:error",a.error);break;case"get_settings":a.get_settings?n.$broadcast("get_settings",a.get_settings):a.error&&n.$broadcast("get_settings:error",a.error.message);break;case"landing_company":a.landing_company?(localStorage.setItem("landingCompanyObject",JSON.stringify(a.landing_company)),n.$broadcast("landing_company",a.landing_company,a.req_id)):a.error&&n.$broadcast("landing_company:error",a.error.message);break;case"states_list":n.$broadcast("states_list",a.states_list);break;case"new_account_real":a.new_account_real?n.$broadcast("new_account_real",a.new_account_real):a.error&&n.$broadcast("new_account_real:error",a.error);break;case"new_account_maltainvest":a.new_account_maltainvest?n.$broadcast("new_account_maltainvest",a.new_account_maltainvest):a.error&&n.$broadcast("new_account_maltainvest:error",a.error);break;case"statement":a.statement?n.$broadcast("statement:update",a.statement,a.req_id):a.error&&n.$broadcast("statement:error",a.error.message);break;case"get_self_exclusion":a.get_self_exclusion?n.$broadcast("get-self-exclusion",a.get_self_exclusion):a.error&&n.$broadcast("get-self-exclusion:error",a.error.message);break;case"set_self_exclusion":a.set_self_exclusion?n.$broadcast("set-self-exclusion",a.set_self_exclusion):a.error&&n.$broadcast("set-self-exclusion:error",a.error.message);break;case"set_settings":a.set_settings?n.$broadcast("set-settings",a.set_settings):a.error&&n.$broadcast("set-settings:error",a.error);break;case"tnc_approval":a.tnc_approval?n.$broadcast("tnc_approval",a.tnc_approval):a.error&&n.$broadcast("tnc_approval:error",a.error);break;case"change_password":a.change_password?n.$broadcast("change_password:success",a.change_password):a.error&&n.$broadcast("change_password:error",a.error);break;case"get_financial_assessment":a.get_financial_assessment?n.$broadcast("get_financial_assessment:success",a.get_financial_assessment):a.error&&n.$broadcast("get_financial_assessment:error",a.error);break;case"set_financial_assessment":a.set_financial_assessment?n.$broadcast("set_financial_assessment:success",a.set_financial_assessment):a.error&&n.$broadcast("set_financial_assessment:error",a.error);break;case"get_account_status":a.get_account_status?n.$broadcast("get_account_status",a.get_account_status):a.error&&trackJs.track(a.error.code+": "+a.error.message);break;case"get_limits":a.get_limits?n.$broadcast("get_limits",a.get_limits):a.error&&n.$broadcast("get_limits:error",a.error);break;case"trading_times":a.trading_times?n.$broadcast("trading_times:success",a.trading_times):a.error&&n.$broadcast("trading_times:error",a.error);break;case"forget_all":n.$broadcast("forget_all",a.req_id);break;case"mt5_login_list":a.mt5_login_list&&(n.$broadcast("mt5_login_list:success",a.mt5_login_list),localStorage.setItem("mt5LoginList",a.mt5_login_list));break;case"mt5_get_settings":a.mt5_get_settings&&n.$broadcast("mt5_get_settings:success",a.mt5_get_settings);break;case"set_account_currency":a.set_account_currency&&1===a.set_account_currency?n.$broadcast("set_account_currency:success",a.echo_req.set_account_currency):a.error&&n.$broadcast("set_account_currency:error",a.error);break;case"time":a.time?n.$broadcast("time:success",a.time):a.error&&n.$broadcast("time:error",a.error)}}};return S.getServerURL=localStorage.getItem("config.server_url")||l.serverUrl,S}]),function(){function e(){}angular.module("binary.pages.authentication.controllers").controller("AuthenticationController",e),e.$inject=[]}(),function(){function e(e,t,n,a,o,r){var i=this;i.validation=r,i.passwordEqual=!1,i.newPasswordHasError=!1,i.oldPasswordHasError=!1,i.hideInput=!1,i.hideChangedPasswordText=!0,i.checkPassword=function(){e.$applyAsync(function(){i.passwordEqual=i.newPassword===i.repeatNewPassword})},i.changePass=function(){n.sendRequestFor.changePassword(i.currentPassword,i.newPassword),i.newPasswordHasError=!1,i.oldPasswordHasError=!1,i.passwordUpdating=!0},e.$on("change_password:success",function(o,r){a.passwordChanged=!0,i.passwordUpdating=!1,e.$applyAsync(function(){i.hideInput=!0,i.hideChangedPasswordText=!1}),t(function(){n.logout()},5e3)}),e.$on("change_password:error",function(t,n){i.passwordUpdating=!1,n.hasOwnProperty("details")?(n.details.hasOwnProperty("new_password")&&e.$applyAsync(function(){i.newPasswordHasError=!0,i.newPasswordError=n.details.new_password}),n.details.hasOwnProperty("old_password")&&e.$applyAsync(function(){i.oldPasswordHasError=!0,i.oldPasswordError=n.details.old_password})):o.displayError(n.message)})}angular.module("binary.pages.change-password.controllers").controller("ChangePasswordController",e),e.$inject=["$scope","$timeout","websocketService","appStateService","alertService","validationService"]}(),function(){function e(){var e=this;e.data={},e.data.selectedCountry="australia",e.data.countries={australia:{phone:{phone_1:{num:"+61 (02) 8294 5448"},phone_2:{num:"1800 093570",toll_free:!0}}},canada:{phone:{phone_1:{num:"+1 (450) 823 1002"}}},indonesia:{phone:{phone_1:{num:"0018030113641",toll_free:!0}}},ireland:{phone:{phone_1:{num:"+353 (0) 76 888 7500"},phone_2:{num:"1800931084",toll_free:!0}}},poland:{phone:{phone_1:{num:"+48 58 881 00 02"}}},russia:{phone:{phone_1:{num:"8 10 8002 8553011",toll_free:!0}}},united_kingdom:{phone:{phone_1:{num:"+44 (0) 1666 800042"},phone_2:{num:"0800 011 9847",toll_free:!0}}}}}angular.module("binary.pages.contact.controllers").controller("ContactController",e),e.$inject=[]}(),function(){function e(e,t,n,a,o,r){var i=this,s=localStorage.getItem("landingCompany");i.isFinancial=o.isAccountOfType("financial",s),i.errors={},i.options=r,i.disableUpdateButton=!1,i.notAnyChanges=!1,i.isDataLoaded=!1,i.data={education_level:"",employment_industry:"",estimated_worth:"",income_source:"",employment_status:"",net_income:"",occupation:"",source_of_wealth:"",account_turnover:""};var c={forex_trading_experience:"",forex_trading_frequency:"",other_instruments_trading_experience:"",other_instruments_trading_frequency:"",binary_options_trading_experience:"",binary_options_trading_frequency:"",cfd_trading_experience:"",cfd_trading_frequency:""};e.$on("get_financial_assessment:success",function(t,n){i.financialAssessment=_.clone(n),_.forEach(i.data,function(e,t){return i.data[t]=n[t]}),i.isDataLoaded=!0,e.$apply()}),i.submitFinancialAssessment=function(){i.errors={},i.notAnyChanges=!_.some(i.data,function(e,t){return i.financialAssessment[t]!==i.data[t]}),i.notAnyChanges||(i.disableUpdateButton=!0,n.sendRequestFor.setFinancialAssessment(i.data))},e.$on("set_financial_assessment:success",function(e,o){o&&a.displayAlert(t.instant("financial-assessment.success"),t.instant("financial-assessment.success_message")),n.sendRequestFor.getFinancialAssessment(),i.disableUpdateButton=!1}),e.$on("set_financial_assessment:error",function(t,n){i.disableUpdateButton=!1,n.hasOwnProperty("details")?e.$applyAsync(function(){i.errors=n.details}):n.code&&a.displayError(n.message)});var l=function(){i.isFinancial&&_.assign(i.data,c),n.sendRequestFor.getFinancialAssessment()};l()}angular.module("binary.pages.financial-assessment.controllers").controller("FinancialAssessmentController",e),e.$inject=["$scope","$translate","websocketService","alertService","clientService","financialInformationOptions"]}(),function(){function e(e,t,n,a,o){e.$on("authorize",function(e,n){n?setTimeout(function(){t.go("trade")},1e3):t.go("signin")});var r=function(){a.google.trackView("Home"),n.hasDefault()?o.isLoggedin?t.go("trade"):n.validate():(n.removeAll(),t.go("signin"))};r()}angular.module("binary.pages.home.controllers").controller("HomeController",e),e.$inject=["$scope","$state","accountService","analyticsService","appStateService"];
}(),function(){function e(e,t,n,a,o,r){var i=this;i.limits={},i.isDataLoaded=!1;var s=a.getDefault();i.loginid=s.id;var c=s.landing_company_name;i.currency=s.currency&&s.currency.length?s.currency:r.landingCompanyValue(c,"legal_default_currency");var l=function(e,t){return r.isLandingCompanyOf(e,t)};n.sendRequestFor.accountLimits(),e.$on("get_limits",function(t,n){e.$applyAsync(function(){i.limits=n,99999999===i.limits.lifetime_limit&&99999999===i.limits.num_of_days_limit?(i.fullyAuthenticated=!0,i.mxAccount=!1,i.crAccount=!1,i.otherAccount=!1):l("iom",c)?(i.mxAccount=!0,i.fullyAuthenticated=!1,i.crAccount=!1,i.otherAccount=!1):l("costarica",c)||l("svg",c)?(i.crAccount=!0,i.fullyAuthenticated=!1,i.mxAccount=!1,i.otherAccount=!1):(i.otherAccount=!0,i.fullyAuthenticated=!1,i.mxAccount=!1,i.crAccount=!1)}),i.isDataLoaded=!0}),e.$on("authorize",function(){o.limitsChange&&(o.virtuality?t.go("trade"):t.reload(),o.limitsChange=!1)}),i.getLanguageId=function(e){return"limits."+e.replace(/[\s]/g,"_").toLowerCase()}}angular.module("binary.pages.limits.controllers").controller("LimitsController",e),e.$inject=["$scope","$state","websocketService","accountService","appStateService","clientService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l,u,d,p,m){var g=this;g.errors={},g.settingTaxResidence=[],g.disableUpdatebutton=!1,g.touchedTaxResidence=!1,g.hasResidence=!1,g.hasPOB=!1,g.hasCitizen=!1;var f=!1;g.showRiskDisclaimer=!1,g.tncAccepted=!1;var h=0,y=c.getDefault().landing_company_name,v=u.isLandingCompanyOf("virtual",y),b=c.getAll(),S=s.upgradeableLandingCompanies;g.hasIOM=_.indexOf(S,"iom")>-1||u.hasAccountOfLandingCompany(b,"iom"),g.receivedSettings=!1,g.options=_.merge(m,p),g.validation=d;var C="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/terms-and-conditions.html",w="https://ec.europa.eu/taxation_customs/tin/tinByCountry.html";g.data={salutation:"",first_name:"",last_name:"",date_of_birth:"",residence:"",place_of_birth:"",citizen:"",address_line_1:"",address_line_2:"",address_city:"",address_state:"",address_postcode:"",phone:"",forex_trading_experience:"",forex_trading_frequency:"",binary_options_trading_experience:"",binary_options_trading_frequency:"",cfd_trading_experience:"",cfd_trading_frequency:"",other_instruments_trading_experience:"",other_instruments_trading_frequency:"",employment_industry:"",occupation:"",education_level:"",income_source:"",net_income:"",estimated_worth:"",tax_residence:"",tax_identification_number:"",account_turnover:"",account_opening_reason:"",source_of_wealth:"",employment_status:"",client_type:""},v&&(g.data.secret_question="",g.data.secret_answer="");var k=function(e){return _.find(g.residenceList,function(t){return t.value===e}).phone_idd};o.fromTemplateUrl("js/pages/maltainvest-account-opening/tax-residence.modal.html",{scope:e}).then(function(e){g.modalCtrl=e}),g.closeModal=function(){g.modalCtrl&&g.modalCtrl.hide()},e.$on("modal.hidden",function(){if(!f){var e=_.split(g.data.tax_residence,",");_.filter(g.residenceList,function(t,n){_.indexOf(e,t.value)>-1?g.residenceList[n].checked=!0:g.residenceList[n].checked=!1})}f=!1}),g.showTaxResidenceItems=function(){return g.modalCtrl.show()},e.$on("residence_list",function(e,t){g.residenceList=t,i.sendRequestFor.accountSetting()}),e.$on("states_list",function(t,n){e.$applyAsync(function(){g.statesList=n})}),e.$on("get_settings",function(t,n){e.$applyAsync(function(){if(g.receivedSettings=!0,_.forEach(g.data,function(e,t){n[t]&&(g.data[t]=n[t])}),n.date_of_birth&&(g.data.date_of_birth=new Date(1e3*n.date_of_birth)),n.place_of_birth&&(g.hasPOB=!0),n.citizen&&(g.hasCitizen=!0),n.country_code){var e=n.country_code;if(g.hasResidence=!0,g.data.residence=e,i.sendRequestFor.statesListSend(e),!n.phone){var t=k(e);g.data.phone=t?"+"+t:""}}if(g.data.tax_residence){g.settingTaxResidence=_.words(g.data.tax_residence),g.residenceList=_.map(g.residenceList,function(e){return g.settingTaxResidence.indexOf(e.value)>-1&&(e.checked=!0),e});var a=_.filter(g.residenceList,function(e){return e.checked});g.selectedTaxResidencesName=_.map(a,function(e){return e.text}).join(", ")}})}),g.setTaxResidence=function(){g.touchedTaxResidence=!0;var e=_.filter(g.residenceList,function(e){return e.checked});g.selectedTaxResidencesName=_.map(e,function(e){return e.text}).join(", "),g.data.tax_residence=_.map(e,function(e){return e.value}).join(","),g.closeModal()},g.submitAccountOpening=function(){g.disableUpdatebutton=!0,g.error={};var e=_.clone(g.data);e.client_type=g.client_type?"professional":"retail",e.accept_risk=h,e.date_of_birth=g.data.date_of_birth?n("date")(g.data.date_of_birth,"yyyy-MM-dd"):"",e=_.forEach(e,function(t,n){return e[n]=_.trim(t),e[n]}),i.sendRequestFor.createMaltainvestAccountSend(e)},g.acceptRisk=function(){h=1,g.submitAccountOpening()},g.declineRisk=function(){h=0,t.go("trade")},e.$on("new_account_maltainvest:error",function(t,n){g.disableUpdatebutton=!1,n.hasOwnProperty("details")?e.$apply(function(){g.errors=n.details}):n.code&&"show risk disclaimer"===n.code?e.$applyAsync(function(){g.showRiskDisclaimer=!0,r.scrollTop(!0)}):n.code&&l.displayError(n.message)}),e.$on("new_account_maltainvest",function(e,t){g.disableUpdatebutton=!1;var n=t.oauth_token;s.loginFinished=!1,i.authenticate(n),s.newAccountAdded=!0,c.addedAccount=n}),g.openTermsAndConditions=function(){window.open(C,"_system")},g.openProfessionalClientInformation=function(){l.showProfessioanlClientInformation(e)},g.openPEPInformation=function(){l.showPEPInformation(e)},g.openTaxInformation=function(){l.showTaxInformation(e)},g.goToTINSite=function(){window.open(w,"_blank")},g.showConfirmProfessionalClient=function(){g.client_type&&l.displayProfessionalClientConfirmation(a.instant("professional-client-confirmation.professional_clients"),"information-popup",e,"js/share/templates/professional-client/professional-client-confirmation.template.html",[{text:a.instant("professional-client-confirmation.decline"),onTap:function(){return g.client_type=0}},{text:a.instant("professional-client-confirmation.accept"),type:"button-positive",onTap:function(){return!0}}])};var T=function(){g.error={},i.sendRequestFor.residenceListSend(),g.readOnly=!v};T()}angular.module("binary.pages.maltainvest-account-opening").controller("MaltainvestAccountOpeningController",e),e.$inject=["$scope","$state","$filter","$translate","$ionicModal","$ionicScrollDelegate","websocketService","appStateService","accountService","alertService","clientService","validationService","accountOptions","financialInformationOptions"]}(),function(){function e(e,t,n,a,o,r,i){var s=this;s.isLoaded=!1,s.hasAccount=!1,s.accountsList={},s.hasMTAccess=!1,s.canUpgrade=!1,s.showUpgradeToRealButton=!1;var c={},l={},u={},d=JSON.parse(localStorage.getItem("landingCompanyObject")),p={financial:{standard:{mt5_account_type:"standard",max_leverage:1e3,title:t.instant("mt.standard")},advanced:{mt5_account_type:"advanced",max_leverage:300,title:t.instant("mt.advanced")},mamm:{mt5_account_type:"mamm_advanced",max_leverage:300,title:t.instant("mt.mam_advanced"),is_real_only:1}},gaming:{volatility:{mt5_account_type:"",max_leverage:500,title:t.instant("mt.volatility_indices")},mamm:{mt5_account_type:"mamm",max_leverage:500,title:t.instant("mt.mam_volatility_indices"),is_real_only:1}}},m=function(e){_.forEach(["demo","real"],function(t){_.forEach(_.keys(p[e]),function(n){var a=p[e][n],o=a.mt5_account_type,r=a.title,i="demo"===t;i&&a.is_real_only||(l[t+"_"+u[e]+(o?"_"+o:"")]={title:r,isDemo:i,mt5AccountType:o,accountType:i?"demo":e,maxLeverage:a.max_leverage,shortTitle:a.title})})})},g=function(e){return e?e.replace("\\","_").replace(/_(\d+|master)/,""):""},f=function(){return o.sendRequestFor.mt5LoginList()},h=function(t){var n=_.filter(t,function(e){return e.group&&g(e.group)in l});_.forEach(n,function(e){if(e){var t=g(e.group);l[t].info=e;var n=e;n.isDemo=l[t].isDemo,n.shortTitle=l[t].shortTitle,c[n.login]=n}}),e.$applyAsync(function(){s.canUpgrade=!!_.find(l,function(e){return!e.hasOwnProperty("info")}),s.accountsList=r.groupMT5Accounts(c),s.isLoaded=!0,s.hasAccount=!_.isEmpty(s.accountsList)})},y=function(){var e=!1;return _.forEach(_.keys(p),function(t){var n="mt_"+t+"_company";d.hasOwnProperty(n)&&(u[t]=d[n].shortcode,u[t]&&(e=!0,m(t)))}),e};e.$on("mt5_login_list:success",function(e,t){h(t)}),s.createMTAccount=function(){window.open("https://www.binary.com/en/user/metatrader.html","_system")},s.openMT5=function(e){if(e=e||"_blank",["android","ios"].indexOf(ionic.Platform.platform())>-1)return void n.go("mt5-web");var t="https://trade.mql5.com/trade?servers=Binary.com-Server&trade_server=Binary.com-Server";window.open(t,e)},s.redirectToUpgrade=function(){var e=i.upgrade.upgradeLink;n.go(e)};var v=function(){if(y()){var t=a.getAll();s.hasRealAccount=!!_.find(t,function(e){return _.indexOf(["malta","costarica","svg","iom","maltainvest"],e.landing_company_name)>-1}),!s.hasRealAccount&&i.upgrade&&i.upgrade.upgradeLink&&(s.showUpgradeToRealButton=!0),e.$applyAsync(function(){s.hasMTAccess=!0}),f()}else e.$applyAsync(function(){s.hasMTAccess=!1,s.isLoaded=!0})};v()}angular.module("binary.pages.meta-trader.controllers").controller("MetaTraderController",e),e.$inject=["$scope","$translate","$state","accountService","websocketService","clientService","appStateService"]}(),function(){function e(e,t){var n=this;n.url="https://trade.mql5.com/trade?servers=Binary.com-Server&trade_server=Binary.com-Server&login=",n.url+=t.id,n.url=e.trustAsResourceUrl(n.url)}angular.module("binary.pages.meta-trader.controllers").controller("MT5WebController",e),e.$inject=["$sce","$stateParams"]}(),function(){function e(e,t){var n=this;e.$watch(function(){return t.notices},function(){n.notices=t.notices})}angular.module("binary.pages.notifications.controllers").controller("NotificationsController",e),e.$inject=["$scope","notificationService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l,u){var d=this;d.profile={},d.errors={},d.taxInfoIsOptional=!1,d.validation=c,d.isDataLoaded=!1,d.notAnyChanges=!1,d.disableUpdateButton=!1,d.hasResidence=!1,d.hasPOB=!1,d.hasCitizen=!1,d.hasAccountOpeningReason=!1,d.touchedTaxResidence=!1,d.settingTaxResidence=[],d.options=u;var p=!1,m=s.getDefault(),g=m.landing_company_name,f=s.getAll(),h={address_line_1:"",address_line_2:"",address_city:"",address_state:"",address_postcode:"",phone:"",tax_identification_number:"",tax_residence:"",place_of_birth:"",citizen:"",account_opening_reason:"",email_consent:""};a.fromTemplateUrl("js/pages/profile/tax-residence.modal.html",{scope:e}).then(function(e){d.modalCtrl=e});var y=function(e,t){return l.isLandingCompanyOf(e,t)},v=function(e,t){return l.hasAccountOfLandingCompany(e,t)},b=function(){return i.sendRequestFor.residenceListSend()},S=function(){return i.sendRequestFor.accountSetting()},C=function(e){return _.find(d.residenceList,function(t){return t.value===e}).phone_idd};d.init=function(){d.isVirtualAccount=y("virtual",g),d.hasIOM=v(f,"iom");var e=v(f,"maltainvest");d.requireCitizen=y("malta",g)||y("maltainvest",g)||y("iom",g),d.taxInfoIsOptional=!y("maltainvest",g)&&!e,b()},e.$on("residence_list",function(t,n){e.$applyAsync(function(){d.residenceList=n,S()})});var w=function(t){if(e.$applyAsync(function(){d.isDataLoaded=!0}),d.isVirtualAccount){if(d.profile=t,t.country_code){var n=t.country_code;d.hasResidence=!0,d.profile.residence=n,n!==m.country&&i.authenticate(m.token)}d.profile.email_consent=1===t.email_consent}else{if(d.profile=t,t.date_of_birth&&(d.profile.date_of_birth=new Date(1e3*t.date_of_birth)),t.place_of_birth&&(d.hasPOB=!0),t.citizen&&(d.hasCitizen=!0),t.country_code){var a=t.country_code;if(d.hasResidence=!0,d.profile.residence=a,i.sendRequestFor.statesListSend(a),!t.phone){var o=C(a);d.profile.phone=o?"+"+o:""}}if(d.profile.tax_residence){d.settingTaxResidence=_.words(d.profile.tax_residence),d.residenceList=_.map(d.residenceList,function(e){return d.settingTaxResidence.indexOf(e.value)>-1&&(e.checked=!0),e});var r=_.filter(d.residenceList,function(e){return e.checked});d.selectedTaxResidencesName=_.map(r,function(e){return e.text}).join(", ")}d.profile.email_consent=1===t.email_consent,d.profile.account_opening_reason&&(d.hasAccountOpeningReason=!0)}};e.$on("get_settings",function(e,t){d.getSettings=_.clone(t),w(t)}),e.$on("states_list",function(t,n){e.$applyAsync(function(){d.states=n})}),e.$on("set-settings",function(e,t){d.disableUpdateButton=!1,d.notAnyChanges=!1,t&&(n(["profile.success","profile.success_message"]).then(function(e){o.displayAlert(e["profile.success"],e["profile.success_message"])}),S())}),e.$on("set-settings:error",function(t,n){d.disableUpdatebutton=!1,!d.isVirtualAccount&&n.hasOwnProperty("details")?e.$apply(function(){d.errors=n.details}):n.code&&o.displayError(n.message)}),d.closeModal=function(){d.modalCtrl&&(d.modalCtrl.hide(),r.modalIsOpen=!1)},e.$on("modal.hidden",function(){if(!p){var e=_.split(d.profile.tax_residence,",");_.filter(d.residenceList,function(t,n){_.indexOf(e,t.value)>-1?d.residenceList[n].checked=!0:d.residenceList[n].checked=!1})}p=!1}),d.showTaxResidenceItems=function(){return d.modalCtrl.show()},d.setTaxResidence=function(){d.touchedTaxResidence=!0;var e=_.filter(d.residenceList,function(e){return e.checked});d.selectedTaxResidencesName=_.map(e,function(e){return e.text}).join(", "),d.profile.tax_residence=_.map(e,function(e){return e.value}).join(","),p=!0,d.closeModal()},d.updateProfile=function(){d.disableUpdatebutton=!0,d.notAnyChanges=!0,d.error={};var e={};d.isVirtualAccount?(e={residence:d.hasResidence?d.getSettings.country_code:d.profile.country,email_consent:d.profile.email_consent?1:0},(e.residence!==d.getSettings.country_code||e.email_consent!==d.getSettings.email_consent)&&(d.notAnyChanges=!1),d.notAnyChanges||(d.disableUpdateButton=!0,i.sendRequestFor.setAccountSettings(e))):(_.forEach(h,function(t,n){d.profile[n]&&"email_consent"!==n&&(e[n]=d.profile[n]),"email_consent"===n&&(e[n]=d.profile[n]?1:0)}),_.forEach(e,function(t,n){return _.isString(e[n])&&(e[n]=_.trim(t)),e[n]!==d.getSettings[n]&&(d.notAnyChanges=!1),e[n]}),d.notAnyChanges||(d.disableUpdateButton=!0,i.sendRequestFor.setAccountSettings(e)))},d.goToContact=function(){t.go("contact")},d.init()}angular.module("binary.pages.profile.controllers").controller("ProfileController",e),e.$inject=["$scope","$state","$translate","$ionicModal","alertService","appStateService","websocketService","accountService","validationService","clientService","accountOptions"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l){var u=this;u.data={},u.noTransaction=!1,u.noMore=!1,u.ios=ionic.Platform.isIOS(),u.android=ionic.Platform.isAndroid(),u.goToTopButton=!1,u.firstCompleted=!1,u.jumpToDateInputShow=!1,u.hasError=!1,u.dateChanged=!1,u.isItemShown=!1;var d=i.app_id,p=!1,m=!1,g=!1;u.fractionalDigits=2;var f=function(){if(l.isLoggedin){u.currency=sessionStorage.getItem("currency")||"USD";var e=l.currenciesConfig||{};u.fractionalDigits=!_.isEmpty(e)&&e[u.currency]?e[u.currency].fractional_digits:2,(l.profitTableRefresh||m)&&(o.remove(),b(),u.jumpToDateInputShow=!1,u.firstCompleted=!1,g=!1,u.hasError=!1,u.filteredTransactions=[],u.noTransaction=!1,m=!1,s.completedGroup=!0,l.profitTableRefresh=!1,l.isProfitTableSet=!1,h())}};e.$on("$stateChangeSuccess",function(e,t,n,a,o){u.lastPage=a.name,p=!0,u.thisPage=t.name,"transaction-detail"!==u.lastPage&&"profit-table"===u.thisPage&&(b(),u.firstCompleted=!1,m=!0,u.jumpToDateInputShow=!1,f())}),e.$on("authorize",function(e,t){l.profitTableRefresh&&f()}),u.delayedLoad=function(){n(h,50)};var h=function(){s.completedGroup?s.completedGroup&&(s.currentPage+=1,y()):C()},y=function(){l.isProfitTableSet?l.isProfitTableSet&&p&&"transaction-detail"===u.lastPage?(p=!1,u.lastPage="",v()):l.isProfitTableSet&&u.dateChanged&&s.completedGroup?(u.transactions=[],u.batchedTransaction=[],u.filteredTransactions=[],u.dateChanged=!1,s.currentPage=0,s.batchNum=0,s.batchLimit=0,s.completedGroup=!1,v(),u.goTop()):l.isProfitTableSet&&!u.dateChanged&&s.completedGroup?(u.transactions=[],s.completedGroup=!1,v()):u.dateChanged||(v(),e.$applyAsync(function(){u.noMore=!1})):(l.isProfitTableSet=!0,s.dateType="allTime",u.jumpToDateInputShow=!1,b(),v(),s.completedGroup=!1,u.goTop()),S()},v=function(){u.data.appID=s.appID,u.data.dateType=s.dateType,u.data.dateFrom=s.dateFrom,u.data.dateTo=s.dateTo,u.data.currentPage=s.currentPage,u.itemsPerPage=300,u.limit=u.itemsPerPage+1},b=function(){s.appID="allApps",s.dateFrom="",s.dateTo="",s.currentPage=0,u.transactions=[],u.batchedTransaction=[],s.completedGroup=!0,s.batchNum=0,s.batchLimit=0},S=function(){var e={description:1,limit:u.limit,offset:u.itemsPerPage*u.data.currentPage};u.data.hasOwnProperty("dateFrom")&&""!==u.data.dateFrom&&(e.date_from=u.data.dateFrom),u.data.hasOwnProperty("dateTo")&&""!==u.data.dateTo&&(e.date_to=u.data.dateTo+86400),e.req_id=u.data.dateTo||Math.round((new Date).getTime()/1e3),u.reqId=e.req_id,c.sendRequestFor.profitTable(e)};e.$on("profit_table:update",function(t,n,a){u.firstCompleted=!0,u.profitTable=n;var o=u.profitTable.count;u.hasError=!1,u.reqId===a&&(0===o?(u.noTransaction=!0,e.$applyAsync(function(){u.noMore=!0}),C()):o>0&&(o<u.limit?(u.noTransaction=!1,g=!0,u.profitTable.transactions.forEach(function(e,t){u.transactions.push(u.profitTable.transactions[t])}),C()):o===u.limit&&(u.noTransaction=!1,e.$applyAsync(function(){u.noMore=!1}),u.profitTable.transactions.forEach(function(e,t){o-1>t&&u.transactions.push(u.profitTable.transactions[t])}),C())))}),e.$on("profit_table:error",function(t,n){e.$applyAsync(function(){u.hasError=!0,u.errorMessage=n})});var C=function(){s.batchLimit=Math.ceil(u.transactions.length/s.batchSize);var t=[];t=u.transactions.slice(s.batchNum*s.batchSize,(s.batchNum+1)*s.batchSize),t.forEach(function(e,n){u.batchedTransaction.push(t[n])}),s.batchNum+=1,s.batchNum===s.batchLimit&&(s.batchLimit=0,s.batchNum=0,s.completedGroup=!0,g&&e.$applyAsync(function(){u.noMore=!0})),u.setFiltered()};u.setFiltered=function(){e.$applyAsync(function(){s.appID=u.data.appID,u.filteredTransactions=t("DataFilter")(u.batchedTransaction,s.appID,d),0===u.filteredTransactions.length?u.noTransaction=!0:u.noTransaction=!1,e.$broadcast("scroll.infiniteScrollComplete")})},u.dateFilter=function(){s.dateType=u.data.dateType,u.dateChanged=!0,u.noTransaction=!1,"allTime"===s.dateType?(e.$applyAsync(function(){u.jumpToDateInputShow=!1}),s.completedGroup=!0,u.firstCompleted=!1,u.data.dateTo="",s.dateFrom="",s.dateTo="",h()):"jumpToDate"===s.dateType&&(e.$applyAsync(function(){u.jumpToDateInputShow=!0}),s.completedGroup=!0,u.firstCompleted=!1,u.nowDateInputLimit=t("date")(new Date,"yyyy-MM-dd"),document.getElementById("dateTo").setAttribute("max",u.nowDateInputLimit),document.getElementById("dateTo").value=u.nowDateInputLimit,u.jumpToDateFilter())},u.jumpToDateFilter=function(){"jumpToDate"===s.dateType&&(s.completedGroup=!0,u.dateChanged=!0,u.noTransaction=!1,u.firstCompleted=!1,s.currentPage=0,u.data.dateTo=new Date(u.data.end).getTime()/1e3||"",s.dateTo=u.data.dateTo,h())},u.toggleItem=function(){u.isItemShown=!u.isItemShown;var e=document.getElementsByClassName("profit-table-expandable")[0];e.id="profit-table-filter-active"===e.id?"":"profit-table-filter-active"},u.goTop=function(){r.scrollTop(!0)},u.goToTopButtonCondition=function(){n(function(){var e=r.$getByHandle("handler").getScrollPosition();u.goToTopButton=e?e.top>=30:!1},500)},u.sendContractDetailRequest=function(e){e&&(sessionStorage.setItem("id",e),a.go("transaction-detail"))}}angular.module("binary.pages.profit-table.controllers").controller("ProfitTableController",e),e.$inject=["$scope","$filter","$timeout","$state","$templateCache","$ionicScrollDelegate","config","tableStateService","websocketService","appStateService"]}(),function(){function e(e,t,n){function a(e,t,n){var a=[];return e.forEach(function(o,r){var i=e[r],s=i.app_id;("allApps"===t||"tickTradeApp"===t&&s===n.toString())&&a.push(i)}),a}return a}angular.module("binary.pages.profit-table.filters").filter("DataFilter",e),e.$inject=["$filter"]}(),function(){function e(e,t,n,a,o,r,i,s,c){var l=this;l.data={},l.errors={};var u=o.getDefault().landing_company_name,d=i.isLandingCompanyOf("virtual",u),p=o.getAll(),m=a.upgradeableLandingCompanies;l.hasIOM=_.indexOf(m,"iom")>-1||i.hasAccountOfLandingCompany(p,"iom"),l.requireCitizen=_.indexOf(m,"malta")>-1||_.indexOf(m,"iom")>-1,l.validation=s,l.options=c,l.receivedSettings=!1,l.hasResidence=!1,l.hasPOB=!1,l.hasCitizen=!1,l.disableUpdatebutton=!1,l.linkToTermAndConditions="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/terms-and-conditions.html",l.data={salutation:"",first_name:"",last_name:"",date_of_birth:"",citizen:"",place_of_birth:"",residence:"",address_line_1:"",address_line_2:"",address_city:"",address_state:"",address_postcode:"",phone:"",account_opening_reason:""},d&&(l.data.secret_question="",l.data.secret_answer="");var g=function(e){return _.find(l.residenceList,function(t){return t.value===e}).phone_idd};e.$on("residence_list",function(e,t){l.residenceList=t,n.sendRequestFor.accountSetting()}),e.$on("get_settings",function(t,a){e.$applyAsync(function(){if(l.receivedSettings=!0,_.forEach(l.data,function(e,t){a[t]&&(l.data[t]=a[t])}),a.date_of_birth&&(l.data.date_of_birth=new Date(1e3*a.date_of_birth)),a.place_of_birth&&(l.hasPOB=!0),a.citizen&&(l.hasCitizen=!0),a.country_code){var e=a.country_code;if(l.hasResidence=!0,l.data.residence=e,n.sendRequestFor.statesListSend(e),!a.phone){var t=g(e);l.data.phone=t?"+"+t:""}}})}),e.$on("states_list",function(t,n){e.$applyAsync(function(){l.statesList=n})}),l.submitAccountOpening=function(){l.disableUpdatebutton=!0,l.error={};var e=_.clone(l.data),o=a.selectedCurrency||"";o&&(e.currency=o),e.date_of_birth=l.data.date_of_birth?t("date")(l.data.date_of_birth,"yyyy-MM-dd"):"",e=_.forEach(e,function(t,n){return e[n]=_.trim(t),e[n]}),n.sendRequestFor.createRealAccountSend(e)},e.$on("new_account_real:error",function(t,n){l.disableUpdatebutton=!1,n.hasOwnProperty("details")?e.$apply(function(){l.errors=n.details}):n.code&&r.displayError(n.message)}),e.$on("new_account_real",function(e,t){l.disableUpdatebutton=!1;var r=t.oauth_token;a.loginFinished=!1,n.authenticate(r),a.newAccountAdded=!0,o.addedAccount=r}),l.openTermsAndConditions=function(){window.open(l.linkToTermAndConditions,"_blank")},l.openPEPInformation=function(){r.showPEPInformation(e)},l.init=function(){l.errors={},n.sendRequestFor.residenceListSend(),l.readOnly=!d},l.init()}angular.module("binary.pages.real-account-opening").controller("RealAccountOpeningController",e),e.$inject=["$scope","$filter","websocketService","appStateService","accountService","alertService","clientService","validationService","accountOptions"]}(),function(){function e(e){var t=this;t.init=function(){var t=window.location.href,n=/^.*\?(.*)$/g.exec(t);n?e.go("signin",{accountTokens:t}):e.go("home")},t.init()}angular.module("binary.pages.redirect.controllers").controller("RedirectController",e),e.$inject=["$state"]}(),function(){function e(){var e=this;e.ios=ionic.Platform.isIOS(),e.android=ionic.Platform.isAndroid(),e.resources=[{name:"resources.trading_times",url:"trading-times"},{name:"resources.asset_index",url:"asset-index"}]}angular.module("binary.pages.resources.controllers").controller("ResourcesController",e),e.$inject=[]}(),function(){function e(e,t,n,a,o,r,i,s,c){var l=this;l.hasError=!1,l.validation=c,l.fractionalDigits=l.validation.fractionalDigits,l.disableUpdateButton=!0,l.isDataLoaded=!1,l.disableForZeroValues=!1,l.isReadonlyExcludeUntil=!1;var u=!1;l.data={};var d=s.getDefault();l.country=d.country;var p=["max_balance","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses","max_open_bets"];e.$on("get-self-exclusion",function(t,n){e.$applyAsync(function(){var e=_.clone(n);e.exclude_until&&(e.exclude_until=new Date(e.exclude_until+"T00:00:00"),l.isReadonlyExcludeUntil=!0),e.timeout_until&&(e.timeout_until=new Date(1e3*e.timeout_until)),l.data=e,l.limits=_.clone(n),l.disableUpdateButton=!1,l.isDataLoaded=!0})}),e.$on("get-self-exclusion:error",function(e,t){r.displayError(t),l.disableUpdateButton=!1}),e.$on("set-self-exclusion",function(e,t){a(["self-exclusion.success","self-exclusion.save_prompt"]).then(function(e){r.displayAlert(e["self-exclusion.success"],e["self-exclusion.save_prompt"])}),l.limits=_.clone(l.data),l.disableUpdateButton=!1,u&&(u=!1,"gb"===l.country&&o.scrollBottom())}),e.$on("set-self-exclusion:error",function(e,t){r.displayError(t),l.disableUpdateButton=!1}),l.checkZeroValues=function(){var t=[];_.forEach(p,function(e){0===parseInt(l.data[e])&&t.push(e)}),e.$applyAsync(function(){l.disableForZeroValues=!!t.length})},l.submit=function(){l.disableUpdateButton=!0,f()};var m=function(){return i.sendRequestFor.getSelfExclusion()},g=function(){return i.sendRequestFor.accountLimits()},f=function(){var e=_.clone(l.data);e.timeout_until&&(e.timeout_until=Math.floor(new Date(e.timeout_until).getTime()/1e3)),e.exclude_until&&(e.exclude_until=h(new Date(e.exclude_until).getTime()));var t=JSON.stringify(e);t=t.replace(/:(\d+)([,}])/g,':"$1"$2'),i.sendRequestFor.setSelfExclusion(JSON.parse(t)),u=!0},h=function(e){return n("date")(e,"yyyy-MM-dd")},y=function(e){return n("date")(e,"HH:mm")},v=function(e){var t=h(e),n=y(e);return t+"T"+n},b=function(e,t){var n=_.clone(e),a=y(n),o=n.setDate(n.getDate()+7*t);return{limit:h(o)+"T"+a,text:h(o)+" at "+a}},S=function(e,t){var n=_.clone(e);n.setDate(n.getDate()+1);var a=new Date(n.setMonth(n.getMonth()+t)).getTime();return h(a)},C=function(e,t){var n=_.clone(e),a=new Date(n.setDate(n.getDate()+365*t)).getTime();return h(a)},w=function(e){var t=_.clone(e),n=new Date(t).getTime();return v(n)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;l.minTimeoutUntil=w(e),l.maxTimeoutUntil=b(e,6),l.minExcludeUntil=S(e,6),l.maxExcludeUntil=C(e,5)};e.$on("get_limits",function(e,t){l.hasError=!1,l.accountLimits=t,m()}),e.$on("get_limits:error",function(){l.hasError=!0}),l.goToContact=function(){t.go("contact")},e.$on("time:success",function(e,t){var n=new Date(1e3*t);k(n)}),e.$on("time:error",function(){k()});var T=function(){i.sendRequestFor.serverTime(),g()};T()}angular.module("binary.pages.self-exclusion.controllers").controller("SelfExclusionController",e),e.$inject=["$scope","$state","$filter","$translate","$ionicScrollDelegate","alertService","websocketService","accountService","validationService"]}(),function(){function e(e,t,n,a){function o(){var e=(new Date).getTime(),r=i+s-e,c=Math.pow(2,31)-1,l=1e4;0>r&&(r=l);var u=function(){t(["self-exclusion.warning","self-exclusion.session_timeout_warning"]).then(function(e){n.displayAlert(e["self-exclusion.warning"],e["self-exclusion.session_timeout_warning"])}),setTimeout(function(){a.logout()},l)};r>c?(r%=c,setTimeout(o,r)):setTimeout(u,r-l)}var r=!1,i=0,s=null;e.$on("authorize",function(e,t){i=(new Date).getTime(),a.sendRequestFor.getSelfExclusion(),r=!1}),e.$on("get-self-exclusion",function(e,t){t.session_duration_limit&&!r&&(r=!0,s=60*t.session_duration_limit*1e3,o())})}angular.module("binary.pages.self-exclusion.controllers").controller("SessionTimeoutController",e),e.$inject=["$scope","$translate","alertService","websocketService"]}(),function(){function e(){var e={restrict:"E",scope:{},controller:"SessionTimeoutController",controllerAs:"vm"};return e}angular.module("binary.pages.self-exclusion.directives").directive("bgSessionTimeout",e)}(),function(){function e(e,t,n){var a=this;a.ios=ionic.Platform.isIOS(),a.android=ionic.Platform.isAndroid();var o=function(e,t){return n.isLandingCompanyOf(e,t)};a.settings=[{name:"profile.personal_details",url:"profile",scope:"read",forRealAccount:!1,forFinancialAccount:!1},{name:"settings.account_categorisation",url:"account-categorisation",scope:"read",forRealAccount:!1,forFinancialAccount:!0},{name:"settings.self_exclusion",url:"self-exclusion",scope:"admin",forRealAccount:!0,forFinancialAccount:!1},{name:"menu.language",url:"language",scope:"read",forRealAccount:!1,forFinancialAccount:!1},{name:"settings.change_password",url:"change-password",scope:"admin",forRealAccount:!1,forFinancialAccount:!1},{name:"settings.financial_assessment",url:"financial-assessment",scope:"admin",forRealAccount:!0,forFinancialAccount:!1},{name:"settings.limits",url:"limits",scope:"admin",forRealAccount:!0,forFinancialAccount:!1}],a.checkAccount=function(t){return t?!e.virtuality:!0},a.checkFinancialAccount=function(e){var n=t.getDefault(),a=n?n.landing_company_name:"";return e?o("maltainvest",a):!0}}angular.module("binary.pages.settings.controllers").controller("SettingsController",e),e.$inject=["appStateService","accountService","clientService"]}(),function(){function e(e,t,n,a,o,r,i,s,c){var l=this,u=a.cryptoConfig,d=o.currenciesConfig,p=i.getAll(),m=i.getDefault(),g=m.landing_company_name;l.isCRAccount=s.isLandingCompanyOf("costarica",g)||s.isLandingCompanyOf("svg",g),l.currenciesOptions=[],l.getCurrenciesOptions=function(){var e=s.landingCompanyValue(g,"legal_allowed_currencies");if(l.isCRAccount){var t=s.getExistingCurrencies(p);if(t.length){var n=s.dividedCurrencies(t),a=n.fiatCurrencies.length>0;if(a){var o=s.dividedCurrencies(e).cryptoCurrencies,r=n.cryptoCurrencies;return _.difference(o,r)}return _.difference(e,t)}return e}return e};var f=function(e){e.forEach(function(e){var t=d[e],n=/crypto/i.test(d[e].type);(!n||u[e])&&(t.symb=e,t.isCryptoCurrency=n,t.img="img/currency/"+e.toLowerCase()+".svg",n&&(t.name=u[e].name),l.currenciesOptions.push(d[e]))})},h=function(){e.$applyAsync(function(){l.hasCryptoOption=_.findIndex(l.currenciesOptions,"isCryptoCurrency")>-1,l.hasFiatOption=_.findIndex(l.currenciesOptions,["isCryptoCurrency",!1])>-1})};l.setCurrencyOfAccount=function(e){r.sendRequestFor.setAccountCurrency(e)},e.$on("set_account_currency:success",function(e,a){for(var r=JSON.parse(localStorage.accounts),i=0;i<r.length;i++)if(r[i].is_default===!0){r[i].currency=a;break}localStorage.setItem("accounts",JSON.stringify(r)),sessionStorage.setItem("currency",a),o.accountCurrencyChanged=!0,t.$broadcast("currency:changed",a),"accounts-management"===l.from?n.go("accounts-management"):n.go("trade")}),e.$on("set_account_currency:error",function(e,t){c.displayError(t.message)}),e.$on("$stateChangeSuccess",function(e,t,n,a,o){l.from=a.name});var y=function(){var e=l.getCurrenciesOptions();f(e),h()};y()}angular.module("binary.pages.set-currency.controllers").controller("SetCurrencyController",e),e.$inject=["$scope","$rootScope","$state","config","appStateService","websocketService","accountService","clientService","alertService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l){var u=this;u.validation=l,u.showTokenForm=!1,u.showSignin=!1,u.showSignup=!1,u.showvirtualws=!1,u.data={},u.tokenError=!1,u.passwordError=!1,u.ios=ionic.Platform.isIOS(),u.android=ionic.Platform.isAndroid(),u.disableNextbutton=!1,u.clientCountryIsUK=!1,u.linkToRegulatory="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/regulation.html",u.gamStopLink="https://www.gamstop.co.uk/";var d=function(){u.language=r.read(),_.isEmpty(n.accountTokens)||(u.showSignin=!0,u.data.accountTokens=n.accountTokens),_.isEmpty(n.verificationCode)||(u.showvirtualws=!0,u.data.verificationCode=n.verificationCode,i.sendRequestFor.residenceListSend())};d(),e.$on("authorize",function(e,n,r){if(a.hide(),n){if(o.isUnique(n.loginid)){var i={},l=n.account_list;if(l){var d=_.find(l,function(e){return e.loginid===n.loginid});i=_.assign(n,d)}o.add(i),o.setDefault(n.token),c.virtuality=n.is_virtual}u.token="",t.go("trade")}else s.accountError.tokenNotAuthenticated(r)}),u.signIn=function(){var e=u.token;e&&15===e.length?(a.show(),i.authenticate(e)):s.accountError.tokenNotValid()},u.verifyUserMail=function(){u.emailError=!1;u.data.mail?u.data.mail:"";i.sendRequestFor.accountOpening(_.trim(u.data.mail)),u.isVerifyingEmail=!0},e.$on("verify_email",function(t,n){
1===n&&e.$applyAsync(function(){u.emailError=!1,u.showvirtualws=!0,u.showSignup=!1,u.isVerifyingEmail=!1})}),e.$on("verify_email:error",function(t,n){e.$applyAsync(function(){u.emailError=!0,u.emailErrorMessage=n.verify_email,u.isVerifyingEmail=!1})}),e.$watch("vm.showSignup",function(){u.showSignup&&i.sendRequestFor.residenceListSend()}),e.$on("residence_list",function(e,t){u.data.residenceList=t}),u.data.inputType="password",u.hideShowPassword=function(){"password"===u.data.inputType?u.data.inputType="text":u.data.inputType="password"},u.createVirtualAccount=function(){u.tokenError=!1,u.passwordError=!1;var e=_.trim(u.data.signupToken),t=u.data.clientPassword,n=u.data.residence;i.sendRequestFor.newAccountVirtual(e,t,n)},e.$on("new_account_virtual",function(e,t){if(!c.isLoggedin){var n=t.oauth_token;i.authenticate(n),u.showTokenForm=!1,u.showSignin=!1,u.showSignup=!1,u.showvirtualws=!1}}),e.$on("new_account_virtual:error",function(t,n){e.$applyAsync(function(){n&&(n.hasOwnProperty("details")&&n.details.hasOwnProperty("verification_code")&&(u.tokenError=!0,u.tokenErrorMessage=n.details.verification_code||n.code),n.hasOwnProperty("code")&&"InvalidToken"===n.code&&(u.tokenError=!0,u.tokenErrorMessage=n.message),n.hasOwnProperty("details")&&n.details.hasOwnProperty("client_password")&&(u.passwordError=!0,u.passwordErrorMessage=n.details.client_password||n.code),n.hasOwnProperty("code")&&"PasswordError"===n.code&&(u.passwordError=!0,u.passwordErrorMessage=n.message))})}),e.$on("website_status",function(t,n){e.$applyAsync(function(){/gb/.test(n.clients_country)&&(u.clientCountryIsUK=!0)})}),u.changeSigninView=function(t){t=t||!1,e.$applyAsync(function(){u.showSignin||u.showSignup||u.showvirtualws||!u.showTokenForm?u.showSignin||!u.showSignup||u.showTokenForm||u.showvirtualws?(u.showSignin||u.showSignup||u.showTokenForm||!u.showvirtualws)&&(u.showSignin||!u.showSignup||u.showTokenForm||u.showvirtualws)?!u.showSignin||u.showSignup||u.showTokenForm||u.showvirtualws||!t||(u.showSignin=!1):(u.showvirtualws=!1,u.showSignup=!1,u.showSignin=!0):(u.showSignup=!1,u.showSignin=!0):(u.showTokenForm=!1,u.showSignin=!0)})},u.changeSigninViewtoSignup=function(){u.showSignin&&!u.showSignup&&(u.showSignup=!0,u.showSignin=!1)},u.showSigninView=function(){e.$applyAsync(function(){u.showSignin=!0})},e.$watch(function(){return c.isLanguageReady},function(e,t){u.disableNextbutton=!e}),u.goToRegulatory=function(){window.open(u.linkToRegulatory,"_blank")},u.goToGamStop=function(){window.open(u.gamStopLink,"_blank")}}e.$inject=["$scope","$state","$stateParams","$ionicLoading","accountService","languageService","websocketService","alertService","appStateService","validationService"],angular.module("binary.pages.signin.controllers").controller("SigninController",e),e.$inejct=["$scope","$state","$stateParams","$ionicLoading","accountService","languageService","websocketService","alertService","appStateService","validationService"]}(),function(){function e(e,t,n,a,o,r,i,s,c,l){var u=this;u.data={},u.noTransaction=!1,u.noMore=!1,u.ios=ionic.Platform.isIOS(),u.android=ionic.Platform.isAndroid(),u.goToTopButton=!1,u.firstCompleted=!1,u.jumpToDateInputShow=!1,u.hasError=!1,u.dateChanged=!1,u.isItemShown=!1;var d=i.app_id,p=!1,m=!1,g=!1;u.fractionalDigits=2;var f=function(){if(l.isLoggedin){u.currency=sessionStorage.getItem("currency")||"USD";var e=l.currenciesConfig||{};u.fractionalDigits=!_.isEmpty(e)&&e[u.currency]?e[u.currency].fractional_digits:2,(l.statementRefresh||m)&&(o.remove(),b(),u.jumpToDateInputShow=!1,u.firstCompleted=!1,g=!1,u.hasError=!1,u.filteredTransactions=[],u.noTransaction=!1,m=!1,s.statementCompletedGroup=!0,l.statementRefresh=!1,l.isStatementSet=!1,h())}};e.$on("$stateChangeSuccess",function(e,t,n,a,o){u.lastPage=a.name,p=!0,u.thisPage=t.name,"transaction-detail"!==u.lastPage&&"statement"===u.thisPage&&(b(),u.firstCompleted=!1,m=!0,u.jumpToDateInputShow=!1,f())}),e.$on("authorize",function(e,t){l.statementRefresh&&f()}),u.delayedLoad=function(){n(h,50)};var h=function(){s.statementCompletedGroup?s.statementCompletedGroup&&(s.statementCurrentPage+=1,y()):C()},y=function(){l.isStatementSet?!l.isStatementSet&&p&&"transaction-detail"===u.lastPage?(p=!1,u.lastPage="",v()):l.isStatementSet&&u.dateChanged&&s.statementCompletedGroup?(u.transactions=[],u.batchedTransaction=[],u.filteredTransactions=[],u.dateChanged=!1,s.statementCurrentPage=0,s.statementBatchNum=0,s.statementBatchLimit=0,s.statementCompletedGroup=!1,v(),u.goTop()):l.isStatementSet&&!u.dateChanged&&s.statementCompletedGroup?(u.transactions=[],s.statementCompletedGroup=!1,v()):u.dateChanged||(v(),e.$applyAsync(function(){u.noMore=!1})):(l.isStatementSet=!0,s.statementDateType="allTime",u.jumpToDateInputShow=!1,b(),v(),s.statementCompletedGroup=!1,u.goTop()),S()},v=function(){u.data.appID=s.statementAppID,u.data.dateType=s.statementDateType,u.data.dateFrom=s.statementDateFrom,u.data.dateTo=s.statementDateTo,u.data.statementCurrentPage=s.statementCurrentPage,u.itemsPerPage=300,u.limit=u.itemsPerPage+1},b=function(){s.statementAppID="allApps",s.statementDateFrom="",s.statementDateTo="",s.statementCurrentPage=0,u.transactions=[],u.batchedTransaction=[],s.statementCompletedGroup=!0,s.statementBatchNum=0,s.statementBatchLimit=0},S=function(){var e={description:1,limit:u.limit,offset:u.itemsPerPage*u.data.statementCurrentPage};u.data.hasOwnProperty("dateFrom")&&""!==u.data.dateFrom&&(e.date_from=u.data.dateFrom),u.data.hasOwnProperty("dateTo")&&""!==u.data.dateTo&&(e.date_to=u.data.dateTo+86400),e.req_id=u.data.dateTo||Math.round((new Date).getTime()/1e3),u.reqId=e.req_id,c.sendRequestFor.statement(e)};e.$on("statement:update",function(t,n,a){u.firstCompleted=!0,u.statement=n;var o=u.statement.count;u.hasError=!1,u.reqId===a&&(0===o?(u.noTransaction=!0,e.$applyAsync(function(){u.noMore=!0}),C()):o>0&&(o<u.limit?(u.noTransaction=!1,g=!0,u.statement.transactions.forEach(function(e,t){u.transactions.push(u.statement.transactions[t])}),C()):o===u.limit&&(u.noTransaction=!1,e.$applyAsync(function(){u.noMore=!1}),u.statement.transactions.forEach(function(e,t){o-1>t&&u.transactions.push(u.statement.transactions[t])}),C())))}),e.$on("statement:error",function(t,n){e.$applyAsync(function(){u.hasError=!0,u.errorMessage=n})});var C=function(){s.statementBatchLimit=Math.ceil(u.transactions.length/s.statementBatchSize);var t=[];t=u.transactions.slice(s.statementBatchNum*s.statementBatchSize,(s.statementBatchNum+1)*s.statementBatchSize),t.forEach(function(e,n){u.batchedTransaction.push(t[n])}),s.statementBatchNum+=1,s.statementBatchNum===s.statementBatchLimit&&(s.statementBatchLimit=0,s.statementBatchNum=0,s.statementCompletedGroup=!0,g&&e.$applyAsync(function(){u.noMore=!0})),u.setFiltered()};u.setFiltered=function(){e.$applyAsync(function(){s.statementAppID=u.data.appID,u.filteredTransactions=t("StatementDataFilter")(u.batchedTransaction,s.statementAppID,d),0===u.filteredTransactions.length?u.noTransaction=!0:u.noTransaction=!1,e.$broadcast("scroll.infiniteScrollComplete")})},u.dateFilter=function(){s.statementDateType=u.data.dateType,u.dateChanged=!0,u.noTransaction=!1,"allTime"===u.data.dateType&&(e.$applyAsync(function(){u.jumpToDateInputShow=!1}),s.statementCompletedGroup=!0,u.firstCompleted=!1,u.data.dateTo="",s.statementDateFrom="",s.statementDateTo="",h()),"jumpToDate"===u.data.dateType&&(e.$applyAsync(function(){u.jumpToDateInputShow=!0}),s.statementCompletedGroup=!0,u.firstCompleted=!1,u.nowDateInputLimit=t("date")(new Date,"yyyy-MM-dd"),document.getElementById("statement-dateTo").setAttribute("max",u.nowDateInputLimit),document.getElementById("statement-dateTo").value=u.nowDateInputLimit,u.jumpToDateFilter())},u.jumpToDateFilter=function(){"jumpToDate"===s.statementDateType&&(s.statementCompletedGroup=!0,u.dateChanged=!0,u.noTransaction=!1,u.firstCompleted=!1,s.statementCurrentPage=0,u.data.dateTo=new Date(u.data.end).getTime()/1e3||"",s.statementDateTo=u.data.dateTo,h())},u.toggleItem=function(){u.isItemShown=!u.isItemShown;var e=document.getElementsByClassName("statement-content-expandable")[0];e.id="statement-filter-active"===e.id?"":"statement-filter-active"},u.goTop=function(){r.scrollTop(!0)},u.goToTopButtonCondition=function(){n(function(){var e=r.$getByHandle("handler").getScrollPosition();u.goToTopButton=e?e.top>=30:!1},500)},u.sendContractDetailRequest=function(e){e&&(sessionStorage.setItem("id",e),a.go("transaction-detail"))}}angular.module("binary.pages.statement.controllers").controller("StatementController",e),e.$inject=["$scope","$filter","$timeout","$state","$templateCache","$ionicScrollDelegate","config","tableStateService","websocketService","appStateService"]}(),function(){function e(e,t,n){function a(e,t,n){var a=[];return e.forEach(function(o,r){var i=e[r],s=i.app_id;("allApps"===t||"tickTradeApp"===t&&s===n.toString())&&a.push(i)}),a}return a}return angular.module("binary.pages.statement.filters").filter("StatementDataFilter",e),e.$inject=["$filter"],e}(),function(){function e(e,t,n,a){var o=this;o.data={},o.data.landingCompanyName=localStorage.getItem("landingCompanyName"),o.data.linkToTermAndConditions="https://www.binary.com/"+(localStorage.getItem("language")||"en")+"/terms-and-conditions.html",o.updateUserTermsAndConditions=function(){return n.sendRequestFor.TAndCApprovalSend()},o.openTermsAndConditions=function(){window.open(o.data.linkToTermAndConditions,"_blank")},e.$on("tnc_approval",function(e,n){1===n&&t.go("trade")}),e.$on("tnc_approval:error",function(e,t){a.displayError(t.message)})}angular.module("binary.pages.terms-and-conditions.controllers").controller("TermsAndConditionsController",e),e.$inject=["$scope","$state","websocketService","alertService"]}(),function(){function e(e,t,n){function a(){var e={subscribe:1,proposal:1,symbol:null,contract_type:null,duration:null,basis:"payout",currency:sessionStorage.currency||"USD",amount:o()?.005:5,duration_unit:"t",passthrough:null};return e}function o(){var e=t.currenciesConfig[sessionStorage.currency];return e&&"crypto"===e.type?!0:!1}function r(e){var t=!0;return _.forEach(e,function(t,n){(null==t||""===t)&&delete e[n]}),_.forEach(s,function(n,a){e[a]?n.format.pattern.test(e[a])||(t=!1):void 0===e[a]&&n.persence&&(t=!1)}),t}var i={},s={amount:{presence:!0,format:{pattern:/^[0-9]+([.][0-9]+)?$/}},basis:{persence:!0,format:{pattern:/^payout|stake$/}},contract_type:{persence:!0,format:{pattern:/^\w{2,30}$/}},currency:{persence:!0,format:{pattern:/^[A-Z]{3}$/}},duration:{persence:!0,format:{pattern:/^\d+$/}},duration_unit:{persence:!0,format:{pattern:/^d|m|s|h|t$/}},symbol:{persence:!0,format:{pattern:/^\w{2,30}$/}},barrier:{persence:!1,format:{pattern:/^[+-]?\d+\.?\d*$/}}};return i.get=function(){if(_.isEmpty(localStorage.options))return a();var e=JSON.parse(localStorage.options),n=a();n.symbol=e.underlying.symbol,n.duration=parseInt(e.tick),"Higher/Lower"===e.tradeType?n.barrier=_.isEmpty(e.barrier)?"":e.barrier:n.barrier=e.digit,"High/Low Ticks"===e.tradeType?n.selected_tick=e.selected_tick:n.selected_tick="",n.tradeType=e.tradeType,n.basis=e.basis||n.basis,n.currency=sessionStorage.currency||"USD";var o=t.currenciesConfig[sessionStorage.currency];return o&&"crypto"===o.type?n.amount=e.cryptoAmount||n.amount:n.amount=e.amount||n.amount,n},i.save=function(e){localStorage.options=JSON.stringify(e)},i.setPropertyValue=function(t,n){var a=JSON.parse(localStorage.options);a[t]=n,localStorage.options=JSON.stringify(a),e.$broadcast("options:updated",a)},i.update=function(e){var n=i.get(),a=t.currenciesConfig[sessionStorage.currency];if(a&&"crypto"===a.type){var o=e.amount||n.cryptoAmount;e.cryptoAmount=o,e.amount=n.amount,n.amount=o}else n.amount=e.amount||n.amount;return n.symbol=e.underlying.symbol,n.duration=parseInt(e.tick),"Higher/Lower"===e.tradeType?n.barrier=_.isEmpty(e.barrier)?"":e.barrier:n.barrier=e.digit,n.selected_tick="High/Low Ticks"===e.tradeType?e.selected_tick:null,n.tradeType=e.tradeType,n.basis=e.basis||n.basis,i.save(e),n},i.send=function(e){return delete e.tradeType,r(e)?(n.sendRequestFor.proposal(e),!0):!1},i.forget=function(e){n.sendRequestFor.forgetProposals(e)},i.purchase=function(e){n.sendRequestFor.purchase(e.id,e.ask_price),i.forget()},i}angular.module("binary.pages.trade.services").factory("proposalService",e),e.$inject=["$rootScope","appStateService","websocketService"]}(),function(){function e(e){function t(){n.proposal=e.get()}var n=this;n.proposal={},n.purchasedContract={},t(),angular.element(document).ready(function(){function e(e){var t=document.getElementById("trade-container");void 0!==t&&null!==t&&(t.className="")}function t(e){var t=document.getElementById("trade-container");void 0!==t&&null!==t&&(t.className="flexed")}if(!ionic.Platform.isWebView()){var n=document.getElementById("trade-container");void 0!==n&&null!==n&&(n.className="web-view-trade")}window.addEventListener("native.keyboardshow",e),window.addEventListener("native.keyboardhide",t)})}angular.module("binary.pages.trade.controllers").controller("TradeController",e),e.$inject=["proposalService"]}(),function(){function e(){var e={};return e.proposalIsReady=!1,e}angular.module("binary.pages.trade.services").factory("tradeService",e)}(),function(){function e(e,t,n){var a=this;a.isDataLoaded=!1,a.data={},a.hasError=!1,a.now=Math.round((new Date).getTime()),angular.element(document).ready(function(){document.getElementById("date").setAttribute("min",t("date")(a.now,"yyyy-MM-dd")),document.getElementById("date").value=t("date")(a.now,"yyyy-MM-dd")}),a.sendTradingTimes=function(){a.epochDate=a.data.date||Math.round((new Date).getTime()),a.date=t("date")(a.epochDate,"yyyy-MM-dd"),n.sendRequestFor.tradingTimes(a.date)},a.sendTradingTimes(),e.$on("trading_times:success",function(t,n){a.tradingTimes=n,a.marketDisplayNames=[];var o=JSON.parse(sessionStorage.getItem("all_active_symbols"));a.activeSymbols=_.groupBy(o,"market"),Object.values(a.activeSymbols).forEach(function(e,t){a.marketDisplayNames.market||a.marketDisplayNames.push(e[0].market_display_name)}),e.$applyAsync(function(){a.hasError=!1,a.data.markets=_.filter(a.tradingTimes.markets,function(e){return a.marketDisplayNames.indexOf(e.name)>-1}),a.market=a.data.markets[0].name,a.isDataLoaded=!0})}),e.$on("trading_times:error",function(t,n){e.$applyAsync(function(){a.isDataLoaded=!0,a.hasError=!0,a.error=n})}),a.getTranslationId=function(e){return"Closes early (at 21:00)"===e||"Closes early (at 18:00)"===e?"trading-times."+e.replace(/[\s]/g,"_").toLowerCase():e}}angular.module("binary.pages.trading-times.controllers").controller("TradingTimesController",e),e.$inject=["$scope","$filter","websocketService"]}(),function(){function e(e,t,n){function a(){o()}function o(){e({method:"GET",url:"versions.json"}).then(function(e){e.data&&t.$applyAsync(function(){i.showSpinner=!1;var t=e.data;i.lastVersion=t.pop(),r()})},function(e){i.versions=null})}function r(){var e=n.read();i.platform="appstore",ionic.Platform.isAndroid()&&(i.platform="googleplay"),i.storeLogo="img/"+i.platform+"/"+e+".svg"}var i=this;i.storeLogo=null,i.lastVersion=null,i.showSpinner=!0,i.platform=null,i.openExternal=function(e){return window.open(e,"_system"),!1},a()}angular.module("binary.pages.update.controllers").controller("UpdateController",e),e.$inject=["$http","$scope","languageService"]}(),function(){function e(e,t,n,a){var o=this;o.currency=sessionStorage.getItem("currency"),o.fractionalLength=2;var r=JSON.parse(sessionStorage.getItem("all_active_symbols")),i=sessionStorage.getItem("id"),s=parseInt(i),c={req_id:s},l=function(e){var t=e.toString(),n=t.indexOf(".");return t.length-n-1},u=function d(){n.isLoggedin?a.sendRequestFor.openContract(i,c):t(d,500)};e.$on("proposal:open-contract",function(t,n,a){var i=n,c=a;if(c===s){var u=r.find(function(e){return e.symbol===i.underlying}),d=u.pip||.01;o.fractionalLength=l(d),o.contract=i,e.$apply()}}),u()}angular.module("binary.pages.transaction-detail.controllers").controller("TransactionDetailController",e),e.$inject=["$scope","$timeout","appStateService","websocketService"]}(),function(){function e(e,t,n,a,o,r,i,s,c){var l=this,u=!1,d=function(){l.accounts=o.getAll();var e=o.getDefault();null==e?l.selectedAccount=null:l.selectedAccount=o.getDefault().token};e.$watch(function(){return r.accountCurrencyChanged},function(){r.accountCurrencyChanged===!0&&(l.accounts=o.getAll(),r.accountCurrencyChanged=!1)});var p=function m(){r.isLoggedin?(i.sendRequestFor.symbols(),i.sendRequestFor.assetIndex()):setTimeout(m,500)};d(),l.updateAccount=function(e){u=!0,r.loginFinished=!1,o.setDefault(e),o.validate(),p(),i.sendRequestFor.forgetStream(r.balanceSubscribtionId),r.isChangedAccount=!0,sessionStorage.removeItem("start"),sessionStorage.removeItem("_interval"),sessionStorage.removeItem("realityCheckStart"),r.isProfitTableSet=!1,r.isStatementSet=!1,r.profitTableRefresh=!0,r.statementRefresh=!0,sessionStorage.removeItem("countryParams"),r.isPopupOpen=!1,r.realityCheckLogin=!1,a.toggleLeft(),r.limitsChange=!0,r.hasAuthenticateMessage=!1,r.hasRestrictedMessage=!1,r.hasMaxTurnoverMessage=!1,r.hasCountryMessage=!1,r.hasTnCMessage=!1,r.hasTaxInfoMessage=!1,r.hasFinancialAssessmentMessage=!1,r.hasAgeVerificationMessage=!1,r.hasCurrencyMessage=!1,r.checkedAccountStatus=!1,s.emptyNotices(),r.checkingUpgradeDone=!1},e.$on("authorize",function(e,t){if(t&&r.newAccountAdded){var a=_.find(t.account_list,function(e){return e.loginid===t.loginid});a=_.assign(t,a),o.add(a),r.newAccountAdded=!1,o.setDefault(t.token),l.updateAccount(t.token),l.accounts=o.getAll(),l.selectedAccount=t.token,r.virtuality=t.is_virtual,o.addedAccount="";var s=r.selectedCurrency||"";c.reset(),t.currency||s?!t.currency&&s?i.sendRequestFor.setAccountCurrency(s):n.go("trade"):n.go("set-currency")}else t&&u&&c.reset()}),e.$on("set_account_currency:success",function(e,a){for(var i=o.getAll(),s=0;s<i.length;s++)if(i[s].is_default===!0){i[s].currency=a;break}localStorage.accounts=JSON.stringify(i),localStorage.setItem("accounts",JSON.stringify(i)),r.accountCurrencyChanged=!0,t.$broadcast("currency:changed",a),c.reset(),n.go("trade")})}angular.module("binary.share.components.accounts.controllers").controller("AccountsController",e),e.$inject=["$scope","$rootScope","$state","$ionicSideMenuDelegate","accountService","appStateService","websocketService","notificationService","validationService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/accounts/accounts.template.html",controller:"AccountsController",controllerAs:"vm",bindToContoller:!0,scope:{}};return e}angular.module("binary.share.components.accounts.directives").directive("bgAccounts",e)}(),function(){function e(e,t,n){var a=this;a.appVersion="0.0.0",t.ready(function(){e.$applyAsync(function(){window.cordova?cordova.getAppVersion(function(e){a.appVersion=e,window._trackJs.version=a.appVersion},function(e){}):n.getAppVersion().success(function(e){a.appVersion=e.version,window._trackJs.version=a.appVersion}).error(function(e){a.appVersion="0.0.0",window._trackJs.version=a.appVersion})})})}angular.module("binary.share.components.app-version.controllers").controller("AppVersionController",e),e.$inject=["$scope","$ionicPlatform","appVersionService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/app-version/app-version.template.html",controller:"AppVersionController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.app-version.directives").directive("bgAppVersion",e)}(),function(){function e(e,t,n){function a(){n.sendRequestFor.balance()}var o=this;o.balance=null,e.$on("authorize",function(t,n,r,i){e.$applyAsync(function(){o.balance={currency:n.currency,balance:n.balance,loginid:n.loginid},sessionStorage.setItem("balance",o.balance.balance),a()})}),e.$on("balance",function(n,a){e.$applyAsync(function(){o.balance=a,t.balanceSubscribtionId=a.id||null})}),e.$on("language:updated",function(e){n.sendRequestFor.forgetAll("balance"),o.balance=null,a()}),e.$on("currency:changed",function(e,t){a(),o.balance.currency=t}),a()}angular.module("binary.share.components.balance.controllers").controller("BalanceController",e),e.$inject=["$scope","appStateService","websocketService"]}(),function(){function e(e){function t(t,n,a,o){t.$on("$destroy",function(){o.balance&&o.balance.id&&e.sendRequestFor.forgetStream(o.balance.id)})}var n={restrict:"E",templateUrl:"js/share/components/balance/balance.template.html",controller:"BalanceController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=?"},link:t};return n}angular.module("binary.share.components.balance.directives").directive("bgBalance",e),e.$inject=["websocketService"]}(),function(){function e(){function e(e,t,n,a){if(a){a.$formatters.push(function(e){return angular.isDefined(e)&&_.isEmpty(e.toString())?null:e}),a.$parsers.push(function(e){return e?e:null});var o=void 0,r=void 0;(angular.isDefined(n.min)||n.ngMin)&&(a.$validators.min=function(e){return a.$isEmpty(e)||angular.isUndefined(o)||e>=parseFloat(o)},n.$observe("min",function(e){o=e,a.$validate()})),(angular.isDefined(n.max)||n.ngMax)&&(a.$validators.max=function(e){return a.$isEmpty(e)||angular.isUndefined(r)||e<=parseFloat(r)},n.$observe("max",function(e){r=e,a.$validate()}))}}var t={restrict:"A",require:"?ngModel",link:e};return t}angular.module("binary.share.components.big-number.directives").directive("bgBigNumber",e),e.$inject=[]}(),function(){function e(e,t,n,a,o,r,i){var s=!1,c=!1,l=!1,u=!1,d=!1,p="",m="",g={},f=[],h={},y=r.messages,v=function(e,t){return i.isLandingCompanyOf(e,t)},b=function(e){s=v("maltainvest",e),l=v("malta",e),c=v("costarica",e)||v("svg",e),u=v("iom",e),d=v("virtual",e)},S=function R(){g=o.getDefault(),!_.isEmpty(g)&&a.loginFinished?(L(g.currency),b(g.landingCompany),n.sendRequestFor.getAccountStatus(),n.sendRequestFor.getSelfExclusion(),n.sendRequestFor.accountSetting(),g.excluded_until&&!a.hasRestrictedMessage&&(a.hasRestrictedMessage=!0,r.notices.push(y.restrictedMessage))):t(R,1e3)};e.$on("mt5_login_list:success",function(e,t){f=t,w(h)}),e.$on("authorize",function(e,t){a.checkedAccountStatus||C()});var C=function(){a.isLoggedin&&!a.checkedAccountStatus&&(a.checkedAccountStatus=!0,S())};C();var w=function(e){var t="high"===e.risk_classification,n=s?e.indexOf("financial_assessment_not_complete")>-1||e.indexOf("trading_experience_not_complete"):t&&e.indexOf("financial_assessment_not_complete")>-1,o=f.length>0&&(e.indexOf("financial_assessment_not_complete")>-1||e.indexOf("trading_experience_not_complete"));!n&&!o||a.hasRiskAssessmentMessage||(a.hasRiskAssessmentMessage=!0,r.notices.push(y.riskAssessmentMessage))},k=function(e){s&&e.indexOf("crs_tin_information")<0&&!a.hasTaxInfoMessage&&(a.hasTaxInfoMessage=!0,r.notices.push(y.taxInformationMessage))},T=function(){!a.virtuality&&!a.hasTnCMessage&&m&&p&&m!==p&&(a.hasTnCMessage=!0,r.notices.push(y.termsAndConditionsMessage),e.$apply())},$=function(e){1!==e||a.hasAuthenticateMessage||(a.hasAuthenticateMessage=!0,r.notices.push(y.authenticateMessage))},x=function(e){var t=e.indexOf("age_verification")>-1;!t&&(s||l||u)&&(a.hasAgeVerificationMessage||(a.hasAgeVerificationMessage=!0,r.notices.push(y.ageVerificationMessage)))},A=function(e){var t=e.indexOf("unwelcome")>-1;t&&(l||s||u||c)&&(a.hasRestrictedMessage||(a.hasRestrictedMessage=!0,r.notices.push(y.restrictedMessage)))},I=function(e){var t=e.indexOf("cashier_locked")>-1;t&&(l||s||u||c)&&(a.hasRestrictedMessage||(a.hasRestrictedMessage=!0,r.notices.push(y.restrictedMessage)))},E=function(e){var t=e.indexOf("withdrawal_locked")>-1;t&&(l||s||u||c)&&(a.hasRestrictedMessage||(a.hasRestrictedMessage=!0,r.notices.push(y.restrictedMessage)))},O=function(e){var t=e.hasOwnProperty("max_30day_turnover");!u||t||a.hasMaxTurnoverMessage?u&&t&&a.hasMaxTurnoverMessage&&P():(a.hasMaxTurnoverMessage=!0,r.notices.push(y.maxTurnoverLimitNotSetMessage))},D=function(e){var t=e.country_code;null==t&&a.virtuality&&!a.hasCountryMessage&&(a.hasCountryMessage=!0,r.notices.push(y.countryNotSetMessage))},L=function(e){(""===e||null===e||0===_.trim(e).length)&&(a.hasCurrencyMessage||(a.hasCurrencyMessage=!0,r.notices.push(y.currencyNotSetMessage)))};e.$on("get_account_status",function(e,t){t.hasOwnProperty("status")&&(h=t.status,$(t.prompt_client_to_authenticate),k(h),x(h),A(h),I(h),E(h),n.sendRequestFor.mt5LoginList())}),e.$on("get_settings",function(e,t){t&&(m=t.client_tnc_status,T(),D(t))}),e.$on("website_status",function(e,t){t&&p!==t.terms_conditions_version&&(p=t.terms_conditions_version,T())}),e.$on("get-self-exclusion",function(e,t){O(t)}),e.$on("set-settings",function(e,t){P()}),e.$on("tnc_approval",function(e,t){1===t&&P()}),e.$on("set_financial_assessment:success",function(e,t){P()}),e.$on("currency:changed",function(){P()});var P=function(){a.hasAuthenticateMessage=!1,a.hasRestrictedMessage=!1,a.hasMaxTurnoverMessage=!1,a.hasCountryMessage=!1,a.hasTnCMessage=!1,a.hasTaxInfoMessage=!1,a.hasRiskAssessmentMessage=!1,a.hasAgeVerificationMessage=!1,a.hasCurrencyMessage=!1,a.checkedAccountStatus=!1,r.emptyNotices(),C()}}angular.module("binary.share.components.check-user-status.controllers").controller("CheckUserStatusController",e),e.$inject=["$scope","$timeout","websocketService","appStateService","accountService","notificationService","clientService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/check-user-status/check-user-status.template.html",controller:"CheckUserStatusController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.check-user-status.directives").directive("bgCheckUserStatus",e)}(),function(){function e(e){var t=this;t.showMessage=!1,e.$on("connection:ready",function(n){e.$applyAsync(function(){t.showMessage=!1})}),e.$on("connection:error",function(n,a){e.$applyAsync(function(){t.showMessage=!0,a?t.message="app.ssl_cert_failed":t.message="app.connection_error"})})}angular.module("binary.share.components.connectivity.controllers").controller("ConnectionLostController",e),e.$inject=["$scope"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/connectivity/connection-lost.template.html",controller:"ConnectionLostController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.connectivity.directives").directive("bgConnectionLost",e)}(),function(){function e(e,t,n,a){function o(){ionic.Platform.isWebView()?(e.$on("$cordovaNetwork:online",function(e,n){t.go("home")}),e.$on("$cordovaNetwork:offline",function(e,n){t.go("no-connection")})):(window.addEventListener("online",function(e){t.go("home")},!1),window.addEventListener("offline",function(e){t.go("no-connection")},!1))}function r(){o()}var i=this;i.isOffline=function(){return ionic.Platform.isWebView()?!n.isOnline():!navigator.onLine},i.isOnline=function(){return ionic.Platform.isWebView()?n.isOnline():navigator.onLine},a.ready(function(){r(),e.$on("$stateChangeSuccess",function(e,n){i.isOnline()||t.go("no-connection")})})}angular.module("binary.share.components.connectivity.controllers").controller("ConnectivityController",e),e.$inject=["$scope","$state","$cordovaNetwork","$ionicPlatform"]}(),function(){function e(){var e={restrict:"E",controller:"ConnectivityController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.connectivity.directives").directive("bgConnectivity",e)}(),function(){function e(e,t,n,a,o,r){var i=this;i.hideMenuButton=!1,i.hideBalance=!1,i.disableMenuButton=!1,i.disableBackButton=!1,i.showBack=!1,a.canDragContent(!1),n.backView(null),i.ios=ionic.Platform.isIOS(),i.android=ionic.Platform.isAndroid(),i.isMaltainvest=o.isMaltainvest,i.toggleSideMenu=function(){(o.tradeMode||!o.purchaseMode)&&a.toggleLeft()},e.$watch(function(){return o.purchaseMode},function(){i.disableMenuButton=o.purchaseMode}),e.$watch(function(){return o.passwordChanged},function(){i.disableBackButton=o.passwordChanged}),e.$on("$stateChangeSuccess",function(e,t,n,a,r){i.to=t,i.from=a,i.hideBalance=!1,["transaction-detail","language","profile","self-exclusion","change-password","trading-times","asset-index","limits","financial-assessment","terms-and-conditions","authentication"].indexOf(i.to.name)>-1?(i.hideMenuButton=!0,i.showBack=!0):["mt5-web"].indexOf(i.to.name)>-1?i.hideBalance=!0:["contact"].indexOf(i.to.name)>-1?["authentication","notifications"].indexOf(i.from.name)>-1?(i.hideMenuButton=!0,i.showBack=!0):(i.hideMenuButton=!1,i.showBack=!1):["real-account-opening","maltainvest-account-opening"].indexOf(i.to.name)>-1&&o.redirectedFromAccountsManagemenet?["accounts-management"].indexOf(i.from.name)>-1&&(i.hideMenuButton=!0,i.showBack=!0):("statement"===i.from.name&&"transaction-detail"!==i.to.name&&document.getElementsByClassName("reality-check").length>0&&($(".popup-container").addClass("popup-showing"),$("body").addClass("popup-open"),$(".backdrop").addClass("visible")),i.hideMenuButton=!1,i.showBack=!1,"profit-table"===i.from.name&&(o.isProfitTableSet=!1),"statement"===i.from.name&&(o.isStatementSet=!1))}),e.$on("authorize",function(e,t){t&&(i.isMaltainvest=r.isLandingCompanyOf("maltainvest",t.landing_company_name))}),i.goToPrevPage=function(){i.to.detailed?t.go("trade"):(t.go(i.from),("real-account-opening"===i.to.name||"maltainvest-account-opening"===i.to.name)&&(o.selectedCurrency=!1,o.redirectedFromAccountsManagemenet=!1))}}angular.module("binary.share.components").controller("HeaderController",e),e.$inject=["$scope","$state","$ionicHistory","$ionicSideMenuDelegate","appStateService","clientService"]}(),function(){function e(){function e(){}var t={link:e,templateUrl:"js/share/components/header/header.template.html",retrict:"A",controller:"HeaderController",controllerAs:"vm",bindToController:!0,scope:{spinLogo:"="}};return t}angular.module("binary.share.components").directive("bgHeader",e)}(),function(){function e(e,t,n){function a(){var e=window.navigator.userAgent,t=/chrome|ucbrowser|fxios|crios/i.test(e);return!t&&/safari/i.test(e)?!0:!1}var o=this;o.icon='<i class="icon ion-ios-upload-outline"></i>',o.showPrompt=function(){t(["ios-pwa-prompt.title","ios-pwa-prompt.close"]).then(function(t){var a=n.displayIOSPWAPrompt(t["ios-pwa-prompt.title"],"ios-paw-prompt",e,"js/share/components/ios-pwa-prompt/ios-pwa-prompt.template.html",[{text:t["ios-pwa-prompt.close"],type:"button-default",onTap:function(e){a.close()}}])}),localStorage.setItem("lastSeenIOSPWAPrompt",(new Date).getTime())},o.checkToShowPrompt=function(){if(window.navigator.standalone)return!1;var e=localStorage.getItem("lastSeenIOSPWAPrompt")||null,t=e?((new Date).getTime()-e)/864e5:0,n=/IPHONE|IPAD|IPOD/i.test(navigator.appVersion);return n&&a()&&(0===t||t>=14)},o.init=function(){o.checkToShowPrompt()&&o.showPrompt()},o.init()}angular.module("binary.share.components.ios-pwa-prompt.controllers").controller("IosPwaPromptController",e),e.$inject=["$scope","$translate","alertService"]}(),function(){function e(){var e={restrict:"E",controller:"IosPwaPromptController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.ios-pwa-prompt.directives").directive("iosPwaPrompt",e)}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/language/language-list.template.html",controller:"LanguageController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.language.directives").directive("bgLanguageList",e)}(),function(){function e(e,t,n,a,o,r){var i=this;i.languages=[],i.appSupportedLanguages=[],i.languagesList=[],i.isLanguageReady=!1,i.showSpinner=!1,i.ios=ionic.Platform.isIOS(),i.android=ionic.Platform.isAndroid();var s=function(){var e=a.supportedLanguages;i.appSupportedLanguages=t.appSupportedLanguages,_.forEach(i.appSupportedLanguages,function(t){if(i.value=t.toUpperCase(),e.indexOf(i.value)>-1){var a=i.value.toLowerCase(),o=n.getLanguageNativeName(a);i.languages.push({id:a,title:o})}}),i.languages.length&&(i.isLanguageReady=!0,
r.isLanguageReady=!0)};e.$on("authorize",function(e,t){i.showSpinner=!1}),e.$on("supported_languages",s),i.language=n.read(),i.changeLanguage=function(e){i.language=e||i.language,n.update(i.language),i.showSpinner=!0},s()}angular.module("binary.share.components.language.controllers").controller("LanguageController",e),e.$inject=["$scope","config","languageService","supportedLanguagesService","websocketService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/language/language.template.html",controller:"LanguageController",controllerAs:"vm",scope:{},bindToController:!0};return e}angular.module("binary.share.components.language.directives").directive("language",e)}(),function(){function e(e,t){var n=this;n.logout=function(n){t.confirmRemoveAllAccount(function(t){"boolean"!=typeof t&&(t=1===t?!0:!1),t&&e.logout()})}}angular.module("binary.share.components.logout.controllers").controller("LogoutController",e),e.$inject=["websocketService","alertService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/logout/logout.template.html",controller:"LogoutController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.logout.directives").directive("bgLogout",e)}(),function(){function e(e,t){function n(n,a,o){var r=0,i=o.interval?Number(o.interval):300;n.longPress=!1;var s=function(a){a.stopPropagation(),a.preventDefault(),n.longPress=!0,o.repetitive&&"true"===o.repetitive?(n.$eval(o.onLongPress),r=t(function(){n.longPress&&n.$eval(o.onLongPress)},i)):r=e(function(){n.longPress&&n.$eval(o.onLongPress)},i)},c=function(a){n.longPress=!1,o.repetitive&&"true"===o.repetitive?t.cancel(r):e.cancel(r),r=void 0,o.onTouchEnd&&n.$apply(function(){n.$eval(o.onTouchEnd)})};a.bind("touchstart",s),a.bind("touchend",c),a.bind("mousedown",s),a.bind("mouseup",c)}var a={restrict:"A",link:n};return a}angular.module("binary.share.components.long-press.directives").directive("onLongPress",e),e.$inject=["$timeout","$interval"]}(),function(){function e(e,t,n,a,o){var r=this;e.$watch(function(){return a.notices},function(){r.notices=a.notices}),e.$watch(function(){return o.purchaseMode},function(){r.disableMenuButton=o.purchaseMode}),r.goToNotifications=function(){"notifications"===t.current.name?n.goBack():t.go("notifications")}}angular.module("binary.share.components.notification-icon.controllers").controller("NotificationIconController",e),e.$inject=["$scope","$state","$ionicHistory","notificationService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/notification-icon/notification-icon.template.html",controller:"NotificationIconController",controllerAs:"vm",scope:{},bindToController:!0};return e}angular.module("binary.share.components.notification-icon.directives").directive("bgNotificationIcon",e)}(),function(){function e(){function e(e,t,n,a){a&&(a.$formatters=[],a.$parsers=[],a.$formatters.push(function(e){return a.$isEmpty(e)?null:e}),a.$parsers.push(function(e){return a.$isEmpty(e)?null:e}))}var t={restrict:"A",require:"?ngModel",link:e};return t}angular.module("binary.share.components.number.directives").directive("bgNumber",e)}(),function(){function e(e,t,n,a,o,r,i){var s=this,c=void 0;s.integerError=!1;var l=function(e,t){return sessionStorage.setItem(e,t)},u=function(e){return sessionStorage.getItem(e)},d=function(e){return sessionStorage.removeItem(e)},p=function(){if(r.isRealityChecked||_.isEmpty(sessionStorage._interval)!==!0)if(r.isRealityChecked||_.isEmpty(sessionStorage.start)){if(!_.isEmpty(sessionStorage._interval)){var e=6e4*u("_interval");s.realityCheckTimeout=t(h,e)}}else{r.isRealityChecked=!0;var n=u("start"),a=(new Date).getTime();if(6e4*u("_interval")-(a-n)>0){var o=6e4*u("_interval")-(a-n);s.realityCheckTimeout=t(h,o)}}else g()},m=function(){$(".popup-container").removeClass("popup-showing"),$("body").removeClass("popup-open"),$(".backdrop").removeClass("visible")};e.$on("authorize",function(e,n){s.sessionLoginId=n.loginid,r.realityCheckLogin||(r.realityCheckLogin=!0,r.isRealityChecked||0!==n.is_virtual||r.isChangedAccount?r.isRealityChecked&&r.isChangedAccount&&1===n.is_virtual?(t.cancel(s.realityCheckTimeout),r.isChangedAccount=!1,r.isRealityChecked=!0,_.isEmpty(sessionStorage.realityCheckStart)||d("realityCheckStart"),_.isEmpty(sessionStorage.start)||d("start")):r.isRealityChecked&&r.isChangedAccount&&0===n.is_virtual?(s.realityCheckTimeout&&t.cancel(s.realityCheckTimeout),_.isEmpty(sessionStorage.realityCheckStart)||d("realityCheckStart"),_.isEmpty(sessionStorage.start)||d("start"),r.isRealityChecked=!1,c=n.landing_company_name,o.sendRequestFor.landingCompanyDetails(c),r.isChangedAccount=!1):!r.isRealityChecked&&r.isChangedAccount&&0===n.is_virtual&&(s.realityCheckTimeout&&t.cancel(s.realityCheckTimeout),_.isEmpty(sessionStorage.realityCheckStart)||d("realityCheckStart"),_.isEmpty(sessionStorage.start)||d("start"),r.isRealityChecked=!1,c=n.landing_company_name,o.sendRequestFor.landingCompanyDetails(c),r.isChangedAccount=!1):(c=n.landing_company_name,o.sendRequestFor.landingCompanyDetails(c)))}),e.$on("landing_company_details",function(e,t){1===t.has_reality_check&&p()});var g=function(){r.isRealityChecked=!0,s.data={},s.data.interval=60,r.isPopupOpen||(r.isPopupOpen=!0,i.displayRealitCheckInterval(n.instant("reality-check.title"),"reality-check get-interval",e,"js/share/components/reality-check/interval-popup.template.html",[{text:n.instant("reality-check.continue"),type:"button-positive",onTap:function(e){s.data.interval<=60&&s.data.interval>=10&&!s.integerError?(l("_interval",s.data.interval),s.data.start_interval=(new Date).getTime(),l("start",s.data.start_interval),p(),r.isPopupOpen=!1,l("realityCheckStart",Date.now())):e.preventDefault()}}]))},f=function(){d("_interval"),l("_interval",s.data.interval)};e.$on("reality_check",function(e,t){v(t)});var h=function(){return o.sendRequestFor.realityCheck()},y=function(){s.realityCheckItems.start_time=u("realityCheckStart"),s.now=Date.now();var e=s.now-s.realityCheckItems.start_time;s.realityCheckItems.days=Math.floor(e/864e5);var t=e-864e5*s.realityCheckItems.days;s.realityCheckItems.hours=Math.floor(t/36e5);var n=e-(864e5*s.realityCheckItems.days+36e5*s.realityCheckItems.hours);s.realityCheckItems.minutes=Math.floor(n/6e4)};s.logout=function(){i.confirmRemoveAllAccount(function(e){"boolean"!=typeof e&&(e=1===e?!0:!1),e?o.logout():(r.isPopupOpen=!1,p())})};var v=function(o){d("start"),s.realityCheckItems=o,s.sessionLoginId!==s.realityCheckItems.loginid||r.isPopupOpen||(y(),s.data={},s.data.interval=parseInt(u("_interval")),t.cancel(s.realityCheckTimeout),r.isPopupOpen=!0,i.displayRealityCheckResult(n.instant("reality-check.title"),"reality-check result-popup",e,"js/share/components/reality-check/reality-check-result.template.html",[{text:n.instant("reality-check.logout"),type:"button-secondary",onTap:function(){s.logout()}},{text:n.instant("reality-check.view_statement"),type:"button-positive",onTap:function(e){a.go("statement"),m(),e.preventDefault()}},{text:n.instant("reality-check.continue"),type:"button-positive",onTap:function(e){s.data.interval<=60&&s.data.interval>=10&&!s.integerError?s.sessionLoginId===s.realityCheckItems.loginid&&(f(s.data.interval),s.data.start_interval=(new Date).getTime(),l("start",s.data.start_interval),p(),r.isPopupOpen=!1):e.preventDefault()}}]))};e.$watch("vm.data.interval",function(){s.integerError=r.isPopupOpen&&!(Math.floor(s.data.interval)===s.data.interval&&$.isNumeric(s.data.interval))})}angular.module("binary.share.components.reality-check.controllers").controller("RealityCheckController",e),e.$inject=["$scope","$timeout","$translate","$state","websocketService","appStateService","alertService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/reality-check/reality-check.template.html",controller:"RealityCheckController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.reality-check.directives").directive("bgRealityCheck",e)}(),function(){function e(){function e(e,t,n,a){e.$watch(function(){return a.$viewValue},function(t,n){if(!_.isEmpty(e.regex)&&!_.isEmpty(a.$viewValue)){var o=RegExp(e.regex);o.test(a.$viewValue)?(a.$setViewValue(o.exec(a.$viewValue)[0]),a.$render()):(a.$setViewValue(n),a.$render())}})}var t={restrict:"A",link:e,require:"ngModel",scope:{regex:"=bgRegexValidate"}};return t}angular.module("binary.share.components.regex-validate.directives").directive("bgRegexValidate",e)}(),function(){function e(e,t,n){function a(){o()}function o(){t.isLoggedin&&n.sendRequestFor.ping(),e(o,6e4)}a()}angular.module("binary.share.components.ping.controllers").controller("PingController",e),e.$inject=["$timeout","appStateService","websocketService"]}(),function(){function e(){var e={restrict:"E",controller:"PingController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.ping.directives").directive("ping",e)}(),function(){function e(e){var t=this;t.message=e.message}angular.module("binary.share.components.service-outage.controllers").controller("ServiceOutagePageController",e),e.$inject=["$stateParams"]}(),function(){function e(e,t,n,a){function o(){a.sendRequestFor.websiteStatus(!0)}e.$on("website_status",function(e,a){a.site_status&&"up"===a.site_status&&"down"===n.siteStatus?(n.siteStatus=a.site_status,t.go("trade")):a.site_status&&"down"===a.site_status&&(n.siteStatus=a.site_status,t.go("outage",{message:a.message}))}),e.$on("$stateChangeStart",function(e,t,a,o,r,i){"down"===n.siteStatus&&("outage"===o.name||"outage"!==t.name)&&e.preventDefault()}),o()}angular.module("binary.share.components.service-outage.controllers").controller("ServiceOutageController",e),e.$inject=["$scope","$state","appStateService","websocketService"]}(),function(){function e(){var e={restrict:"E",scope:{},controller:"ServiceOutageController"};return e}angular.module("binary.share.components.service-outage.directives").directive("bgServiceOutage",e)}(),function(){function e(){function e(){}var t={link:e,templateUrl:"js/share/components/side-menu/side-menu.template.html",retrict:"A",scope:{}};return t}angular.module("binary.share.components").directive("bgSideMenu",e)}(),function(){function e(e){var t=this;t.start=!1,e.$on("spinner-logo:start",function(){t.start=!0}),e.$on("spinner-logo:stop",function(){t.start=!1})}angular.module("binary.share.components.spinner-logo.controllers").controller("SpinnerLogoController",e),e.$inject=["$scope"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/share/components/spinner-logo/spinner-logo.template.html",replace:!0,controller:"SpinnerLogoController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.share.components.spinner-logo.directives").directive("bgSpinnerLogo",e)}(),function(){function e(e){e.ready(function(){window.codePush&&window.codePush.sync()})}angular.module("binary.share.components.updater.controllers").controller("UpdaterController",e),e.$inject=["$ionicPlatform"]}(),function(){function e(){var e={restrict:"E",controller:"UpdaterController",controllerAs:"vm",scope:{}};return e}angular.module("binary.share.components.updater.directives").directive("bgUpdater",e)}(),function(){function e(e,t,n,a,o,r,i){function s(e){var t=/acct\d+=(\w+)&token\d+=(\w{2}-\w{29})(&cur\d+=(\w{2,3}))?/g,n=null,a=[];do n=t.exec(e),n&&a.push({loginid:n[1],token:n[2],currency:n[4]?n[4]:null});while(n);return a}function c(e){var t=/error=(\w+)/g,n=null,a=[];do n=t.exec(e),n&&a.push(n[1]);while(n);return a}var l=this,u=[],d=function(e){e&&32===e.length?(t.show(),a.authenticate(e)):o.accountError.tokenNotValid()},p=function(e){u=s(e),u.length>0&&d(u[0].token)};window.onmessage=function(e){e.data&&e.data.url&&p(e.data.url)},e.$on("authorize",function(e,n){if(n){var a=n.account_list;u.forEach(function(e,t){if(t>0){var o=u[t];if(o.email=n.email,o.country=n.country,a){var i=_.find(a,function(e){return e.loginid===o.loginid});o=_.assign(o,i)}r.add(o)}})}t.hide()}),l.init=function(){_.isEmpty(l.accountTokens)||p(l.accountTokens)},l.signin=function(){var e=localStorage.getItem("config.server_url"),t=e?"https://"+e+"/oauth2/authorize":n.oauthUrl,a=localStorage.getItem("config.app_id")||n.app_id,o=t+"?app_id="+a+"&l="+i.read(),r="_system";window.navigator.standalone&&(r="_self");var l=window.open(o,r,"location=no,toolbar=no");$(l).on("loadstart",function(e){var t=e.originalEvent.url;return c(t).length>0?void l.close():(u=s(t),void(u&&u.length&&(l.close(),d(u[0].token))))})},l.init()}angular.module("binary.pages.signin.components.oauth").controller("OauthController",e),e.$inject=["$scope","$ionicLoading","config","websocketService","alertService","accountService","languageService"]}(),function(){function e(){var e={restrict:"E",scope:{accountTokens:"="},templateUrl:"js/pages/sign-in/components/oauth/oauth.template.html",controller:"OauthController",controllerAs:"vm",bindToController:!0};return e}angular.module("binary.pages.signin.components.oauth").directive("oauth",e)}(),function(){function e(){}angular.module("binary.pages.trade.components.longcode.controllers").controller("LongcodeController",e)}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/longcode/longcode.template.html",controller:"LongcodeController",controllerAs:"vm",bindToController:!0,scope:{purchasedContract:"="}};return e}angular.module("binary.pages.trade.components.longcode.directives").directive("bgLongcode",e)}(),function(){function e(e,t,n){function a(){var e="tradeChart";r.chartDragLeft=t.dragLeft,r.chartDragRight=t.dragRight,r.chartTouch=t.dragStart,r.chartRelease=t.dragEnd,r.chartPinchIn=t.zoomOut,r.chartPinchOut=t.zoomIn,r.chartPinchStart=t.zoomStart,r.chartPinchEnd=t.zoomEnd,t.drawChart(e),o()}function o(){if(!_.isEmpty(r.proposal.symbol)){var e=r.proposal.symbol;n.sendRequestFor.forgetTicks(),n.sendRequestFor.ticksHistory({ticks_history:e,end:"latest",count:t.getCapacity(),subscribe:1})}}var r=this;e.$on("$destroy",function(e,a){n.sendRequestFor.forgetTicks(),t.destroy()}),e.$on("tick",function(e,a){a&&a.echo_req.ticks_history===r.proposal.symbol?t.historyInterface.addTick(a.tick):n.sendRequestFor.forgetStream(a.tick.id)}),e.$on("history",function(e,n){n&&n.echo_req.ticks_history===r.proposal.symbol&&t.historyInterface.addHistory(n.history)}),e.$on("candles",function(e,n){n&&t.historyInterface.addCandles(n.candles)}),e.$on("ohlc",function(e,n){n&&t.historyInterface.addOhlc(n.ohlc)}),e.$on("connection:ready",function(e){o()}),e.$watch(function(){return r.proposal.symbol},function(e,t){r.proposal.symbol&&o()}),a()}angular.module("binary.pages.trade.components.chart.controllers").controller("ChartController",e),e.$inject=["$scope","chartService","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/chart/chart.template.html",controller:"ChartController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=",purchasedContract:"="}};return e}angular.module("binary.pages.trade.components.chart.directives").directive("bgChart",e)}(),function(){function e(e){var t=this;t.spots=[],t.reset=!0,t.counter=0,e.$on("contract:spot",function(n,a,o){if(t.reset){t.spots=new Array(a.duration+1);for(var r=0;r<t.spots.length;r++)t.spots[r]={};t.reset=!1,t.counter=0}var i=_.clone(a);e.$applyAsync(function(){t.spots[t.counter++]={result:i.result,value:o.toString().slice(-1)}})}),e.$on("contract:finished",function(e,n){t.reset=!0})}angular.module("binary.pages.trade.components.chart.controllers").controller("DigitResultController",e),e.$inject=["$scope"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/chart/digit-result.template.html",controller:"DigitResultController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.trade.components.chart.directives").directive("bgDigitResult",e)}(),function(){function e(e){var t=this;t.spots=[],t.reset=!0,t.counter=0,t.selectedTick=0,e.$on("contract:spot",function(n,a,o){t.reset&&(t.spots=new Array(a.duration+1),_.map(t.spots,function(e,n){t.spots[n]={}}),t.reset=!1,t.counter=0);var r=_.clone(a);e.$applyAsync(function(){t.selectedTick=a.selectedTick-1,t.counter<t.spots.length&&(t.spots[t.counter++]={result:r.result,value:o})})}),e.$on("contract:finished",function(e,n){t.reset=!0})}angular.module("binary.pages.trade.components.chart.controllers").controller("TickResultController",e),e.$inject=["$scope"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/chart/tick-result.template.html",controller:"TickResultController",controllerAs:"vm",bindToController:!0,scope:{}};return e}angular.module("binary.pages.trade.components.chart.directives").directive("bgTickResult",e)}(),function(){function e(e,t,n){function a(){}function o(n){_.isEmpty(n)&&(n=sessionStorage.currency);var a=t.currenciesConfig[n];return e.$applyAsync(function(){r.regex="^(\\d*\\.?\\d{0,"+(a?a.fractional_digits:2)+"})",r.amount=new RegExp(r.regex).exec(r.amount)[0]}),r.regex}var r=this;r.amount=r.proposal.amount,r.isIOS=ionic.Platform.isIOS(),r.marketsClosed=!1,o(),e.$watch(function(){return r.proposal.amount},function(e,t){e!==r.amount&&(r.amount=e)}),e.$on("authorize",function(e,t){o(t.currency)}),r.changePayoutType=function(){"payout"===r.proposal.basis?r.proposal.basis="stake":r.proposal.basis="payout",n.setPropertyValue("basis",r.proposal.basis)},r.changeAmount=function(){_.isEmpty(r.amount)||"NaN"===r.amount||0===Number(r.amount)?r.proposal.amount=r.amount:(/^\.\d+$/.test(r.amount)&&(r.amount="0"+r.amount),r.proposal.amount=+r.amount),n.setPropertyValue("amount",r.proposal.amount)},r.add=function(){r.amount=Number(r.amount)+1},r.subtract=function(){r.amount=Number(r.amount)-1>=1?Number(r.amount)-1:1},r.stopLongPress=function(){r.proposal.amount=+r.amount,n.setPropertyValue("amount",r.proposal.amount)},e.$on("symbols:updated",function(e,t){_.isEmpty(t)?r.marketsClosed=!0:r.marketsClosed=!1}),a()}angular.module("binary.pages.trade.components.payout.controllers").controller("PayoutController",e),e.$inject=["$scope","appStateService","proposalService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/payout/payout.template.html",controller:"PayoutController",controllerAs:"vm",bindToController:!0,scope:{proposal:"="}};return e}angular.module("binary.pages.trade.components.payout.directives").directive("bgPayout",e)}(),function(){function e(e){var t=this;t.regex="^([+,-]?(\\d+)?(\\.)?\\d*)$",t.changeBarrier=function(){e.setPropertyValue("barrier",t.proposal.barrier)}}angular.module("binary.pages.trade.components.options.controllers").controller("BarrierController",e),e.$inject=["proposalService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/barrier.template.html",controller:"BarrierController",controllerAs:"vm",bindToController:!0,scope:{proposal:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgBarrier",e)}(),function(){function e(){function e(){var e=JSON.parse(sessionStorage.tradeTypes)[t.tradeType];t.digits=_.union(e[0].last_digit_range,e[1].last_digit_range)}var t=this;t.digits=[],t.selectDigit=function(e){t.select()(e)},e()}angular.module("binary.pages.trade.components.options.controllers").controller("DigitsController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/digits.template.html",controller:"DigitsController",controllerAs:"vm",bindToController:!0,scope:{select:"&",tradeType:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgDigits",e)}(),function(){function e(e,t){function n(){return _.isEmpty(sessionStorage.markets)?void setTimeout(n,500):void e.$applyAsync(function(){a.markets=JSON.parse(sessionStorage.markets)})}var a=this;a.markets={},a.selectMarket=function(e){a.select()(e)},n()}angular.module("binary.pages.trade.components.options.controllers").controller("MarketsController",e),e.$inject=["$scope","websocketService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/markets.template.html",controller:"MarketsController",controllerAs:"vm",bindToController:!0,scope:{select:"&"}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgMarkets",e)}(),function(){function e(e){function t(e){var t=_.findIndex(a,function(t){return t[o.symbol]===e});if(t>-1){var n=_.findIndex(a[t][o.contracts],function(e){return e[o.contractFrom].indexOf("t")>-1});return n>-1}return!1}var n={},a=[],o={symbol:0,displayName:1,contracts:2,contractName:0,contractDisplayName:1,contractFrom:2,contractTo:3};return n.getMarketByIndex=function(e){if(!_.isEmpty(sessionStorage.markets)){var t=JSON.parse(sessionStorage.markets||null),n=Object.keys(t);return t[n[e]]}return null},n.findTickMarkets=function(){var n=JSON.parse(e.getItem("active_symbols"));a=JSON.parse(e.getItem("asset_index"));var o={};return _.forEach(n,function(e,n){var a=[];e.forEach(function(n,o){t(e[o].symbol)&&a.push(e[o])}),a.length>0&&(o[n]={displayName:e[0].market_display_name,underlying:a})}),sessionStorage.markets=JSON.stringify(o),o},n}angular.module("binary.pages.trade.components.options.services").factory("marketsService",e),e.$inject=["sessionStorageService"]}(),function(){function e(e,t,n,a,o,r,i,s,c){function l(){var e=a.get();_.isEmpty(e)||(p.options=e,u()),s.sendRequestFor.symbols()}function u(){e.$applyAsync(function(){p.proposal=o.update(p.options)})}function d(){p.modalCtrl&&(p.modalCtrl.hide(),c.modalIsOpen=!1)}var p=this;p.showOptions=!1,p.marketsClosed=!1,p.SECTIONS={OVERVIEW1:0,OVERVIEW2:1,UNDERLYINGS:2,MARKETS:3,TRADETYPES:4,TICKS:5,DIGITS:6,SELECTEDTICK:7},p.options={market:null,underlying:null,tradeType:null,tick:null,digit:null,selected_tick:null},p.section1=p.SECTIONS.OVERVIEW1,p.section2=p.SECTIONS.OVERVIEW2,e.$on("symbols:updated",function(e,t){_.isEmpty(t)?(p.showOptions=!1,p.marketsClosed=!0,p.proposal={}):(p.showOptions=!0,s.sendRequestFor.assetIndex())}),e.$on("assetIndex:updated",function(e){var t=n.findTickMarkets();p.marketsLength=t?_.keys(t).length:0,!_.isEmpty(p.options.market)&&_.find(t,["displayName",p.options.market.displayName])?p.selectMarket(p.options.market):p.selectMarket(n.getMarketByIndex(0))}),e.$on("symbol",function(t,n){sessionStorage.groupSymbols=JSON.stringify(n);var a=i.findTickContracts(n);p.tradeTypesLength=a?_.keys(a).length:0,e.$applyAsync(function(){p.options.tradeType=Object.keys(a).indexOf(p.options.tradeType)>-1?p.options.tradeType||Object.keys(a)[0]:Object.keys(a)[0],p.options.tick=p.options.tick||a[p.options.tradeType][0].min_contract_duration.slice(0,-1),p.options.digit=a[p.options.tradeType][0].last_digit_range?p.options.digit||a[p.options.tradeType][0].last_digit_range[0]:null,p.options.barrier=a[p.options.tradeType][0].barriers>0?p.options.barrier||a[p.options.tradeType][0].barrier:null,p.options.selected_tick="High/Low Ticks"===p.options.tradeType?p.options.selected_tick||p.options.tick:null;var e=parseInt(a[p.options.tradeType][0].min_contract_duration.slice(0,-1)),t=parseInt(a[p.options.tradeType][0].max_contract_duration.slice(0,-1));p.tickRangeLength=e&&t?_.range(e,t+1).length:0,u(),r.proposalIsReady=!0})}),e.$on("authorize",function(e,t){p.proposal.currency=t.currency}),e.$on("options:updated",function(e,t){p.options=t}),t.fromTemplateUrl("js/pages/trade/components/options/options-modal.html",{scope:e}).then(function(e){p.modalCtrl=e}),p.closeModal=function(){p.section1=p.SECTIONS.OVERVIEW1,p.section2=p.SECTIONS.OVERVIEW2,d()},p.setSection=function(e,t){switch(t){case p.SECTIONS.MARKETS:var n=JSON.parse(sessionStorage.markets||"{}");if(Object.keys(n).length<=1)return;break;case p.SECTIONS.UNDERLYINGS:if(p.options.market.underlying.length<=1)return;break;case p.SECTIONS.TRADETYPES:var a=JSON.parse(sessionStorage.tradeTypes||"{}");if(Object.keys(a).length<=1)return;break;case p.SECTIONS.TICKS:if(p.tickRangeLength<=1)return}1===e?(p.section2=p.SECTIONS.OVERVIEW2,p.section1=t):2===e&&(p.section1=p.SECTIONS.OVERVIEW1,p.section2=t),p.modalCtrl.show(),c.modalIsOpen=!0},p.selectMarket=function(e){e&&(p.options.market=e,p.options.underlying=!_.isEmpty(p.options.underlying)&&_.findIndex(e.underlying,["symbol",p.options.underlying.symbol])>-1?p.options.underlying:e.underlying[0],sessionStorage.removeItem("tradeTypes"),s.sendRequestFor.contractsForSymbol(p.options.underlying.symbol),p.section1=p.SECTIONS.OVERVIEW1,u()),d()},p.selectUnderlying=function(e){p.options.underlying=e,p.options.barrier=null,sessionStorage.removeItem("tradeTypes"),s.sendRequestFor.contractsForSymbol(e.symbol),p.section1=p.SECTIONS.OVERVIEW1,u(),d()},p.selectTradeType=function(e){p.options.tradeType=e,e=JSON.parse(sessionStorage.tradeTypes)[e][0],p.options.tick="High/Low Ticks"===p.options.tradeType?e.min_contract_duration.slice(0,-1):p.options.tick||e.min_contract_duration.slice(0,-1),p.options.digit=e.last_digit_range?p.options.digit||e.last_digit_range[0]:null,p.options.barrier=e.barriers>0&&!_.isEmpty(e.barrier)?p.options.barrier||e.barrier:null,p.options.selected_tick="High/Low Ticks"===p.options.tradeType?p.options.selected_tick||parseInt(p.options.tick):null;var t=parseInt(e.min_contract_duration.slice(0,-1)),n=parseInt(e.max_contract_duration.slice(0,-1));p.tickRangeLength=t&&n?_.range(t,n+1).length:0,p.section2=p.SECTIONS.OVERVIEW2,u(),d()},p.selectTick=function(e){p.options.tick=e,p.section2=p.SECTIONS.OVERVIEW2,u(),d()},p.selectDigit=function(e){p.options.digit=e,p.options.barrier=null,p.section2=p.SECTIONS.OVERVIEW2,u(),d()},p.selectSelectedTick=function(e){p.options.selected_tick=e,p.options.barrier=null,p.section2=p.SECTIONS.OVERVIEW2,u(),d()},p.getLanguageId=function(e){return e?"options."+e.replace(/[\s,\/]/g,"_").toLowerCase():e},l()}angular.module("binary.pages.trade.components.options.controllers").controller("OptionsController",e),e.$inject=["$scope","$ionicModal","marketsService","optionsService","proposalService","tradeService","tradeTypesService","websocketService","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/options.template.html",controller:"OptionsController",controllerAs:"vm",bindToController:!0,scope:{proposal:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgOptions",e)}(),function(){function e(){var e={};return e.get=function(){return _.isEmpty(localStorage.options)?null:JSON.parse(localStorage.options)},e.set=function(e){return _.isEmpty(e)?!1:(localStorage.options=JSON.stringify(e),!0)},e}angular.module("binary.pages.trade.components.options.services").factory("optionsService",e)}(),function(){function e(){var e=this;e.selectableTicksRange=[],e.selectSelectedTick=function(t){e.select()(t)};var t=function n(){if(_.isEmpty(sessionStorage.tradeTypes))setTimeout(n,5);else{var t=e.tick?parseInt(e.tick):0;e.selectableTicksRange=_.range(1,t+1)}};t()}angular.module("binary.pages.trade.components.options.controllers").controller("SelectedTickController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/selected-tick.template.html",controller:"SelectedTickController",controllerAs:"vm",bindToController:!0,scope:{select:"&",tick:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgSelectedTick",e)}(),function(){function e(){var e=this,t=0,n=0;e.tickRange=[],e.selectTick=function(t){e.select()(t)};var a=function(e){return e.slice(0,-1)},o=function r(){if(_.isEmpty(sessionStorage.tradeTypes))setTimeout(r,5);else{var o=JSON.parse(sessionStorage.tradeTypes)[e.tradeType][0];t=parseInt(a(o.min_contract_duration)),n=parseInt(a(o.max_contract_duration)),e.tickRange=_.range(t,n+1)}};o()}angular.module("binary.pages.trade.components.options.controllers").controller("TicksController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/ticks.template.html",controller:"TicksController",controllerAs:"vm",bindToController:!0,scope:{select:"&",tradeType:"="}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgTicks",e)}(),function(){function e(){function e(){t.tradeTypes=JSON.parse(sessionStorage.tradeTypes)}var t=this;t.tradeTypes={},t.supportedTradeTypes=[],t.selectTradeType=function(e){t.select()(e)},t.getLanguageId=function(e){return"options."+e.replace(/[\s,\/]/g,"_").toLowerCase()},e()}angular.module("binary.pages.trade.components.options.controllers").controller("TradeTypesController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/trade-types.template.html",controller:"TradeTypesController",controllerAs:"vm",bindToController:!0,scope:{select:"&"}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgTradetypes",e)}(),function(){function e(e){var t={},n=e.supportedTradeTypes;return t.findTickContracts=function(e){var t={};_.forEach(e,function(e,n){var a=[];e.forEach(function(t,n){"tick"===e[n].expiry_type&&a.push(e[n])}),a.length>0&&(t[n]=a)});var a={};_.forEach(t,function(e,t){if(2===e.length)a[e[0].contract_category_display]=e;else for(var n=0;n<e.length;n+=2){var o=e[n].contract_category_display;"callput"===e[n].contract_category?o=_.isEmpty(e[n].barrier)?"Rise/Fall":"Higher/Lower":o+=" "+e[n].contract_display.capitalize()+"/"+e[n+1].contract_display.capitalize(),a[o]=[e[n],e[n+1]]}});var o={};return _.forIn(a,function(e,t){_.includes(n,t)&&(o[t]=e)}),sessionStorage.tradeTypes=JSON.stringify(o),o},t}e.$inject=["config"],angular.module("binary.pages.trade.components.options.services").factory("tradeTypesService",e)}(),function(){function e(){function e(){t.underlyings=t.market.underlying}var t=this;t.underlyings=[],t.selectUnderlying=function(e){t.select()(e)},e()}angular.module("binary.pages.trade.components.options.controllers").controller("UnderlyingsController",e),e.$inject=[]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/options/underlyings.template.html",controller:"UnderlyingsController",controllerAs:"vm",bindToController:!0,scope:{market:"=",select:"&"}};return e}angular.module("binary.pages.trade.components.options.directives").directive("bgUnderlyings",e)}(),function(){function e(e,t){var n=this;n.currencyType="fiat";var a=sessionStorage.getItem("currency"),o=t.currenciesConfig[a];o&&(n.currencyType=o.type),e.$watch(function(){return n.proposal},function(){a=sessionStorage.getItem("currency"),o=t.currenciesConfig[a],o&&(n.currencyType=o.type)})}angular.module("binary.pages.trade.components.purchase.controllers").controller("ContractSummaryController",e),e.$inject=["$scope","appStateService"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/purchase/contract-summary.template.html",controller:"ContractSummaryController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=",purchasedContract:"="}};return e}angular.module("binary.pages.trade.components.purchase.directives").directive("bgContractSummary",e)}(),function(){function e(e,t,n,a,o,r,i,s,c){function l(){p.user=a.getDefault(),_.isEmpty(p.contracts)&&setTimeout(l,500)}function u(){m=(new Date).getTime(),r.forget(m)}function d(){if(_.isEmpty(sessionStorage.tradeTypes))setTimeout(d,5);else{var e=JSON.parse(sessionStorage.tradeTypes);p.contracts=e[p.proposal.tradeType],_.isEmpty(p.contracts)||p.contracts[0].underlying_symbol!==p.proposal.symbol||u()}}var p=this,m=0;p.longcode=[],p.contracts=[],p.proposalResponses=[],p.inPurchaseMode=!1,p.showSummary=!1,p.purchasedContractIndex=-1,p.currencyType="fiat",p.isContractFinished=!1,p.contractType="",e.$watch(function(){return p.proposal},function(t,n){
if(!(_.isEqual(t,n)&&p.proposalResponses.length>0)){p.proposalResponses.length>0&&e.$applyAsync(function(){p.proposalResponses[0].isReceiving=!0,p.proposalResponses[1].isReceiving=!0});var a=o.currenciesConfig[p.proposal.currency];a&&(p.currencyType=a.type),d()}},!0),e.$on("appState:tradeMode",function(e){p.showSummary=!o.tradeMode}),e.$on("proposal",function(t,n,a){[1,2].indexOf(a)>-1&&e.$applyAsync(function(){p.proposalResponses[a-1]=n,p.proposalResponses[a-1].hasError=!1,p.proposalResponses[a-1].isReceiving=!1,p.longcode[a-1]=n.longcode}),p.isContractFinished&&(o.purchaseMode=!1,p.inPurchaseMode=!1)}),e.$on("proposal:error",function(n,a,o){[1,2].indexOf(o)>-1&&"AlreadySubscribed"!==a.code&&(e.$applyAsync(function(){p.proposalResponses[o-1]=a,p.proposalResponses[o-1].hasError=!0}),t(p.autoSizeText,1e3))}),e.$on("purchase",function(t,n){var a=n.buy;_.isEmpty(n.buy)||(p.showSummary=!0,e.$applyAsync(function(){p.purchasedContract={contractId:a.contract_id,longcode:a.longcode,payout:p.proposalResponses[p.purchasedContractIndex].payout,cost:a.buy_price,balance:a.balance_after,transactionId:a.transaction_id,profit:parseFloat(p.proposalResponses[p.purchasedContractIndex].payout)-parseFloat(a.buy_price)}}),s.addContract({startTime:a.start_time+1,duration:parseInt(p.proposal.duration),type:"Higher/Lower"===p.proposal.tradeType?p.contractType+"HL":p.contractType,selectedTick:"High/Low Ticks"===p.proposal.tradeType?p.proposal.selected_tick:null,barrier:p.proposal.barrier}))}),e.$on("purchase:error",function(e,t){p.inPurchaseMode=!1,p.showSummary=!1,o.tradeMode=!0,o.purchaseMode=!1,p.purchasedContractIndex=-1,u()}),e.$on("contract:finished",function(e,t){if(t.exitSpot){"win"===t.result?(p.purchasedContract.buyPrice=p.purchasedContract.cost,p.purchasedContract.profit=p.purchasedContract.profit,p.purchasedContract.finalPrice=parseFloat(p.purchasedContract.buyPrice)+parseFloat(p.purchasedContract.profit),i.sendRequestFor.openContract()):"lose"===t.result&&(p.purchasedContract.buyPrice=p.purchasedContract.cost,p.purchasedContract.loss=p.purchasedContract.cost,p.purchasedContract.finalPrice=parseFloat(p.purchasedContract.buyPrice)+parseFloat(p.purchasedContract.loss)),p.purchasedContract.result="lose"===t.result?"loss":t.result;var a=p.contracts[p.purchasedContractIndex];n.google.trackEvent(a.market,a.contract_type,a.underlying_symbol,p.purchasedContract.payout),p.isContractFinished=!0,u()}}),e.$on("forget_all",function(t,n){if(n===m){var a=_.clone(p.proposal);a.contract_type=p.contracts[0].contract_type,a.req_id=1;var o=_.clone(p.proposal);o.contract_type=p.contracts[1].contract_type,o.req_id=2,p.proposalResponses.length>0?e.$applyAsync(function(){p.proposalResponses[0].isReceiving=r.send(a),p.proposalResponses[1].isReceiving=r.send(o)}):(r.send(a),r.send(o))}}),e.$on("$destroy",function(e){r.forget()}),p.getImageUrl=function(e){return"img/trade-icon/"+e.toLowerCase()+".svg"},p.purchase=function(t,n){e.$applyAsync(function(){p.isContractFinished=!1,p.inPurchaseMode=!0,p.purchasedContractIndex=t,o.purchaseMode=!0,o.tradeMode=!1}),n&&(p.contractType=n),r.purchase(p.proposalResponses[t])},p.backToTrade=function(){p.showSummary=!1,o.tradeMode=!0,o.purchaseMode=!1,p.purchasedContractIndex=-1},p.showLongcode=function(e){return c.show({template:p.longcode[e],noBackdrop:!0,duration:2500})},p.autoSizeText=function(){var e=void 0,t=void 0,n=void 0,a=[],o=document.getElementsByClassName("resize");if(o.length<0)return null;for(t=0,n=o.length;n>t;t++)e=o[t],a.push(function(e){for(var t=[],n=function(){var t=parseInt($(e).css("font-size").slice(0,-2))-1+"px";return $(e).css("font-size",t)};e.scrollHeight>e.offsetHeight;)t.push(n());return t}(e));return a},l()}angular.module("binary.pages.trade.components.purchase.controllers").controller("PurchaseController",e),e.$inject=["$scope","$timeout","analyticsService","accountService","appStateService","proposalService","websocketService","chartService","$ionicLoading"]}(),function(){function e(){var e={restrict:"E",templateUrl:"js/pages/trade/components/purchase/purchase.template.html",controller:"PurchaseController",controllerAs:"vm",bindToController:!0,scope:{proposal:"=",purchasedContract:"=",showSummary:"=inPurchaseMode"}};return e}angular.module("binary.pages.trade.components.purchase.directives").directive("bgPurchase",e)}();